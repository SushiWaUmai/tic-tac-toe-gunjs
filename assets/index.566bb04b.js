(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))h(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&h(f)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function h(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();const z={};function re(t){z.context=t}const ie=(t,e)=>t===e,oe=Symbol("solid-track"),vt={equals:ie};let Lt=Ht;const et=1,bt=2,Ut={owned:null,cleanups:null,context:null,owner:null};var U=null;let it=null,q=null,K=null,Y=null,Dt=0;function gt(t,e){const i=q,h=U,r=t.length===0,l=r?Ut:{owned:null,cleanups:null,context:null,owner:e||h},f=r?t:()=>t(()=>Q(()=>Ct(l)));U=l,q=null;try{return ot(f,!0)}finally{q=i,U=h}}function Z(t,e){e=e?Object.assign({},vt,e):vt;const i={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},h=r=>(typeof r=="function"&&(r=r(i.value)),Kt(i,r));return[Ft.bind(i),h]}function ct(t,e,i){const h=Ot(t,e,!1,et);ht(h)}function ue(t,e,i){Lt=pe;const h=Ot(t,e,!1,et);h.user=!0,Y?Y.push(h):ht(h)}function H(t,e,i){i=i?Object.assign({},vt,i):vt;const h=Ot(t,e,!0,0);return h.observers=null,h.observerSlots=null,h.comparator=i.equals||void 0,ht(h),Ft.bind(h)}function Q(t){let e,i=q;return q=null,e=t(),q=i,e}function se(t,e,i){const h=Array.isArray(t);let r,l=i&&i.defer;return f=>{let u;if(h){u=Array(t.length);for(let d=0;d<t.length;d++)u[d]=t[d]()}else u=t();if(l){l=!1;return}const b=Q(()=>e(u,r,f));return r=u,b}}function fe(t){ue(()=>Q(t))}function mt(t){return U===null||(U.cleanups===null?U.cleanups=[t]:U.cleanups.push(t)),t}function ae(){return U}function le(t,e){const i=U;U=t;try{return ot(e,!0)}finally{U=i}}function ce(t){const e=q,i=U;return Promise.resolve().then(()=>{q=e,U=i;let h;return ot(t,!1),q=U=null,h?h.done:void 0})}function qt(t,e){const i=Symbol("context");return{id:i,Provider:ge(i),defaultValue:t}}function Jt(t){let e;return(e=zt(U,t.id))!==void 0?e:t.defaultValue}function Wt(t){const e=H(t),i=H(()=>Tt(e()));return i.toArray=()=>{const h=i();return Array.isArray(h)?h:h!=null?[h]:[]},i}function Ft(){const t=it;if(this.sources&&(this.state||t))if(this.state===et||t)ht(this);else{const e=K;K=null,ot(()=>kt(this),!1),K=e}if(q){const e=this.observers?this.observers.length:0;q.sources?(q.sources.push(this),q.sourceSlots.push(e)):(q.sources=[this],q.sourceSlots=[e]),this.observers?(this.observers.push(q),this.observerSlots.push(q.sources.length-1)):(this.observers=[q],this.observerSlots=[q.sources.length-1])}return this.value}function Kt(t,e,i){let h=t.value;return(!t.comparator||!t.comparator(h,e))&&(t.value=e,t.observers&&t.observers.length&&ot(()=>{for(let r=0;r<t.observers.length;r+=1){const l=t.observers[r],f=it&&it.running;f&&it.disposed.has(l),(f&&!l.tState||!f&&!l.state)&&(l.pure?K.push(l):Y.push(l),l.observers&&Vt(l)),f||(l.state=et)}if(K.length>1e6)throw K=[],new Error},!1)),e}function ht(t){if(!t.fn)return;Ct(t);const e=U,i=q,h=Dt;q=U=t,he(t,t.value,h),q=i,U=e}function he(t,e,i){let h;try{h=t.fn(e)}catch(r){t.pure&&(t.state=et),Xt(r)}(!t.updatedAt||t.updatedAt<=i)&&(t.updatedAt!=null&&"observers"in t?Kt(t,h):t.value=h,t.updatedAt=i)}function Ot(t,e,i,h=et,r){const l={fn:t,state:h,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:U,context:null,pure:i};return U===null||U!==Ut&&(U.owned?U.owned.push(l):U.owned=[l]),l}function wt(t){const e=it;if(t.state===0||e)return;if(t.state===bt||e)return kt(t);if(t.suspense&&Q(t.suspense.inFallback))return t.suspense.effects.push(t);const i=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Dt);)(t.state||e)&&i.push(t);for(let h=i.length-1;h>=0;h--)if(t=i[h],t.state===et||e)ht(t);else if(t.state===bt||e){const r=K;K=null,ot(()=>kt(t,i[0]),!1),K=r}}function ot(t,e){if(K)return t();let i=!1;e||(K=[]),Y?i=!0:Y=[],Dt++;try{const h=t();return de(i),h}catch(h){K||(Y=null),Xt(h)}}function de(t){if(K&&(Ht(K),K=null),t)return;const e=Y;Y=null,e.length&&ot(()=>Lt(e),!1)}function Ht(t){for(let e=0;e<t.length;e++)wt(t[e])}function pe(t){let e,i=0;for(e=0;e<t.length;e++){const h=t[e];h.user?t[i++]=h:wt(h)}for(z.context&&re(),e=0;e<i;e++)wt(t[e])}function kt(t,e){const i=it;t.state=0;for(let h=0;h<t.sources.length;h+=1){const r=t.sources[h];r.sources&&(r.state===et||i?r!==e&&wt(r):(r.state===bt||i)&&kt(r,e))}}function Vt(t){const e=it;for(let i=0;i<t.observers.length;i+=1){const h=t.observers[i];(!h.state||e)&&(h.state=bt,h.pure?K.push(h):Y.push(h),h.observers&&Vt(h))}}function Ct(t){let e;if(t.sources)for(;t.sources.length;){const i=t.sources.pop(),h=t.sourceSlots.pop(),r=i.observers;if(r&&r.length){const l=r.pop(),f=i.observerSlots.pop();h<r.length&&(l.sourceSlots[f]=h,r[h]=l,i.observerSlots[h]=f)}}if(t.owned){for(e=0;e<t.owned.length;e++)Ct(t.owned[e]);t.owned=null}if(t.cleanups){for(e=0;e<t.cleanups.length;e++)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function ye(t){return t instanceof Error||typeof t=="string"?t:new Error("Unknown error")}function Xt(t){throw t=ye(t),t}function zt(t,e){return t?t.context&&t.context[e]!==void 0?t.context[e]:zt(t.owner,e):void 0}function Tt(t){if(typeof t=="function"&&!t.length)return Tt(t());if(Array.isArray(t)){const e=[];for(let i=0;i<t.length;i++){const h=Tt(t[i]);Array.isArray(h)?e.push.apply(e,h):e.push(h)}return e}return t}function ge(t,e){return function(h){let r;return ct(()=>r=Q(()=>(U.context={[t]:h.value},Wt(()=>h.children))),void 0),r}}const ve=Symbol("fallback");function Gt(t){for(let e=0;e<t.length;e++)t[e]()}function be(t,e,i={}){let h=[],r=[],l=[],f=0,u=e.length>1?[]:null;return mt(()=>Gt(l)),()=>{let b=t()||[],d,s;return b[oe],Q(()=>{let x=b.length,O,p,$,_,T,v,n,c,m;if(x===0)f!==0&&(Gt(l),l=[],h=[],r=[],f=0,u&&(u=[])),i.fallback&&(h=[ve],r[0]=gt(D=>(l[0]=D,i.fallback())),f=1);else if(f===0){for(r=new Array(x),s=0;s<x;s++)h[s]=b[s],r[s]=gt(y);f=x}else{for($=new Array(x),_=new Array(x),u&&(T=new Array(x)),v=0,n=Math.min(f,x);v<n&&h[v]===b[v];v++);for(n=f-1,c=x-1;n>=v&&c>=v&&h[n]===b[c];n--,c--)$[c]=r[n],_[c]=l[n],u&&(T[c]=u[n]);for(O=new Map,p=new Array(c+1),s=c;s>=v;s--)m=b[s],d=O.get(m),p[s]=d===void 0?-1:d,O.set(m,s);for(d=v;d<=n;d++)m=h[d],s=O.get(m),s!==void 0&&s!==-1?($[s]=r[d],_[s]=l[d],u&&(T[s]=u[d]),s=p[s],O.set(m,s)):l[d]();for(s=v;s<x;s++)s in $?(r[s]=$[s],l[s]=_[s],u&&(u[s]=T[s],u[s](s))):r[s]=gt(y);r=r.slice(0,f=x),h=b.slice(0)}return r});function y(x){if(l[s]=x,u){const[O,p]=Z(s);return u[s]=p,e(b[s],O)}return e(b[s])}}}function W(t,e){return Q(()=>t(e||{}))}function we(t){const e="fallback"in t&&{fallback:()=>t.fallback};return H(be(()=>t.each,t.children,e||void 0))}function Qt(t){let e=!1,i=!1;const h=Wt(()=>t.children),r=H(()=>{let l=h();Array.isArray(l)||(l=[l]);for(let f=0;f<l.length;f++){const u=l[f].when;if(u)return i=!!l[f].keyed,[f,u,l[f]]}return[-1]},void 0,{equals:(l,f)=>l[0]===f[0]&&(e?l[1]===f[1]:!l[1]==!f[1])&&l[2]===f[2]});return H(()=>{const[l,f,u]=r();if(l<0)return t.fallback;const b=u.children,d=typeof b=="function"&&b.length>0;return e=i||d,d?Q(()=>b(f)):b})}function lt(t){return t}function ke(t,e,i){let h=i.length,r=e.length,l=h,f=0,u=0,b=e[r-1].nextSibling,d=null;for(;f<r||u<l;){if(e[f]===i[u]){f++,u++;continue}for(;e[r-1]===i[l-1];)r--,l--;if(r===f){const s=l<h?u?i[u-1].nextSibling:i[l-u]:b;for(;u<l;)t.insertBefore(i[u++],s)}else if(l===u)for(;f<r;)(!d||!d.has(e[f]))&&e[f].remove(),f++;else if(e[f]===i[l-1]&&i[u]===e[r-1]){const s=e[--r].nextSibling;t.insertBefore(i[u++],e[f++].nextSibling),t.insertBefore(i[--l],s),e[r]=i[l]}else{if(!d){d=new Map;let y=u;for(;y<l;)d.set(i[y],y++)}const s=d.get(e[f]);if(s!=null)if(u<s&&s<l){let y=f,x=1,O;for(;++y<r&&y<l&&!((O=d.get(e[y]))==null||O!==s+x);)x++;if(x>s-u){const p=e[f];for(;u<s;)t.insertBefore(i[u++],p)}else t.replaceChild(i[u++],e[f++])}else f++;else e[f++].remove()}}}const It="_$DX_DELEGATE";function _e(t,e,i,h={}){let r;return gt(l=>{r=l,e===document?t():tt(e,t(),e.firstChild?null:void 0,i)},h.owner),()=>{r(),e.textContent=""}}function ut(t,e,i){const h=document.createElement("template");h.innerHTML=t;let r=h.content.firstChild;return i&&(r=r.firstChild),r}function xt(t,e=window.document){const i=e[It]||(e[It]=new Set);for(let h=0,r=t.length;h<r;h++){const l=t[h];i.has(l)||(i.add(l),e.addEventListener(l,me))}}function Rt(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}function Yt(t,e,i,h){if(h)Array.isArray(i)?(t[`$$${e}`]=i[0],t[`$$${e}Data`]=i[1]):t[`$$${e}`]=i;else if(Array.isArray(i)){const r=i[0];t.addEventListener(e,i[0]=l=>r.call(t,i[1],l))}else t.addEventListener(e,i)}function tt(t,e,i,h){if(i!==void 0&&!h&&(h=[]),typeof e!="function")return _t(t,e,h,i);ct(r=>_t(t,e(),r,i),h)}function me(t){const e=`$$${t.type}`;let i=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==i&&Object.defineProperty(t,"target",{configurable:!0,value:i}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return i||document}}),z.registry&&!z.done&&(z.done=!0,document.querySelectorAll("[id^=pl-]").forEach(h=>h.remove()));i!==null;){const h=i[e];if(h&&!i.disabled){const r=i[`${e}Data`];if(r!==void 0?h.call(i,r,t):h.call(i,t),t.cancelBubble)return}i=i.host&&i.host!==i&&i.host instanceof Node?i.host:i.parentNode}}function _t(t,e,i,h,r){for(z.context&&!i&&(i=[...t.childNodes]);typeof i=="function";)i=i();if(e===i)return i;const l=typeof e,f=h!==void 0;if(t=f&&i[0]&&i[0].parentNode||t,l==="string"||l==="number"){if(z.context)return i;if(l==="number"&&(e=e.toString()),f){let u=i[0];u&&u.nodeType===3?u.data=e:u=document.createTextNode(e),i=st(t,i,h,u)}else i!==""&&typeof i=="string"?i=t.firstChild.data=e:i=t.textContent=e}else if(e==null||l==="boolean"){if(z.context)return i;i=st(t,i,h)}else{if(l==="function")return ct(()=>{let u=e();for(;typeof u=="function";)u=u();i=_t(t,u,i,h)}),()=>i;if(Array.isArray(e)){const u=[],b=i&&Array.isArray(i);if(At(u,e,i,r))return ct(()=>i=_t(t,u,i,h,!0)),()=>i;if(z.context){if(!u.length)return i;for(let d=0;d<u.length;d++)if(u[d].parentNode)return i=u}if(u.length===0){if(i=st(t,i,h),f)return i}else b?i.length===0?Bt(t,u,h):ke(t,i,u):(i&&st(t),Bt(t,u));i=u}else if(e instanceof Node){if(z.context&&e.parentNode)return i=f?[e]:e;if(Array.isArray(i)){if(f)return i=st(t,i,h,e);st(t,i,null,e)}else i==null||i===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);i=e}}return i}function At(t,e,i,h){let r=!1;for(let l=0,f=e.length;l<f;l++){let u=e[l],b=i&&i[l];if(u instanceof Node)t.push(u);else if(!(u==null||u===!0||u===!1))if(Array.isArray(u))r=At(t,u,b)||r;else if(typeof u=="function")if(h){for(;typeof u=="function";)u=u();r=At(t,Array.isArray(u)?u:[u],Array.isArray(b)?b:[b])||r}else t.push(u),r=!0;else{const d=String(u);b&&b.nodeType===3&&b.data===d?t.push(b):t.push(document.createTextNode(d))}}return r}function Bt(t,e,i=null){for(let h=0,r=e.length;h<r;h++)t.insertBefore(e[h],i)}function st(t,e,i,h){if(i===void 0)return t.textContent="";const r=h||document.createTextNode("");if(e.length){let l=!1;for(let f=e.length-1;f>=0;f--){const u=e[f];if(r!==u){const b=u.parentNode===t;!l&&!f?b?t.replaceChild(r,u):t.insertBefore(r,i):b&&u.remove()}else l=!0}}else t.insertBefore(r,i);return[r]}var F=(t=>(t[t.None=0]="None",t[t.Cross=1]="Cross",t[t.Circle=2]="Circle",t[t.Draw=3]="Draw",t))(F||{});const xe=t=>{switch(t){case 2:return 1;case 1:return 2}return 0},$e=t=>{const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[6,4,2]];for(let h of e){const[r,l,f]=h;if(t[r]!==0&&t[r]===t[l]&&t[r]==t[f])return t[r]}let i=!0;for(let h of t)h===0&&(i=!1);return i?3:0},je="/tic-tac-toe-gunjs/assets/circle.2c56a12d.svg",Se="/tic-tac-toe-gunjs/assets/cross.f03db0bd.svg",Te=ut('<img alt="circle" class="animate-spawn">'),Ae=ut('<img alt="cross" class="animate-spawn">'),De=ut('<button class="btn hover-shadow border-8 field flex justify-center items-center m-auto"></button>'),Oe=t=>(()=>{const e=De.cloneNode(!0);return Yt(e,"click",t.onClick,!0),tt(e,W(Qt,{get fallback(){return[]},get children(){return[W(lt,{get when(){return t.state===F.Circle},get children(){const i=Te.cloneNode(!0);return Rt(i,"src",je),i}}),W(lt,{get when(){return t.state===F.Cross},get children(){const i=Ae.cloneNode(!0);return Rt(i,"src",Se),i}})]}})),e})();xt(["click"]);const Ce=ut('<div class="animate-fadein animation-delay-1000 absolute inset-0 flex justify-center items-center transition bg-black/50"><div class="animate-spawn animation-delay-2000 rounded border-green border-8 bg-lavender px-8 py-5"></div></div>'),Ne=t=>(()=>{const e=Ce.cloneNode(!0),i=e.firstChild;return tt(i,()=>t.children),e})(),Ee=ut('<div class="flex flex-col"><h3 class="m-3 text-4xl text-center"></h3><button class="py-2 px-3 rounded border-green border-2 hover-shadow bg-terra text-green m-auto cursor-pointer">Restart Game</button></div>'),$t=t=>W(Ne,{get children(){const e=Ee.cloneNode(!0),i=e.firstChild,h=i.nextSibling;return tt(i,()=>t.result),Yt(h,"click",t.restartGame,!0),e}});xt(["click"]);function Ge(t,e,i){return t.addEventListener(e,i),()=>t.removeEventListener(e,i)}function Ie([t,e],i,h){return[i?()=>i(t()):t,h?r=>e(h(r)):e]}function Re(t){try{return document.querySelector(t)}catch{return null}}function Be(t,e){const i=Re(`#${t}`);i?i.scrollIntoView():e&&window.scrollTo(0,0)}function Pe(t,e,i,h){let r=!1;const l=u=>typeof u=="string"?{value:u}:u,f=Ie(Z(l(t()),{equals:(u,b)=>u.value===b.value}),void 0,u=>(!r&&e(u),u));return i&&mt(i((u=t())=>{r=!0,f[1](l(u)),r=!1})),{signal:f,utils:h}}function Me(t){if(t){if(Array.isArray(t))return{signal:t}}else return{signal:Z({value:""})};return t}function Le(){return Pe(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:t,replace:e,scroll:i,state:h})=>{e?window.history.replaceState(h,"",t):window.history.pushState(h,"",t),Be(window.location.hash.slice(1),i)},t=>Ge(window,"popstate",()=>t()),{go:t=>window.history.go(t)})}const Ue=/^(?:[a-z0-9]+:)?\/\//i,qe=/^\/+|\/+$/g;function jt(t,e=!1){const i=t.replace(qe,"");return i?e||/^[?#]/.test(i)?i:"/"+i:""}function St(t,e,i){if(Ue.test(e))return;const h=jt(t),r=i&&jt(i);let l="";return!r||e.startsWith("/")?l=h:r.toLowerCase().indexOf(h.toLowerCase())!==0?l=h+r:l=r,(l||"/")+jt(e,!l)}function Je(t,e){if(t==null)throw new Error(e);return t}function We(t){const e={};return t.searchParams.forEach((i,h)=>{e[h]=i}),e}function ft(t,e){return decodeURIComponent(e?t.replace(/\+/g," "):t)}function Fe(t){const e=new Map,i=ae();return new Proxy({},{get(h,r){return e.has(r)||le(i,()=>e.set(r,H(()=>t()[r]))),e.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}const Ke=100,Zt=qt(),He=qt(),te=()=>Je(Jt(Zt),"Make sure your app is wrapped in a <Router />");let Pt;const Ve=()=>te().navigatorFactory(),Xe=()=>te().location;function ze(t,e){const i=new URL("http://sar"),h=H(b=>{const d=t();try{return new URL(d,i)}catch{return console.error(`Invalid path ${d}`),b}},i,{equals:(b,d)=>b.href===d.href}),r=H(()=>ft(h().pathname)),l=H(()=>ft(h().search,!0)),f=H(()=>ft(h().hash)),u=H(()=>"");return{get pathname(){return r()},get search(){return l()},get hash(){return f()},get state(){return e()},get key(){return u()},query:Fe(se(l,()=>We(h())))}}function Qe(t,e="",i,h){const{signal:[r,l],utils:f={}}=Me(t),u=f.parsePath||(S=>S),b=f.renderPath||(S=>S),d=St("",e),s=void 0;if(d===void 0)throw new Error(`${d} is not a valid base path`);d&&!r().value&&l({value:d,replace:!0,scroll:!1});const[y,x]=Z(!1),O=async S=>{x(!0);try{await ce(S)}finally{x(!1)}},[p,$]=Z(r().value),[_,T]=Z(r().state),v=ze(p,_),n=[],c={pattern:d,params:{},path:()=>d,outlet:()=>null,resolvePath(S){return St(d,S)}};if(i)try{Pt=c,c.data=i({data:void 0,params:{},location:v,navigate:D(c)})}finally{Pt=void 0}function m(S,N,E){Q(()=>{if(typeof N=="number"){N&&(f.go?f.go(N):console.warn("Router integration does not support relative routing"));return}const{replace:a,resolve:o,scroll:g,state:k}={replace:!1,resolve:!0,scroll:!0,...E},I=o?S.resolvePath(N):St("",N);if(I===void 0)throw new Error(`Path '${N}' is not a routable path`);if(n.length>=Ke)throw new Error("Too many redirects");const C=p();if(I!==C||k!==_()){const j=n.push({value:C,replace:a,scroll:g,state:_()});O(()=>{$(I),T(k)}).then(()=>{n.length===j&&w({value:I,state:k})})}})}function D(S){return S=S||Jt(He)||c,(N,E)=>m(S,N,E)}function w(S){const N=n[0];N&&((S.value!==N.value||S.state!==N.state)&&l({...S,replace:N.replace,scroll:N.scroll}),n.length=0)}ct(()=>{const{value:S,state:N}=r();Q(()=>{S!==p()&&O(()=>{$(S),T(N)})})});{let S=function(N){if(N.defaultPrevented||N.button!==0||N.metaKey||N.altKey||N.ctrlKey||N.shiftKey)return;const E=N.composedPath().find(j=>j instanceof Node&&j.nodeName.toUpperCase()==="A");if(!E||!E.hasAttribute("link"))return;const a=E.href;if(E.target||!a&&!E.hasAttribute("state"))return;const o=(E.getAttribute("rel")||"").split(/\s+/);if(E.hasAttribute("download")||o&&o.includes("external"))return;const g=new URL(a),k=ft(g.pathname);if(g.origin!==window.location.origin||d&&k&&!k.toLowerCase().startsWith(d.toLowerCase()))return;const I=u(k+ft(g.search,!0)+ft(g.hash)),C=E.getAttribute("state");N.preventDefault(),m(c,I,{resolve:!1,replace:E.hasAttribute("replace"),scroll:!E.hasAttribute("noscroll"),state:C&&JSON.parse(C)})};var A=S;xt(["click"]),document.addEventListener("click",S),mt(()=>document.removeEventListener("click",S))}return{base:c,out:s,location:v,isRouting:y,renderPath:b,parsePath:u,navigatorFactory:D}}const Ye=t=>{const{source:e,url:i,base:h,data:r,out:l}=t,f=e||Le(),u=Qe(f,h,r);return W(Zt.Provider,{value:u,get children(){return t.children}})};let yt;const Ze=new Uint8Array(16);function tn(){if(!yt&&(yt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!yt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yt(Ze)}const J=[];for(let t=0;t<256;++t)J.push((t+256).toString(16).slice(1));function en(t,e=0){return(J[t[e+0]]+J[t[e+1]]+J[t[e+2]]+J[t[e+3]]+"-"+J[t[e+4]]+J[t[e+5]]+"-"+J[t[e+6]]+J[t[e+7]]+"-"+J[t[e+8]]+J[t[e+9]]+"-"+J[t[e+10]]+J[t[e+11]]+J[t[e+12]]+J[t[e+13]]+J[t[e+14]]+J[t[e+15]]).toLowerCase()}const nn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Mt={randomUUID:nn};function rn(t,e,i){if(Mt.randomUUID&&!e&&!t)return Mt.randomUUID();t=t||{};const h=t.random||(t.rng||tn)();if(h[6]=h[6]&15|64,h[8]=h[8]&63|128,e){i=i||0;for(let r=0;r<16;++r)e[i+r]=h[r];return e}return en(h)}function on(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ee={exports:{}};function un(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ne={exports:{}};(function(t){(function(){function e(h,r){return r?un(h):h.slice?e[l(h)]:function(f,u){h(f={exports:{}}),e[l(u)]=f.exports};function l(f){return f.split("/").slice(-1).toString().replace(".js","")}}var i=t;e(function(h){String.random=function(l,f){var u="";for(l=l||24,f=f||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";l-- >0;)u+=f.charAt(Math.floor(Math.random()*f.length));return u},String.match=function(l,f){var u,b;return typeof l!="string"?!1:(typeof f=="string"&&(f={"=":f}),f=f||{},u=f["="]||f["*"]||f[">"]||f["<"],l===u?!0:b!==f["="]?!1:(u=f["*"]||f[">"],l.slice(0,(u||"").length)===u?!0:b!==f["*"]?!1:b!==f[">"]&&b!==f["<"]?l>=f[">"]&&l<=f["<"]:b!==f[">"]&&l>=f[">"]||b!==f["<"]&&l<=f["<"]))},String.hash=function(l,f){if(typeof l=="string"){if(f=f||0,!l.length)return f;for(var u=0,b=l.length,d;u<b;++u)d=l.charCodeAt(u),f=(f<<5)-f+d,f|=0;return f}};var r=Object.prototype.hasOwnProperty;Object.plain=function(l){return l?l instanceof Object&&l.constructor===Object||Object.prototype.toString.call(l).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(l,f){for(var u in l)if(r.call(l,u)&&(!f||f.indexOf(u)==-1))return!1;return!0},Object.keys=Object.keys||function(l){var f=[];for(var u in l)r.call(l,u)&&f.push(u);return f},function(){var l,f=setTimeout,u=0,b=0,d=typeof setImmediate!=""+l&&setImmediate||function(y,x){return typeof MessageChannel==""+l?f:((y=new MessageChannel).port1.onmessage=function(O){O.data==""&&x()},function(O){x=O,y.port2.postMessage("")})}(),s=f.check=f.check||typeof performance!=""+l&&performance||{now:function(){return+new Date}};f.hold=f.hold||9,f.poll=f.poll||function(y){if(f.hold>=s.now()-u&&b++<3333){y();return}d(function(){u=s.now(),y()},b=0)}}(),function(){var l=setTimeout,f=l.turn=l.turn||function(x){u.push(x)==1&&b(y)},u=f.s=[],b=l.poll,d=0,s,y=function(){(s=u[d++])&&s(),(d==u.length||d==99)&&(u=f.s=u.slice(d),d=0),u.length&&b(y)}}(),function(){var l,f=setTimeout,u=f.turn;(f.each=f.each||function(b,d,s,y){y=y||9,function x(O,p,$){if(p=(O=(b||[]).splice(0,y)).length){for(var _=0;_<p&&l===($=d(O[_]));_++);if(l===$){u(x);return}}s&&s($)}()})()}()})(e,"./shim"),e(function(h){h.exports=function r(s,f,u){if(!s)return{to:r};var b,d=typeof f=="function",s=(this.tag||(this.tag={}))[s]||d&&(this.tag[s]={tag:s,to:r._={next:function(x){var O;(O=this.to)&&O.next(x)}}});if(d){var y={off:r.off||(r.off=function(){if(this.next===r._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=r._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:r._,next:f,the:s,on:this,as:u};return(y.back=s.last||s).to=y,s.last=y}return(s=s.to)&&b!==f&&s.next(f),s}})(e,"./onto"),e(function(h){h.exports=function(r){return r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"&&r!=1/0&&r!=-1/0&&r===r||!!r&&typeof r["#"]=="string"&&Object.keys(r).length===1&&r["#"]}})(e,"./valid"),e(function(h){e("./shim");function r(){var s=+new Date;return b<s?(f=0,b=s+r.drift):b=s+(f+=1)/u+r.drift}r.drift=0;var l=-1/0,f=0,u=999,b=l,d;r.is=function(s,y,x){var O=y&&s&&s._&&s._[">"]||x;if(!!O)return typeof(O=O[y])=="number"?O:l},r.ify=function(s,y,x,O,p){(s=s||{})._=s._||{},p&&(s._["#"]=p);var $=s._[">"]||(s._[">"]={});return d!==y&&y!=="_"&&(typeof x=="number"&&($[y]=x),d!==O&&(s[y]=O)),s},h.exports=r})(e,"./state"),e(function(h){e("./shim");function r(l){var f={s:{}},u=f.s;l=l||{max:999,age:1e3*9},f.check=function(d){return u[d]?b(d):!1};var b=f.track=function(d){var s=u[d]||(u[d]={});return s.was=f.now=+new Date,f.to||(f.to=setTimeout(f.drop,l.age+9)),s};return f.drop=function(d){f.to=null,f.now=+new Date;var s=Object.keys(u);console.STAT&&console.STAT(f.now,+new Date-f.now,"dup drop keys"),setTimeout.each(s,function(y){var x=u[y];x&&(d||l.age)>f.now-x.was||delete u[y]},0,99)},f}h.exports=r})(e,"./dup"),e(function(h){e("./onto"),h.exports=function(f,u){if(!!this.on){var b=(this.opt||{}).lack||9e3;if(typeof f!="function"){if(!f)return;var s=f["#"]||f,d=(this.tag||"")[s];return d?(u&&(d=this.on(s,u),clearTimeout(d.err),d.err=setTimeout(function(){d.off()},b)),!0):void 0}var s=u&&u["#"]||r(9);if(!f)return s;var y=this.on(s,f,u);return y.err=y.err||setTimeout(function(){y.off(),y.next({err:"Error: No ACK yet.",lack:!0})},b),s}};var r=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(h){function r(p){return p instanceof r?(this._={$:this}).$:this instanceof r?r.create(this._={$:this,opt:p}):new r(p)}r.is=function(p){return p instanceof r||p&&p._&&p===p._.$||!1},r.version=.202,r.chain=r.prototype,r.chain.toJSON=function(){},e("./shim"),r.valid=e("./valid"),r.state=e("./state"),r.on=e("./onto"),r.dup=e("./dup"),r.ask=e("./ask"),function(){r.create=function(o){o.root=o.root||o,o.graph=o.graph||{},o.on=o.on||r.on,o.ask=o.ask||r.ask,o.dup=o.dup||r.dup();var g=o.$.opt(o.opt);return o.once||(o.on("in",p,o),o.on("out",p,o),o.on("put",T,o),r.on("create",o),o.on("create",o)),o.once=1,g};function p(o){if(!!o){if(o.out===p){this.to.next(o);return}var g=this,k=g.as,I=k.at||k,C=I.$,j=I.dup,G,R=o.DBG;if((G=o["#"])||(G=o["#"]=f(9)),!j.check(G)){if(j.track(G),G=o._,o._=typeof G=="function"?G:function(){},o.$&&o.$===(o.$._||"").$||(o.$=C),o["@"]&&!o.put&&n(o),!I.ask(o["@"],o))if(R&&(R.u=+new Date),o.put){$(o);return}else o.get&&r.on.get(o,C);R&&(R.uc=+new Date),g.to.next(o),R&&(R.ua=+new Date),!(o.nts||o.NTS)&&(o.out=p,I.on("out",o),R&&(R.ue=+new Date))}}}function $(o){if(!!o){var g=o._||"",k=g.root=((g.$=o.$||"")._||"").root;if(o["@"]&&g.faith&&!g.miss){o.out=p,k.on("out",o);return}g.latch=k.hatch,g.match=k.hatch=[];var I=o.put,C=g.DBG=o.DBG,j=+new Date;if(E=E||j,!(I["#"]&&I["."])){C&&(C.p=j),g["#"]=o["#"],g.msg=o,g.all=0,g.stun=1;var G=Object.keys(I);console.STAT&&console.STAT(j,((C||g).pk=+new Date)-j,"put sort");var R=0,B,P,M,L,X,V,at;(function nt(dt){if(B!=R){if(B=R,!(M=G[R])){console.STAT&&console.STAT(j,((C||g).pd=+new Date)-j,"put"),v(g);return}(L=I[M])?(at=L._)?M!==at["#"]?V=m+D(M)+"soul not same.":(X=at[">"])||(V=m+D(M)+"no state."):V=m+D(M)+"no meta.":V=m+D(M)+"no node.",P=Object.keys(L||{})}if(V){o.err=g.err=V,v(g);return}var Nt=0,rt;for(dt=dt||0;dt++<9&&(rt=P[Nt++]);)if(rt!=="_"){var pt=L[rt],Et=X[rt];if(y===Et){V=m+D(rt)+"on"+D(M)+"no state.";break}if(!b(pt)){V=m+D(rt)+"on"+D(M)+"bad "+typeof pt+D(pt);break}_(pt,rt,M,Et,o),++N}if((P=P.slice(Nt)).length){u(nt);return}++R,P=null,nt(dt)})()}}}r.on.put=$;function _(o,g,k,I,C){var j=C._||"",G=j.root,R=G.graph,B,P=R[k]||x,M=d(P,g,1),L=P[g],X=j.DBG;(B=console.STAT)&&(!R[k]||!L)&&(B.has=(B.has||0)+1);var V=S();if(I>V){setTimeout(function(){_(o,g,k,I,C)},(B=I-V)>A?A:B),console.STAT&&console.STAT((X||j).Hf=+new Date,B,"future");return}if(!(I<M)&&!(!j.faith&&I===M&&(o===L||w(o)<=w(L))&&!j.miss)){j.stun++;var at=C["#"]+j.all++,nt={toString:function(){return at},_:j};nt.toJSON=nt.toString,G.dup.track(nt)["#"]=C["#"],X&&(X.ph=X.ph||+new Date),G.on("put",{"#":nt,"@":C["@"],put:{"#":k,".":g,":":o,">":I},ok:C.ok,_:j})}}function T(o){var g;(g=(o._||"").DBG)&&(g.pa=+new Date,g.pm=g.pm||+new Date);var k=this,I=k.as,C=I.graph,j=o._,G=o.put,R=G["#"],B=G["."],P=G[":"],M=G[">"];o["#"];var L;(L=j.msg)&&(L=L.put)&&(L=L[R])&&s(L,B,M,P,R),C[R]=s(C[R],B,M,P,R),(L=(I.next||"")[R])&&L.on("in",o),v(j),k.to.next(o)}function v(o,g){var k;if(!o.stop&&!(!o.err&&0<--o.stun)&&(o.stop=1,!!(k=o.root))){var I=o.match;I.end=1,I===k.hatch&&(!(I=o.latch)||I.end?delete k.hatch:k.hatch=I),o.hatch&&o.hatch(),setTimeout.each(o.match,function(C){C&&C()}),!(!(g=o.msg)||o.err||g.err)&&(g.out=p,o.root.on("out",g),a())}}function n(o){var g=o["@"]||"",k;if(!(k=g._)){var I=(I=o.$)&&(I=I._)&&(I=I.root)&&(I=I.dup);if(!(I=I.check(g)))return;o["@"]=I["#"]||o["@"];return}k.acks=(k.acks||0)+1,(k.err=o.err)&&(o["@"]=k["#"],v(k)),k.ok=o.ok||k.ok,!k.stop&&!k.crack&&(k.crack=k.match&&k.match.push(function(){c(k)})),c(k)}function c(o){!o||!o.root||o.stun||o.acks!==o.all||o.root.on("in",{"@":o["#"],err:o.err,ok:o.err?y:o.ok||{"":1}})}var m="Error: Invalid graph!",D=function(o){return" '"+(""+o).slice(0,9)+"...' "},w=JSON.stringify,A=2147483647,S=r.state,N=0,E,a=function(){N>999&&N/-(E-(E=+new Date))>1&&(r.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),a=function(){N=0})}}(),function(){r.on.get=function($,_){var T=_._,v=$.get,n=v["#"],c=T.graph[n],m=v["."],D=T.next||(T.next={});D[n];var w=$._||{},A=w.DBG=$.DBG;if(A&&(A.g=+new Date),!c)return T.on("get",$);if(m){if(typeof m!="string"||y===c[m])return T.on("get",$);c=s({},m,d(c,m),c[m],n)}c&&p($,c),T.on("get",$)};function p($,_){var T=+new Date,v=$._||{},n=v.DBG=$.DBG,c=$["#"],m=f(9),D=Object.keys(_||"").sort(),w=((_||"")._||"")["#"];D.length;var A=$.$._.root,S=_===A.graph[w];console.STAT&&console.STAT(T,((n||v).gk=+new Date)-T,"got keys"),_&&function N(){T=+new Date;for(var E=0,a,o={},g;E<9&&(a=D[E++]);)s(o,a,d(_,a),_[a],w);D=D.slice(E),(g={})[w]=o,o=g;var k;S&&(k=function(){},k.ram=k.faith=!0),g=D.length,console.STAT&&console.STAT(T,-(T-(T=+new Date)),"got copied some"),n&&(n.ga=+new Date),A.on("in",{"@":c,"#":m,put:o,"%":g?m=f(9):y,$:A.$,_:k,DBG:n}),console.STAT&&console.STAT(T,+new Date-T,"got in"),g&&setTimeout.turn(N)}(),_||A.on("in",{"@":$["#"]})}r.on.get.ack=p}(),function(){r.chain.opt=function(p){p=p||{};var $=this,_=$._,T=p.peers||p;return Object.plain(p)||(p={}),Object.plain(_.opt)||(_.opt=p),typeof T=="string"&&(T=[T]),Object.plain(_.opt.peers)||(_.opt.peers={}),T instanceof Array&&(p.peers={},T.forEach(function(v){var n={};n.id=n.url=v,p.peers[v]=_.opt.peers[v]=_.opt.peers[v]||n})),l(p,function v(n){var c=this[n];if(this&&this.hasOwnProperty(n)||typeof c=="string"||Object.empty(c)){this[n]=c;return}c&&c.constructor!==Object&&!(c instanceof Array)||l(c,v)}),_.opt.from=p,r.on("opt",_),_.opt.uuid=_.opt.uuid||function(n){return r.state().toString(36).replace(".","")+String.random(n||12)},$}}();var l=function(p,$){Object.keys(p).forEach($,p)},f=String.random,u=setTimeout.turn,b=r.valid,d=r.state.is,s=r.state.ify,y,x={},O;r.log=function(){return!r.log.off&&O.log.apply(O,arguments),[].slice.call(arguments).join(" ")},r.log.once=function(p,$,_){return(_=r.log.once)[p]=_[p]||0,_[p]++||r.log($)},typeof window<"u"&&((window.GUN=window.Gun=r).window=window);try{typeof i<"u"&&(i.exports=r)}catch{}h.exports=r,(r.window||{}).console=(r.window||{}).console||{log:function(){}},(O=console).only=function(p,$){return O.only.i&&p===O.only.i&&O.only.i++&&(O.log.apply(O,arguments)||$)},r.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(h){var r=e("./root");r.chain.back=function(u,b){var d;if(u=u||1,u===-1||u===1/0)return this._.root.$;if(u===1)return(this._.back||this._).$;var s=this,y=s._;if(typeof u=="string"&&(u=u.split(".")),u instanceof Array){var x=0,O=u.length,d=y;for(x;x<O;x++)d=(d||l)[u[x]];return f!==d?b?s:d:(d=y.back)?d.$.back(u,b):void 0}if(typeof u=="function"){for(var p,d={back:y};(d=d.back)&&f===(p=u(d,b)););return p}return typeof u=="number"?(y.back||y).$.back(u-1):this};var l={},f})(e,"./back"),e(function(h){var r=e("./root");r.chain.chain=function(v){var n=this,c=n._,m=new(v||n).constructor(n),D=m._,w;return D.root=w=c.root,D.id=++w.once,D.back=n._,D.on=r.on,D.on("in",r.on.in,D),D.on("out",r.on.out,D),m};function l(v){var n,c=this.as,m=c.back,D=c.root,w;if(v.$||(v.$=c.$),this.to.next(v),c.err){c.on("in",{put:c.put=y,$:c.$});return}if(n=v.get){if(D.pass&&(D.pass[c.id]=c),c.lex&&Object.keys(c.lex).forEach(function(A){w[A]=c.lex[A]},w=v.get=v.get||{}),n["#"]||c.soul){if(n["#"]=n["#"]||c.soul,v["#"]||(v["#"]=x(9)),m=D.$.get(n["#"])._,n=n["."]){if(p(m.put,n)&&(w=m.ask&&m.ask[n],(m.ask||(m.ask={}))[n]=m.$.get(n)._,m.on("in",{get:n,put:{"#":m.soul,".":n,":":m.put[n],">":_(D.graph[m.soul],n)}}),w))return}else{if(w=m.ask&&m.ask[""],(m.ask||(m.ask={}))[""]=m,y!==m.put&&(m.on("in",m),w))return;v.$=m.$}return D.ask(d,v),D.on("in",v)}if(n["."])return c.get?(v={get:{".":c.get},$:c.$},(m.ask||(m.ask={}))[c.get]=v.$._,m.on("out",v)):(v={get:c.lex?v.get:{},$:c.$},m.on("out",v));if((c.ask||(c.ask={}))[""]=c,c.get)return n["."]=c.get,(m.ask||(m.ask={}))[c.get]=v.$._,m.on("out",v)}return m.on("out",v)}r.on.out=l;function f(v,n){n=n||this.as;var c=n.root,m=v.$||(v.$=n.$),D=(m||"")._||s,w=v.put||"",A=w["#"],S=w["."],N=y!==w["="]?w["="]:w[":"],E=w[">"]||-1/0,a;if(y!==v.put&&(y===w["#"]||y===w["."]||y===w[":"]&&y===w["="]||y===w[">"])){if(!O(w)){if(!(A=((w||"")._||"")["#"])){console.log("chain not yet supported for",w,"...",v,n);return}return m=n.root.$.get(A),setTimeout.each(Object.keys(w).sort(),function(o){o=="_"||y===(E=_(w,o))||n.on("in",{$:m,put:{"#":A,".":o,"=":w[o],">":E},VIA:v})})}n.on("in",{$:D.back.$,put:{"#":A=D.back.soul,".":S=D.has||D.get,"=":w,">":_(D.back.put,S)},via:v});return}(v.seen||"")[n.id]||((v.seen||(v.seen=function(){}))[n.id]=n,n!==D&&(Object.keys(v).forEach(function(o){w[o]=v[o]},w={}),w.get=n.get||w.get,!n.soul&&!n.has?w.$$$=w.$$$||n.$:D.soul&&(w.$=n.$,w.$$=w.$$||D.$),v=w),b(v,n),(n.soul||v.$$)&&E>=_(c.graph[A],S)&&((w=c.$.get(A)._).put=T(w.put,S,E,N,A)),!D.soul&&E>=_(c.graph[A],S)&&(a=(c.$.get(A)._.next||"")[S])&&(a.put=N,typeof(w=O(N))=="string"&&(a.put=c.$.get(w)._.put||N)),this.to&&this.to.next(v),n.any&&setTimeout.each(Object.keys(n.any),function(o){(o=n.any[o])&&o(v)},0,99),n.echo&&setTimeout.each(Object.keys(n.echo),function(o){(o=n.echo[o])&&o.on("in",v)},0,99),((v.$$||"")._||D).soul&&(a=n.next)&&(a=a[S])&&(w={},Object.keys(v).forEach(function(o){w[o]=v[o]}),w.$=(v.$$||v.$).get(w.get=S),delete w.$$,delete w.$$$,a.on("in",w)),u(v,n))}r.on.in=f;function u(v,n){if(n=n||this.as||v.$._,!(v.$$&&this!==r.on)&&!(!v.put||n.soul)){var c=v.put||"",m=c["="]||c[":"],S,D=n.root,w=D.$.get(c["#"]).get(c["."])._;if(typeof(m=O(m))!="string"){this===r.on&&((w.echo||(w.echo={}))[n.id]=n);return}if(!((w.echo||(w.echo={}))[n.id]&&!(D.pass||"")[n.id])){if(S=D.pass){if(S[m+n.id])return;S[m+n.id]=1}(w.echo||(w.echo={}))[n.id]=n,n.has&&(n.link=m);var A=D.$.get(w.link=m)._;(A.echo||(A.echo={}))[w.id]=w;var S=n.ask||"";(S[""]||n.lex)&&A.on("out",{get:{"#":m}}),setTimeout.each(Object.keys(S),function(N,E){!N||!(E=S[N])||E.on("out",{get:{"#":m,".":N}})},0,99)}}}r.on.link=u;function b(v,n){var c=v.put||"",m=y!==c["="]?c["="]:c[":"],D=n.root,w,A;if(y===m){if(n.soul&&y!==n.put||(A=(v.$$||v.$||"")._||"",v["@"]&&(y!==A.put||y!==n.put)))return;(w=n.link||v.linked)&&delete(D.$.get(w)._.echo||"")[n.id],n.has&&(n.link=null),n.put=y,setTimeout.each(Object.keys(n.next||""),function(S,N){!(N=n.next[S])||(w&&delete(D.$.get(w).get(S)._.echo||"")[N.id],N.on("in",{get:S,put:y,$:N.$}))},0,99);return}n.soul||v.$$||(w=O(m),A=v.$._||"",!((w===A.link||n.has&&!A.link)&&!((D.pass||"")[n.id]&&typeof w!="string"))&&(delete(A.echo||"")[n.id],b({get:n.get,put:y,$:v.$,linked:v.linked=v.linked||A.link},n)))}r.on.unlink=b;function d(v,n){var c=this.as,m=c.$._;m.root;var D=c.get||"",w=(v.put||"")[D["#"]]||"";if(!v.put||typeof D["."]=="string"&&y===w[D["."]]){if(y!==m.put||!m.soul&&!m.has)return;m.ack=(m.ack||0)+1,m.on("in",{get:m.get,put:m.put=y,$:m.$,"@":v["@"]});return}(v._||{}).miss=1,r.on.put(v)}var s={},y,x=String.random,O=r.valid,p=function(v,n){return v&&Object.prototype.hasOwnProperty.call(v,n)},$=r.state,_=$.is,T=$.ify})(e,"./chain"),e(function(h){var r=e("./root");r.chain.get=function(y,x,O){var p,$;if(typeof y=="string"){if(y.length==0)return(p=this.chain())._.err={err:r.log("0 length key!",y)},x&&x.call(p,p._.err),p;var _=this,T=_._,v=T.next||b;(p=v[y])||(p=y&&l(y,_)),p=p&&p.$}else if(typeof y=="function"){let S=function(N,E,a){if(!S.stun&&!((j=c.pass)&&!j[m])){var o=N.$._,g=(N.$$||"")._,k=(g||o).put,I=!o.has&&!o.soul,C={},j;if((I||s===k)&&(k=s===((j=N.put)||"")["="]?s===(j||"")[":"]?j:j[":"]:j["="]),typeof(j=r.valid(k))=="string"&&(k=s===(j=c.$.get(j)._.put)?n.not?s:k:j),!(n.not&&s===k)){if(s===n.stun){if((j=c.stun)&&j.on&&(T.$.back(function(G){if(j.on(""+G.id,C={}),(C.run||0)<S.id)return C}),!C.run&&j.on(""+o.id,C={}),!C.run&&g&&j.on(""+g.id,C={}),S.id>C.run&&((!C.stun||C.stun.end)&&(C.stun=j.on("stun"),C.stun=C.stun&&C.stun.last),C.stun&&!C.stun.end))){(C.stun.add||(C.stun.add={}))[m]=function(){S(N,E,1)};return}if(s===k&&(a=0),(j=c.hatch)&&!j.end&&s===n.hatch&&!a){if(D[o.$._.id])return;D[o.$._.id]=1,j.push(function(){S(N,E,1)});return}D={}}if(c.pass){if(c.pass[m+o.id])return;c.pass[m+o.id]=1}if(n.on){n.ok.call(o.$,k,o.get,N,E||S);return}if(n.v2020){n.ok(N,E||S);return}Object.keys(N).forEach(function(G){j[G]=N[G]},j={}),N=j,N.put=k,n.ok.call(n.as,N,E||S)}}};var w=S;if(x===!0)return f(this,y,x,O),this;p=this;var T=p._,n=x||{},c=T.root,m;n.at=T,n.ok=y;var D={};return S.at=T,(T.any||(T.any={}))[m=String.random(7)]=S,S.off=function(){S.stun=1,T.any&&delete T.any[m]},S.rid=u,S.id=n.run||++c.once,$=c.pass,(c.pass={})[m]=1,n.out=n.out||{get:{}},T.on("out",n.out),c.pass=$,p}else{if(typeof y=="number")return this.get(""+y,x,O);if(typeof($=d(y))=="string")return this.get($,x,O);($=this.get.next)&&(p=$(this,y))}return p?(x&&typeof x=="function"&&p.get(x,O),p):((p=this.chain())._.err={err:r.log("Invalid get request!",y)},x&&x.call(p,p._.err),p)};function l(y,x){var O=x._,p=O.next,$=x.chain(),_=$._;return p||(p=O.next={}),p[_.get=y]=_,x===O.root.$?_.soul=y:(O.soul||O.has)&&(_.has=y),_}function f(y,x,O,p){var $=y._,_=0,T;return(T=$.soul||$.link)?x(T,p,$):$.jam?$.jam.push([x,p]):($.jam=[[x,p]],y.get(function(n,c){if(!(s===n.put&&!$.root.opt.super&&(T=Object.keys($.root.opt.peers).length)&&++_<=T)){c.rid(n);var m=(m=n.$)&&m._||{},D=0,w;for(T=$.jam,delete $.jam;w=T[D++];){var A=w[0];w=w[1],A&&A(m.link||m.soul||r.valid(n.put)||((n.put||{})._||{})["#"],w,n,c)}}},{out:{get:{".":!0}}}),y)}function u(y){var x=this.at||this.on;if(!y||x.soul||x.has)return this.off();if(!!(y=(y=(y=y.$||y)._||y).id)){x.map;var O;if((O=this.seen||(this.seen={}))[y])return!0;O[y]=!0}}var b={},d=r.valid,s})(e,"./get"),e(function(h){var r=e("./root");r.chain.put=function(p,$,_){var T=this,v=T._,n=v.root;_=_||{},_.root=v.root,_.run||(_.run=n.once),l(_,v.id),_.ack=_.ack||$,_.via=_.via||T,_.data=_.data||p,_.soul||(_.soul=v.soul||typeof $=="string"&&$);var c=_.state=_.state||r.state();return typeof p=="function"?(p(function(m){_.data=m,T.put(d,d,_)}),T):_.soul?(_.$=n.$.get(_.soul),_.todo=[{it:_.data,ref:_.$}],_.turn=_.turn||y,_.ran=_.ran||f,function m(){var D=_.todo,w=D.pop(),A=w.it;w.ref&&w.ref._.id;var S,N,E,a,o;if(l(_,w.ref),(a=w.todo)&&(N=a.pop(),A=A[N],a.length&&D.push(w)),N&&(D.path||(D.path=[])).push(N),!(S=x(A))&&!(o=r.is(A))){if(!Object.plain(A)){f.err(_,"Invalid data: "+b(A)+" at "+(_.via.back(function(j){j.get&&a.push(j.get)},a=[])||a.join("."))+"."+(D.path||[]).join("."));return}for(var g=_.seen||(_.seen=[]),k=g.length;k--;)if(A===(a=g[k]).it){S=A=a.link;break}}if(N&&S)w.node=O(w.node,N,c,A);else{let j=function(G,R){var B=E.link["#"];R&&(R.off(),R.rid(G));var P=B||G.soul||(a=(G.$$||G.$)._||"").soul||a.link||((a=a.put||"")._||"")["#"]||a["#"]||((a=G.put||"")&&G.$$?a["#"]:(a["="]||a[":"]||"")["#"]);if(!B&&l(_,G.$),!P&&!w.link["#"]){(w.wait||(w.wait=[])).push(function(){j(G,R)});return}P||(P=[],(G.$$||G.$).back(function(M){if(a=M.soul||M.link)return P.push(a);P.push(M.get)}),P=P.reverse().join("/")),E.link["#"]=P,!o&&(((_.graph||(_.graph={}))[P]=E.node||(E.node={_:{}}))._["#"]=P),delete _.wait[I],E.wait&&setTimeout.each(E.wait,function(M){M&&M()}),_.ran(_)};var C=j;if(!_.seen){f.err(_,"Data at root of graph must be a node (an object).");return}_.seen.push(E={it:A,link:{},todo:o?[]:Object.keys(A).sort().reverse(),path:(D.path||[]).slice(),up:w}),w.node=O(w.node,N,c,E.link),!o&&E.todo.length&&D.push(E);var I=_.seen.length;(_.wait||(_.wait={}))[I]="",a=(E.ref=o?A:N?w.ref.get(N):w.ref)._,(a=A&&(A._||"")["#"]||a.soul||a.link)?j({soul:a}):E.ref.get(j,{run:_.run,v2020:1,out:{get:{".":" "}}})}if(!D.length)return _.ran(_);_.turn(m)}(),T):(u(_),T)};function l(p,$){if(!!$){$=($._||"").id||$;var _=p.root.stun||(p.root.stun={on:r.on}),T={},v;p.stun||(p.stun=_.on("stun",function(){})),(v=_.on(""+$))&&v.the.last.next(T),!(T.run>=p.run)&&_.on(""+$,function(n){if(p.stun.end){this.off(),this.to.next(n);return}n.run=n.run||p.run,n.stun=n.stun||p.stun})}}function f(p){if(p.err){f.end(p.stun,p.root);return}if(!(p.todo.length||p.end||!Object.empty(p.wait))){p.end=1;var $=p.$.back(-1)._,_=$.root,T=$.ask(function(m){_.on("ack",m),m.err&&!m.lack&&r.log(m),++v>(p.acks||0)&&this.off(),p.ack&&p.ack(m,this)},p.opt),v=0,n=p.stun,c;(c=function(){!n||(f.end(n,_),setTimeout.each(Object.keys(n=n.add||""),function(m){(m=n[m])&&m()}))}).hatch=c,p.ack&&!p.ok&&(p.ok=p.acks||9),p.via._.on("out",{put:p.out=p.graph,ok:p.ok&&{"@":p.ok+1},opt:p.opt,"#":T,_:c})}}f.end=function(p,$){p.end=s,p.the.to===p&&p===p.the.last&&delete $.stun,p.off()},f.err=function(p,$){(p.ack||s).call(p,p.out={err:p.err=r.log($)}),p.ran(p)};function u(p){var $=p.via._,_;p.via=p.via.back(function(T){if(T.soul||!T.get)return T.$;_=p.data,(p.data={})[T.get]=_}),(!p.via||!p.via._.soul)&&(p.via=$.root.$.get(((p.data||"")._||"")["#"]||$.$.back("opt.uuid")())),p.via.put(p.data,p.ack,p)}function b(p,$){return p&&($=p.constructor)&&$.name||typeof p}var d,s=function(){},y=setTimeout.turn,x=r.valid,O=r.state.ify})(e,"./put"),e(function(h){var r=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),h.exports=r})(e,"./index"),e(function(h){var r=e("./index");r.chain.on=function(u,b,d,s){var y=this,x=y._;x.root;var O;if(typeof u=="string")return b?(O=x.on(u,b,d||x,s),d&&d.$&&(d.subs||(d.subs=[])).push(O),y):x.on(u);var p=b;return(p=p===!0?{change:!0}:p||{}).not=1,p.on=1,y.get(u,p),y},r.chain.once=function(u,b){if(b=b||{},!u)return l(this);var d=this,s=d._,y=s.root;s.put;var x=String.random(7),O;return d.get(function(p,$,_,T){var v=this,n=v._,c=n.one||(n.one={});if(T.stun||c[x]==="")return;if((O=r.valid(p))===!0){m();return}if(typeof O=="string")return;clearTimeout((s.one||"")[x]),clearTimeout(c[x]),c[x]=setTimeout(m,b.wait||99);function m(D){if(!n.has&&!n.soul&&(n={put:p,get:$}),f===(O=n.put)&&(O=((_.$$||"")._||"").put),typeof r.valid(O)=="string"&&(O=y.$.get(O)._.put,O===f&&!D)){c[x]=setTimeout(function(){m(1)},b.wait||99);return}T.stun||c[x]!==""&&(c[x]="",(s.soul||s.has)&&T.off(),u.call(v,O,n.get),clearTimeout(c[x]))}},{on:1}),d};function l(u,b,d){return r.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(d=u.chain())._.nix=u.once(function(s,y){d._.on("in",this._)}),d._.lex=u._.lex,d}r.chain.off=function(){var u=this,b=u._,d,s=b.back;if(!!s)return b.ack=0,(d=s.next)&&d[b.get]&&delete d[b.get],(d=s.ask)&&delete d[b.get],(d=s.put)&&delete d[b.get],(d=b.soul)&&delete s.root.graph[d],(d=b.map)&&Object.keys(d).forEach(function(y,x){x=d[y],x.link&&s.root.$.get(x.link).off()}),(d=b.next)&&Object.keys(d).forEach(function(y,x){x=d[y],x.$.off()}),b.on("off",{}),u};var f})(e,"./on"),e(function(h){var r=e("./index"),l=r.chain.get.next;r.chain.get.next=function(d,s){var y;return Object.plain(s)?(y=((y=s["#"])||"")["="]||y)?d.get(y):((y=d.chain()._).lex=s,d.on("in",function(x){String.match(x.get||(x.put||"")["."],s["."]||s["#"]||s)&&y.on("in",x),this.to.next(x)}),y.$):(l||u)(d,s)},r.chain.map=function(d,s,y){var x=this,O=x._,p,$;return Object.plain(d)&&(p=d["."]?d:{".":d},d=b),d?(r.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),$=x.chain(),x.map().on(function(_,T,v,n){var c=(d||u).call(this,_,T,v,n);if(b!==c){if(_===c)return $._.on("in",v);if(r.is(c))return $._.on("in",c._);var m={};Object.keys(v.put).forEach(function(D){m[D]=v.put[D]},m),m["="]=c,$._.on("in",{get:T,put:m})}}),$):(($=O.each)||((O.each=$=x.chain())._.lex=p||$._.lex||O.lex,$._.nix=x.back("nix"),x.on("in",f,$._)),$)};function f(d){this.to.next(d);var s=this.as,y=d.$,x=y._,O=d.put,p;!x.soul&&!d.$$||(p=s.lex)&&!String.match(d.get||(O||"")["."],p["."]||p["#"]||p)||r.on.link(d,s)}var u=function(){},b})(e,"./map"),e(function(h){var r=e("./index");r.chain.set=function(l,f,u){var b=this,d=b.back(-1),s,y;return f=f||function(){},u=u||{},u.item=u.item||l,(s=((l||"")._||"")["#"])&&((l={})["#"]=s),typeof(y=r.valid(l))=="string"?b.get(s=y).put(l,f,u):r.is(l)?(b.put(function(x){l.get(function(O,p,$){if(!O)return f.call(b,{err:r.log('Only a node can be linked! Not "'+$.put+'"!')});(y={})[O]={"#":O},x(y)},!0)}),l):(Object.plain(l)&&(l=d.get(s=b.back("opt.uuid")()).put(l)),b.get(s||d.back("opt.uuid")(7)).put(l,f,u))}})(e,"./set"),e(function(h){e("./shim");var r=function(){},l=JSON.parseAsync||function(d,s,y){var x,O=+new Date;try{s(x,JSON.parse(d,y),f.sucks(+new Date-O))}catch(p){s(p)}},f=JSON.stringifyAsync||function(d,s,y,x){var O,p=+new Date;try{s(O,JSON.stringify(d,y,x),f.sucks(+new Date-p))}catch($){s($)}};f.sucks=function(d){d>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),f.sucks=r)};function u(d){var s=function(){},y=d.opt||{};y.log=y.log||console.log,y.gap=y.gap||y.wait||0,y.max=y.max||(y.memory?y.memory*999*999:3e8)*.3,y.pack=y.pack||y.max*.01*.01,y.puff=y.puff||9;var x=setTimeout.turn||setTimeout,O=d.dup,p=O.check,$=O.track,_=s.hear=function(n,c){if(!!n){if(y.max<=n.length)return s.say({dam:"!",err:"Message too big!"},c);s===this&&(_.d+=n.length||0,++_.c);var m=c.SH=+new Date,D=n[0],w;if(D==="["){l(n,function(A,S){if(A||!S)return s.say({dam:"!",err:"DAM JSON parse error."},c);console.STAT&&console.STAT(+new Date,S.length,"# on hear batch");var N=y.puff;(function E(){for(var a=+new Date,o=0,g;o<N&&(g=S[o++]);)s.hear(g,c);S=S.slice(o),console.STAT&&console.STAT(a,+new Date-a,"hear loop"),T(c),S.length&&x(E,0)})()}),n="";return}if(D==="{"||(n["#"]||Object.plain(n))&&(w=n)){if(w)return _.one(w,c,m);l(n,function(A,S){if(A||!S)return s.say({dam:"!",err:"DAM JSON parse error."},c);_.one(S,c,m)});return}}};_.one=function(n,c,E){var D,w,A,S,N;if(n.DBG&&(n.DBG=N={DBG:n.DBG}),N&&(N.h=E),N&&(N.hp=+new Date),(D=n["#"])||(D=n["#"]=String.random(9)),!(A=p(D))&&(w=n["##"],!(w&&(A=n["@"]||n.get&&D)&&O.check(S=A+w)))){if((n._=function(){}).via=s.leap=c,(A=n["><"])&&typeof A=="string"&&A.slice(0,99).split(",").forEach(function(a){this[a]=1},n._.yo={}),A=n.dam){(A=s.hear[A])&&A(n,c,d),$(D);return}(A=n.ok)&&(n._.near=A["/"]);var E=+new Date;N&&(N.is=E),c.SI=D,d.on("in",s.last=n),N&&(N.hd=+new Date),console.STAT&&console.STAT(E,+new Date-E,n.get?"msg get":n.put?"msg put":"msg"),(A=$(D)).via=c,n.get&&(A.it=n),S&&$(S),s.leap=s.last=null}},_.c=_.d=0,function(){var n=0,c;s.hash=function(w,A){var S,N,E,a=+new Date;f(w.put,function o(g,k){var I=(N||(N=E=k||"")).slice(0,32768);if(S=String.hash(I,S),N=N.slice(32768),N){x(o,0);return}console.STAT&&console.STAT(a,+new Date-a,"say json+hash"),w._.$put=E,w["##"]=S,s.say(w,A),delete w._.$put},m)};function m(w,A){var S;return A instanceof Object?(Object.keys(A).sort().forEach(D,{to:S={},on:A}),S):A}function D(w){this.to[w]=this.on[w]}s.say=function(w,A){var S;if((S=this)&&(S=S.to)&&S.next&&S.next(w),!w)return!1;var N,E,a=w["@"],o=w._||(w._=function(){}),g=w.DBG,k=+new Date;if(o.y=o.y||k,A||g&&(g.y=k),(N=w["#"])||(N=w["#"]=String.random(9)),!c&&$(N),!w["##"]&&b!==w.put&&!o.via&&a){s.hash(w,A);return}if(!A&&a&&(A=(S=O.s[a])&&(S.via||(S=S.it)&&(S=S._)&&S.via)||(S=s.last)&&a===S["#"]&&s.leap),!A&&a)return O.s[a]?void 0:(console.STAT&&console.STAT(+new Date,++n,"total no peer to ack to"),!1);if(!A&&s.way)return s.way(w);if(g&&(g.yh=+new Date),!(E=o.raw)){s.raw(w,A);return}if(g&&(g.yr=+new Date),!A||!A.id){if(!Object.plain(A||y.peers))return!1;var k=+new Date;y.puff;var I=y.peers,C=Object.keys(A||y.peers||{});console.STAT&&console.STAT(k,+new Date-k,"peer keys"),function R(){var B=+new Date;c=1;var P=o.raw;o.raw=E;for(var M=0,L;M<9&&(L=(C||"")[M++]);)!(L=I[L]||(A||"")[L])||s.say(w,L);o.raw=P,c=0,C=C.slice(M),console.STAT&&console.STAT(B,+new Date-B,"say loop"),C.length&&(x(R,0),a&&$(a))}();return}if(!A.wire&&s.wire&&s.wire(A),N!==A.last){if(A.last=N,A===o.via||(S=o.yo)&&(S[A.url]||S[A.pid]||S[A.id]))return!1;if(console.STAT&&console.STAT(k,((g||o).yp=+new Date)-(o.y||k),"say prep"),!c&&a&&$(a),A.batch){if(A.tail=(S=A.tail||0)+E.length,A.tail<=y.pack){A.batch+=(S?",":"")+E;return}T(A)}A.batch="[";var j=+new Date;setTimeout(function(){console.STAT&&console.STAT(j,+new Date-j,"0ms TO"),T(A)},y.gap),v(E,A),console.STAT&&a===A.SI&&console.STAT(k,+new Date-A.SH,"say ack")}},s.say.c=s.say.d=0,s.raw=function(w,A){if(!w)return"";var S=w._||{},N,E;if(E=S.raw)return E;if(typeof w=="string")return w;var a=w["##"],o=w["@"];if(a&&o){if(!S.via&&p(o+a))return!1;if((E=(O.s[o]||"").it)||(E=s.last)&&o===E["#"]){if(a===E["##"])return!1;E["##"]||(E["##"]=a)}}if(!w.dam&&!w["@"]){var g=0,k=[];E=y.peers;for(var I in E){var C=E[I];if(k.push(C.url||C.pid||C.id),++g>6)break}g>1&&(w["><"]=k.join())}if(w.put&&(E=w.ok)&&(w.ok={"@":(E["@"]||1)-1,"/":E["/"]==w._.near?s.near:E["/"]}),N=S.$put){E={},Object.keys(w).forEach(function(G){E[G]=w[G]}),E.put=":])([:",f(E,function(G,R){if(!G){var B=+new Date;E=R.indexOf('"put":":])([:"'),j(b,R=R.slice(0,E+6)+N+R.slice(E+14)),console.STAT&&console.STAT(B,+new Date-B,"say slice")}});return}f(w,j);function j(G,R){G||(S.raw=R,s.say(w,A))}}}();function T(n){var c=n.batch,m=typeof c=="string";if(m&&(c+="]"),n.batch=n.tail=null,!!c&&!(m?3>c.length:!c.length)){if(!m)try{c=c.length===1?c[0]:JSON.stringify(c)}catch(D){return y.log("DAM JSON stringify error",D)}!c||v(c,n)}}function v(n,c){try{var m=c.wire;c.say?c.say(n):m.send&&m.send(n),s.say.d+=n.length||0,++s.say.c}catch{(c.queue=c.queue||[]).push(n)}}return s.near=0,s.hi=function(n){var c=n.wire,m;if(!c){s.wire(n.length&&{url:n,id:n}||n);return}n.id?y.peers[n.url||n.id]=n:(m=n.id=n.id||n.url||String.random(9),s.say({dam:"?",pid:d.opt.pid},y.peers[m]=n),delete O.s[n.last]),n.met||(s.near++,n.met=+new Date,d.on("hi",n)),m=n.queue,n.queue=[],setTimeout.each(m||[],function(D){v(D,n)},0,9)},s.bye=function(n){n.met&&--s.near,delete n.met,d.on("bye",n);var c=+new Date;c=c-(n.met||c),s.bye.time=((s.bye.time||c)+c)/2},s.hear["!"]=function(n,c){y.log("Error:",n.err)},s.hear["?"]=function(n,c){n.pid&&(c.pid||(c.pid=n.pid),n["@"])||(s.say({dam:"?",pid:y.pid,"@":n["#"]},c),delete O.s[c.last])},s.hear.mob=function(n,c){if(!!n.peers){var m=Object.keys(n.peers),D=m[Math.random()*m.length>>0];!D||(s.bye(c),s.hi(D))}},d.on("create",function(n){n.opt.pid=n.opt.pid||String.random(9),this.to.next(n),n.on("out",s.say)}),d.on("bye",function(n,c){n=y.peers[n.id||n]||n,this.to.next(n),n.bye?n.bye():(c=n.wire)&&c.close&&c.close(),delete y.peers[n.id],n.wire=null}),d.on("bye",function(n,c){this.to.next(n),(c=console.STAT)&&(c.peers=s.near),(c=n.url)&&setTimeout(function(){},y.lack||9e3)}),d.on("hi",function(n,c){if(this.to.next(n),(c=console.STAT)&&(c.peers=s.near),!y.super){var m=Object.keys(d.next||"");m.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(m,function(D){var w=d.next[D];if(y.super||(w.ask||"")[""]){s.say({get:{"#":D}},n);return}setTimeout.each(Object.keys(w.ask||""),function(A){!A||s.say({"##":String.hash((d.graph[D]||"")[A]),get:{"#":D,".":A}},n)})})}}),s}var b;try{h.exports=u}catch{}})(e,"./mesh"),e(function(h){var r=e("./index");r.Mesh=e("./mesh"),r.on("opt",function(f){if(this.to.next(f),f.once)return;var u=f.opt;if(u.WebSocket===!1)return;var b=r.window||{},d=u.WebSocket||b.WebSocket||b.webkitWebSocket||b.mozWebSocket;if(!d)return;u.WebSocket=d;var s=u.mesh=u.mesh||r.Mesh(f);s.wire||u.wire,s.wire=u.wire=y;function y($){try{if(!$||!$.url)return T&&T($);var _=$.url.replace(/^http/,"ws"),T=$.wire=new u.WebSocket(_);return T.onclose=function(){O($),u.mesh.bye($)},T.onerror=function(v){O($)},T.onopen=function(){u.mesh.hi($)},T.onmessage=function(v){!v||u.mesh.hear(v.data||v,$)},T}catch{u.mesh.bye($)}}setTimeout(function(){!u.super&&f.on("out",{dam:"hi"})},1);var x=2*999;function O($){clearTimeout($.defer),u.peers[$.url]&&(p&&$.retry<=0||($.retry=($.retry||u.retry+1||60)-(-$.tried+($.tried=+new Date)<x*4?1:0),$.defer=setTimeout(function _(){if(p&&p.hidden)return setTimeout(_,x);y($)},x)))}var p=""+l!=typeof document&&document});var l})(e,"./websocket"),e(function(h){if(!(typeof Gun>"u")){var r=function(){},l;try{l=(Gun.window||r).localStorage}catch{}l||(Gun.log("Warning: No localStorage exists to persist data to!"),l={setItem:function(u,b){this[u]=b},removeItem:function(u){delete this[u]},getItem:function(u){return this[u]}});var f=JSON.stringifyAsync||function(u,b,d,s){var y;try{b(y,JSON.stringify(u,d,s))}catch(x){b(x)}};Gun.on("create",function u(b){this.to.next(b);var d=b.opt;b.graph;var s=[],y,x,O,p;if(d.localStorage===!1)return;d.prefix=d.file||"gun/";try{y=u[d.prefix]=u[d.prefix]||JSON.parse(O=l.getItem(d.prefix))||{}}catch{y=u[d.prefix]={}}O=(O||"").length,b.on("get",function(_){this.to.next(_);var T=_.get,v,n,c,m;!T||!(v=T["#"])||(n=y[v]||m,n&&(c=T["."])&&!Object.plain(c)&&(n=Gun.state.ify({},c,Gun.state.is(n,c),n[c],v)),Gun.on.get.ack(_,n))}),b.on("put",function(_){this.to.next(_);var T=_.put,v=T["#"],n=T["."],c=_["#"],m=_.ok||"";if(y[v]=Gun.state.ify(y[v],n,T[">"],T[":"],v),p&&O>4999880){b.on("in",{"@":c,err:"localStorage max!"});return}!_["@"]&&(!_._.via||Math.random()<m["@"]/m["/"])&&s.push(c),!x&&(x=setTimeout($,9+O/333))});function $(){if(!s.length&&((setTimeout.turn||"").s||"").length){setTimeout($,99);return}var _=s;clearTimeout(x),x=!1,s=[],f(y,function(T,v){try{!T&&l.setItem(d.prefix,v)}catch(n){T=p=n||"localStorage failure"}T&&(Gun.log(T+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),b.on("localStorage:error",{err:T,get:d.prefix,put:y})),O=v.length,setTimeout.each(_,function(n){b.on("in",{"@":n,err:T,ok:0})},0,99)})}})}})(e,"./localStorage")})(),function(){var E;if(""+E!=typeof Gun){var e=function(a){console.warn("Warning! Deprecated internal utility will break in next version:",a)},i=Gun;i.fn=i.fn||{is:function(a){return e("fn"),!!a&&typeof a=="function"}},i.bi=i.bi||{is:function(a){return e("bi"),a instanceof Boolean||typeof a=="boolean"}},i.num=i.num||{is:function(a){return e("num"),!h(a)&&(a-parseFloat(a)+1>=0||a===1/0||a===-1/0)}},i.text=i.text||{is:function(a){return e("text"),typeof a=="string"}},i.text.ify=i.text.ify||function(a){return e("text.ify"),i.text.is(a)?a:typeof JSON<"u"?JSON.stringify(a):a&&a.toString?a.toString():a},i.text.random=i.text.random||function(a,o){e("text.random");var g="";for(a=a||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";a>0;)g+=o.charAt(Math.floor(Math.random()*o.length)),a--;return g},i.text.match=i.text.match||function(a,o){var g,k;return e("text.match"),typeof a!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},g=o["="]||o["*"]||o[">"]||o["<"],a===g?!0:k!==o["="]?!1:(g=o["*"]||o[">"]||o["<"],a.slice(0,(g||"").length)===g?!0:k!==o["*"]?!1:k!==o[">"]&&k!==o["<"]?a>=o[">"]&&a<=o["<"]:k!==o[">"]&&a>=o[">"]||k!==o["<"]&&a<=o["<"]))},i.text.hash=i.text.hash||function(a,o){if(e("text.hash"),typeof a=="string"){if(o=o||0,!a.length)return o;for(var g=0,k=a.length,I;g<k;++g)I=a.charCodeAt(g),o=(o<<5)-o+I,o|=0;return o}},i.list=i.list||{is:function(a){return e("list"),a instanceof Array}},i.list.slit=i.list.slit||Array.prototype.slice,i.list.sort=i.list.sort||function(a){return e("list.sort"),function(o,g){return!o||!g?0:(o=o[a],g=g[a],o<g?-1:o>g?1:0)}},i.list.map=i.list.map||function(a,o,g){return e("list.map"),S(a,o,g)},i.list.index=1,i.obj=i.boj||{is:function(a){return e("obj"),a?a instanceof Object&&a.constructor===Object||Object.prototype.toString.call(a).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},i.obj.put=i.obj.put||function(a,o,g){return e("obj.put"),(a||{})[o]=g,a},i.obj.has=i.obj.has||function(a,o){return e("obj.has"),a&&Object.prototype.hasOwnProperty.call(a,o)},i.obj.del=i.obj.del||function(a,o){if(e("obj.del"),!!a)return a[o]=null,delete a[o],a},i.obj.as=i.obj.as||function(a,o,g,k){return e("obj.as"),a[o]=a[o]||(k===g?{}:g)},i.obj.ify=i.obj.ify||function(a){if(e("obj.ify"),c(a))return a;try{a=JSON.parse(a)}catch{a={}}return a},function(){var a;function o(g,k){D(this,k)&&a!==this[k]||(this[k]=g)}i.obj.to=i.obj.to||function(g,k){return e("obj.to"),k=k||{},S(g,o,k),k}}(),i.obj.copy=i.obj.copy||function(a){return e("obj.copy"),a&&JSON.parse(JSON.stringify(a))},function(){function a(o,g){var k=this.n,I;if(!(k&&(g===k||c(k)&&D(k,g)))&&I!==g)return!0}i.obj.empty=i.obj.empty||function(o,g){return e("obj.empty"),o?!S(o,a,{n:g}):!0}}(),function(){function a(k,I){if(arguments.length===2){a.r=a.r||{},a.r[k]=I;return}a.r=a.r||[],a.r.push(k)}var o=Object.keys,g;Object.keys=Object.keys||function(k){return g(k,function(I,C,j){j(C)})},i.obj.map=g=i.obj.map||function(k,I,C){e("obj.map");var j,G=0,R,B,P,M,L=typeof I=="function";if(a.r=j,o&&c(k)&&(P=o(k),M=!0),C=C||{},h(k)||P)for(R=(P||k).length;G<R;G++){var X=G+i.list.index;if(L){if(B=M?I.call(C,k[P[G]],P[G],a):I.call(C,k[G],X,a),B!==j)return B}else if(I===k[M?P[G]:G])return P?P[G]:X}else for(G in k)if(L){if(D(k,G)&&(B=C?I.call(C,k[G],G,a):I(k[G],G,a),B!==j))return B}else if(I===k[G])return G;return L?a.r:i.list.index?0:-1}}(),i.time=i.time||{},i.time.is=i.time.is||function(a){return e("time"),a?a instanceof Date:+new Date().getTime()};var v=i.fn.is,h=i.list.is,n=i.obj,c=n.is,D=n.has,S=n.map,r={};r.is=function(a){return e("val.is"),a===E?!1:a===null?!0:a===1/0?!1:u(a)||f(a)||p(a)?!0:r.link.is(a)||!1},r.link=r.rel={_:"#"},function(){r.link.is=function(o){if(e("val.link.is"),o&&o[l]&&!o._&&c(o)){var g={};if(S(o,a,g),g.id)return g.id}return!1};function a(o,g){var k=this;if(k.id)return k.id=!1;if(g==l&&u(o))k.id=o;else return k.id=!1}}(),r.link.ify=function(a){return e("val.link.ify"),A({},l,a)},i.obj.has._=".";var l=r.link._,E,f=i.bi.is,p=i.num.is,u=i.text.is,n=i.obj,c=n.is,A=n.put,S=n.map;i.val=i.val||r;var b={_:"_"};b.soul=function(a,o){return e("node.soul"),a&&a._&&a._[o||y]},b.soul.ify=function(a,o){return e("node.soul.ify"),o=typeof o=="string"?{soul:o}:o||{},a=a||{},a._=a._||{},a._[y]=o.soul||a._[y]||s(),a},b.soul._=r.link._,function(){b.is=function(o,g,k){e("node.is");var I;return c(o)&&(I=b.soul(o))?!S(o,a,{as:k,cb:g,s:I,n:o}):!1};function a(o,g){if(g!==b._){if(!r.is(o))return!0;this.cb&&this.cb.call(this.as,o,g,this.n,this.s)}}}(),function(){b.ify=function(o,g,k){return e("node.ify"),g?typeof g=="string"?g={soul:g}:typeof g=="function"&&(g={map:g}):g={},g.map&&(g.node=g.map.call(k,o,E,g.node||{})),(g.node=b.soul.ify(g.node||{},g))&&S(o,a,{o:g,as:k}),g.node};function a(o,g){var k=this.o,I,C;if(k.map){I=k.map.call(this.as,o,""+g,k.node),C===I?m(k.node,g):k.node&&(k.node[g]=I);return}r.is(o)&&(k.node[g]=o)}}();var n=i.obj,c=n.is,m=n.del,S=n.map,d=i.text,s=d.random,y=b.soul._,E;i.node=i.node||b;var x=i.state;x.lex=function(){return e("state.lex"),x().toString(36).replace(".","")},x.to=function(a,o,g){e("state.to");var k=(a||{})[o];return c(k)&&(k=N(k)),x.ify(g,o,x.is(a,o),k,b.soul(a))},function(){x.map=function(o,g,k){e("state.map");var I,C=c(C=o||g)?C:null;return o=v(o=o||g)?o:null,C&&!o?(g=p(g)?g:x(),C[_]=C[_]||{},S(C,a,{o:C,s:g}),C):(k=k||c(g)?g:I,g=p(g)?g:x(),function(j,G,R,B){if(!o)return a.call({o:R,s:g},j,G),j;o.call(k||this||{},j,G,R,B),!(D(R,G)&&I===R[G])&&a.call({o:R,s:g},j,G)})};function a(o,g){_!==g&&x.ify(this.o,g,this.s)}}();var n=i.obj;n.as;var D=n.has,c=n.is,S=n.map,N=n.copy,O=i.num,p=O.is,$=i.fn,v=$.is,_=b._,E,T={};(function(){T.is=function(g,k,I,C){return e("graph.is"),!g||!c(g)||w(g)?!1:!S(g,a,{cb:k,fn:I,as:C})};function a(g,k){if(!g||k!==b.soul(g)||!b.is(g,this.fn,this.as))return!0;!this.cb||(o.n=g,o.as=this.as,this.cb.call(o.as,g,k,o))}function o(g){g&&b.is(o.n,g,o.as)}})(),function(){T.ify=function(C,j,G){e("graph.ify");var R={path:[],obj:C};return j?typeof j=="string"?j={soul:j}:typeof j=="function"&&(j.map=j):j={},typeof G=="string"&&(j.soul=j.soul||G,G=E),j.soul&&(R.link=r.link.ify(j.soul)),j.shell=(G||{}).shell,j.graph=j.graph||{},j.seen=j.seen||[],j.as=j.as||G,a(j,R),j.root=R.node,j.graph};function a(C,j){var G;return(G=I(C,j))?G:(j.env=C,j.soul=g,b.ify(j.obj,o,j)&&(j.link=j.link||r.link.ify(b.soul(j.node)),j.obj!==C.shell&&(C.graph[r.link.is(j.link)]=j.node)),j)}function o(C,j,G){var R=this,B=R.env,P,M;if(b._===j&&D(C,r.link._))return G._;if(!!(P=k(C,j,G,R,B))){if(j||(R.node=R.node||G||{},D(C,b._)&&b.soul(C)&&(R.node._=N(C._)),R.node=b.soul.ify(R.node,r.link.is(R.link)),R.link=R.link||r.link.ify(b.soul(R.node))),(M=B.map)&&(M.call(B.as||{},C,j,G,R),D(G,j))){if(C=G[j],E===C){m(G,j);return}if(!(P=k(C,j,G,R,B)))return}if(!j)return R.node;if(P===!0)return C;if(M=a(B,{obj:C,path:R.path.concat(j)}),!!M.node)return M.link}}function g(C){var j=this,G=r.link.is(j.link),R=j.env.graph;j.link=j.link||r.link.ify(C),j.link[r.link._]=C,j.node&&j.node[b._]&&(j.node[b._][r.link._]=C),D(R,G)&&(R[C]=R[G],m(R,G))}function k(C,j,G,R,B){var P;if(r.is(C))return!0;if(c(C))return 1;if(P=B.invalid)return C=P.call(B.as||{},C,j,G),k(C,j,G,R,B);B.err="Invalid value at '"+R.path.concat(j).join(".")+"'!",i.list.is(C)&&(B.err+=" Use `.set(item)` instead of an Array.")}function I(C,j){for(var G=C.seen,R=G.length,B;R--;)if(B=G[R],j.obj===B.obj)return B;G.push(j)}}(),T.node=function(a){e("graph.node");var o=b.soul(a);if(!!o)return A({},o,a)},function(){T.to=function(o,g,k){if(e("graph.to"),!!o){var I={};return k=k||{seen:{}},S(o[g],a,{obj:I,graph:o,opt:k}),I}};function a(o,g){var k,I;if(b._===g){if(w(o,r.link._))return;this.obj[g]=N(o);return}if(!(k=r.link.is(o))){this.obj[g]=o;return}if(I=this.opt.seen[k]){this.obj[g]=I;return}this.obj[g]=this.opt.seen[k]=T.to(this.graph,k,this.opt)}}();var v=i.fn.is,n=i.obj,c=n.is,m=n.del,D=n.has,w=n.empty,A=n.put,S=n.map,N=n.copy,E;i.graph=i.graph||T}}()})(ne);(function(t){t.exports=ne.exports})(ee);const sn=on(ee.exports),fn=ut('<div><form action="/" method="get" class="flex justify-between items-center rounded bg-lavender border-green border-4 px-4 py-2 m-4"><span><label for="gameid-input" class="px-2">Join Game ID</label><input id="gameid-input" type="text" class="px-2 rounded border-green border-2 w-[max(80vw, 20rem)]"></span><button class="bg-terra mx-2 border-green border-2 px-3 py-1 rounded">Join</button></form><div class="grid grid-cols-3 grid-rows-3 gap-4 aspect-square"></div><div class="flex flex-col justify-center align-middle"><button class="btn hover-shadow border-4 my-4 py-2 px-4 m-auto"></button></div></div>'),an=sn("https://mvp-gun.herokuapp.com/gun"),ln=()=>{const[t,e]=Z(Array.from({length:9},()=>F.None)),[i,h]=Z(F.Circle);let r=F.None;const l=H(()=>{const T=$e(t());return T!==F.None&&(r=F.None),T}),f=T=>{let v=t(),n=i();r===F.None&&(r=n),n===r&&v[T]===F.None&&(v[T]=n,e([...v]),n=xe(n),h(n),d())},u=T=>{if(T.code.startsWith("Digit")){const v=parseInt(T.code.charAt(T.code.length-1))-1;v>=0&&f(v)}else if(T.code.startsWith("Numpad")){let v=parseInt(T.code.charAt(T.code.length-1));v>=7&&v<=9&&(v-=6),v>=1&&v<=3&&(v+=6),v-=1,v>=0&&f(v)}};fe(()=>{window.addEventListener("keydown",u)}),mt(()=>{window.removeEventListener("keydown",u)});const b=()=>{e(Array.from({length:9},()=>F.None)),h(F.Circle),r=F.None,d()},d=()=>{O.put({field:{...t()},turn:i()})},s=Xe(),y=s.pathname;let x=s.query.id;x||(x=rn(),Ve()(`${y}?id=${x}`,{replace:!0}));const O=an.get(x);O.get("field").on(T=>{const v=Object.values(T),n=v.slice(0,v.length-1);e(n)}),O.get("turn").on(T=>{h(T)});const[p,$]=Z(!1);let _;return(()=>{const T=fn.cloneNode(!0),v=T.firstChild,n=v.firstChild,c=n.nextSibling,m=v.nextSibling,D=m.nextSibling,w=D.firstChild;return c.$$click=A=>{const S=document.getElementById("gameid-input");S.value&&(document.location.href=`${y}?id=${S.value}`),A.preventDefault()},tt(m,W(we,{get each(){return t()},children:(A,S)=>W(Oe,{state:A,onClick:()=>f(S())})})),tt(T,W(Qt,{get children(){return[W(lt,{get when(){return l()===F.Circle},get children(){return W($t,{restartGame:b,result:"Winner: Circle"})}}),W(lt,{get when(){return l()===F.Cross},get children(){return W($t,{restartGame:b,result:"Winner: Cross"})}}),W(lt,{get when(){return l()===F.Draw},get children(){return W($t,{restartGame:b,result:"Draw"})}})]}}),D),w.$$click=()=>{$(!0),_&&clearTimeout(_),_=setTimeout(()=>{$(!1)},5*1e3),navigator.clipboard.writeText(x)},tt(w,()=>p()?"Game ID Copied!":"Get Game ID"),T})()};xt(["click"]);const cn=ut('<div class="absolute inset-0 flex justify-center items-center bg-artichoke"></div>'),hn=()=>W(Ye,{get children(){const t=cn.cloneNode(!0);return tt(t,W(ln,{})),t}});_e(()=>W(hn,{}),document.getElementById("root"));
