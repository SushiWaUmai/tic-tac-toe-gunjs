(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))p(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&p(f)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function p(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();const z={};function re(t){z.context=t}const ie=(t,e)=>t===e,oe=Symbol("solid-track"),vt={equals:ie};let Lt=Ht;const et=1,bt=2,Ut={owned:null,cleanups:null,context:null,owner:null};var U=null;let it=null,q=null,K=null,Y=null,Dt=0;function gt(t,e){const i=q,p=U,r=t.length===0,l=r?Ut:{owned:null,cleanups:null,context:null,owner:e||p},f=r?t:()=>t(()=>Q(()=>Ct(l)));U=l,q=null;try{return ot(f,!0)}finally{q=i,U=p}}function Z(t,e){e=e?Object.assign({},vt,e):vt;const i={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},p=r=>(typeof r=="function"&&(r=r(i.value)),Kt(i,r));return[Ft.bind(i),p]}function ct(t,e,i){const p=Ot(t,e,!1,et);ht(p)}function ue(t,e,i){Lt=pe;const p=Ot(t,e,!1,et);p.user=!0,Y?Y.push(p):ht(p)}function H(t,e,i){i=i?Object.assign({},vt,i):vt;const p=Ot(t,e,!0,0);return p.observers=null,p.observerSlots=null,p.comparator=i.equals||void 0,ht(p),Ft.bind(p)}function Q(t){let e,i=q;return q=null,e=t(),q=i,e}function se(t,e,i){const p=Array.isArray(t);let r,l=i&&i.defer;return f=>{let u;if(p){u=Array(t.length);for(let y=0;y<t.length;y++)u[y]=t[y]()}else u=t();if(l){l=!1;return}const b=Q(()=>e(u,r,f));return r=u,b}}function fe(t){ue(()=>Q(t))}function mt(t){return U===null||(U.cleanups===null?U.cleanups=[t]:U.cleanups.push(t)),t}function ae(){return U}function le(t,e){const i=U;U=t;try{return ot(e,!0)}finally{U=i}}function ce(t){const e=q,i=U;return Promise.resolve().then(()=>{q=e,U=i;let p;return ot(t,!1),q=U=null,p?p.done:void 0})}function qt(t,e){const i=Symbol("context");return{id:i,Provider:ge(i),defaultValue:t}}function Jt(t){let e;return(e=zt(U,t.id))!==void 0?e:t.defaultValue}function Wt(t){const e=H(t),i=H(()=>Tt(e()));return i.toArray=()=>{const p=i();return Array.isArray(p)?p:p!=null?[p]:[]},i}function Ft(){const t=it;if(this.sources&&(this.state||t))if(this.state===et||t)ht(this);else{const e=K;K=null,ot(()=>kt(this),!1),K=e}if(q){const e=this.observers?this.observers.length:0;q.sources?(q.sources.push(this),q.sourceSlots.push(e)):(q.sources=[this],q.sourceSlots=[e]),this.observers?(this.observers.push(q),this.observerSlots.push(q.sources.length-1)):(this.observers=[q],this.observerSlots=[q.sources.length-1])}return this.value}function Kt(t,e,i){let p=t.value;return(!t.comparator||!t.comparator(p,e))&&(t.value=e,t.observers&&t.observers.length&&ot(()=>{for(let r=0;r<t.observers.length;r+=1){const l=t.observers[r],f=it&&it.running;f&&it.disposed.has(l),(f&&!l.tState||!f&&!l.state)&&(l.pure?K.push(l):Y.push(l),l.observers&&Vt(l)),f||(l.state=et)}if(K.length>1e6)throw K=[],new Error},!1)),e}function ht(t){if(!t.fn)return;Ct(t);const e=U,i=q,p=Dt;q=U=t,he(t,t.value,p),q=i,U=e}function he(t,e,i){let p;try{p=t.fn(e)}catch(r){t.pure&&(t.state=et),Xt(r)}(!t.updatedAt||t.updatedAt<=i)&&(t.updatedAt!=null&&"observers"in t?Kt(t,p):t.value=p,t.updatedAt=i)}function Ot(t,e,i,p=et,r){const l={fn:t,state:p,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:U,context:null,pure:i};return U===null||U!==Ut&&(U.owned?U.owned.push(l):U.owned=[l]),l}function wt(t){const e=it;if(t.state===0||e)return;if(t.state===bt||e)return kt(t);if(t.suspense&&Q(t.suspense.inFallback))return t.suspense.effects.push(t);const i=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Dt);)(t.state||e)&&i.push(t);for(let p=i.length-1;p>=0;p--)if(t=i[p],t.state===et||e)ht(t);else if(t.state===bt||e){const r=K;K=null,ot(()=>kt(t,i[0]),!1),K=r}}function ot(t,e){if(K)return t();let i=!1;e||(K=[]),Y?i=!0:Y=[],Dt++;try{const p=t();return de(i),p}catch(p){K||(Y=null),Xt(p)}}function de(t){if(K&&(Ht(K),K=null),t)return;const e=Y;Y=null,e.length&&ot(()=>Lt(e),!1)}function Ht(t){for(let e=0;e<t.length;e++)wt(t[e])}function pe(t){let e,i=0;for(e=0;e<t.length;e++){const p=t[e];p.user?t[i++]=p:wt(p)}for(z.context&&re(),e=0;e<i;e++)wt(t[e])}function kt(t,e){const i=it;t.state=0;for(let p=0;p<t.sources.length;p+=1){const r=t.sources[p];r.sources&&(r.state===et||i?r!==e&&wt(r):(r.state===bt||i)&&kt(r,e))}}function Vt(t){const e=it;for(let i=0;i<t.observers.length;i+=1){const p=t.observers[i];(!p.state||e)&&(p.state=bt,p.pure?K.push(p):Y.push(p),p.observers&&Vt(p))}}function Ct(t){let e;if(t.sources)for(;t.sources.length;){const i=t.sources.pop(),p=t.sourceSlots.pop(),r=i.observers;if(r&&r.length){const l=r.pop(),f=i.observerSlots.pop();p<r.length&&(l.sourceSlots[f]=p,r[p]=l,i.observerSlots[p]=f)}}if(t.owned){for(e=0;e<t.owned.length;e++)Ct(t.owned[e]);t.owned=null}if(t.cleanups){for(e=0;e<t.cleanups.length;e++)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function ye(t){return t instanceof Error||typeof t=="string"?t:new Error("Unknown error")}function Xt(t){throw t=ye(t),t}function zt(t,e){return t?t.context&&t.context[e]!==void 0?t.context[e]:zt(t.owner,e):void 0}function Tt(t){if(typeof t=="function"&&!t.length)return Tt(t());if(Array.isArray(t)){const e=[];for(let i=0;i<t.length;i++){const p=Tt(t[i]);Array.isArray(p)?e.push.apply(e,p):e.push(p)}return e}return t}function ge(t,e){return function(p){let r;return ct(()=>r=Q(()=>(U.context={[t]:p.value},Wt(()=>p.children))),void 0),r}}const ve=Symbol("fallback");function Gt(t){for(let e=0;e<t.length;e++)t[e]()}function be(t,e,i={}){let p=[],r=[],l=[],f=0,u=e.length>1?[]:null;return mt(()=>Gt(l)),()=>{let b=t()||[],y,s;return b[oe],Q(()=>{let $=b.length,O,d,x,v,S,w,n,c,m;if($===0)f!==0&&(Gt(l),l=[],p=[],r=[],f=0,u&&(u=[])),i.fallback&&(p=[ve],r[0]=gt(A=>(l[0]=A,i.fallback())),f=1);else if(f===0){for(r=new Array($),s=0;s<$;s++)p[s]=b[s],r[s]=gt(h);f=$}else{for(x=new Array($),v=new Array($),u&&(S=new Array($)),w=0,n=Math.min(f,$);w<n&&p[w]===b[w];w++);for(n=f-1,c=$-1;n>=w&&c>=w&&p[n]===b[c];n--,c--)x[c]=r[n],v[c]=l[n],u&&(S[c]=u[n]);for(O=new Map,d=new Array(c+1),s=c;s>=w;s--)m=b[s],y=O.get(m),d[s]=y===void 0?-1:y,O.set(m,s);for(y=w;y<=n;y++)m=p[y],s=O.get(m),s!==void 0&&s!==-1?(x[s]=r[y],v[s]=l[y],u&&(S[s]=u[y]),s=d[s],O.set(m,s)):l[y]();for(s=w;s<$;s++)s in x?(r[s]=x[s],l[s]=v[s],u&&(u[s]=S[s],u[s](s))):r[s]=gt(h);r=r.slice(0,f=$),p=b.slice(0)}return r});function h($){if(l[s]=$,u){const[O,d]=Z(s);return u[s]=d,e(b[s],O)}return e(b[s])}}}function W(t,e){return Q(()=>t(e||{}))}function we(t){const e="fallback"in t&&{fallback:()=>t.fallback};return H(be(()=>t.each,t.children,e||void 0))}function Qt(t){let e=!1,i=!1;const p=Wt(()=>t.children),r=H(()=>{let l=p();Array.isArray(l)||(l=[l]);for(let f=0;f<l.length;f++){const u=l[f].when;if(u)return i=!!l[f].keyed,[f,u,l[f]]}return[-1]},void 0,{equals:(l,f)=>l[0]===f[0]&&(e?l[1]===f[1]:!l[1]==!f[1])&&l[2]===f[2]});return H(()=>{const[l,f,u]=r();if(l<0)return t.fallback;const b=u.children,y=typeof b=="function"&&b.length>0;return e=i||y,y?Q(()=>b(f)):b})}function lt(t){return t}function ke(t,e,i){let p=i.length,r=e.length,l=p,f=0,u=0,b=e[r-1].nextSibling,y=null;for(;f<r||u<l;){if(e[f]===i[u]){f++,u++;continue}for(;e[r-1]===i[l-1];)r--,l--;if(r===f){const s=l<p?u?i[u-1].nextSibling:i[l-u]:b;for(;u<l;)t.insertBefore(i[u++],s)}else if(l===u)for(;f<r;)(!y||!y.has(e[f]))&&e[f].remove(),f++;else if(e[f]===i[l-1]&&i[u]===e[r-1]){const s=e[--r].nextSibling;t.insertBefore(i[u++],e[f++].nextSibling),t.insertBefore(i[--l],s),e[r]=i[l]}else{if(!y){y=new Map;let h=u;for(;h<l;)y.set(i[h],h++)}const s=y.get(e[f]);if(s!=null)if(u<s&&s<l){let h=f,$=1,O;for(;++h<r&&h<l&&!((O=y.get(e[h]))==null||O!==s+$);)$++;if($>s-u){const d=e[f];for(;u<s;)t.insertBefore(i[u++],d)}else t.replaceChild(i[u++],e[f++])}else f++;else e[f++].remove()}}}const It="_$DX_DELEGATE";function _e(t,e,i,p={}){let r;return gt(l=>{r=l,e===document?t():tt(e,t(),e.firstChild?null:void 0,i)},p.owner),()=>{r(),e.textContent=""}}function ut(t,e,i){const p=document.createElement("template");p.innerHTML=t;let r=p.content.firstChild;return i&&(r=r.firstChild),r}function xt(t,e=window.document){const i=e[It]||(e[It]=new Set);for(let p=0,r=t.length;p<r;p++){const l=t[p];i.has(l)||(i.add(l),e.addEventListener(l,me))}}function Rt(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}function Yt(t,e,i,p){if(p)Array.isArray(i)?(t[`$$${e}`]=i[0],t[`$$${e}Data`]=i[1]):t[`$$${e}`]=i;else if(Array.isArray(i)){const r=i[0];t.addEventListener(e,i[0]=l=>r.call(t,i[1],l))}else t.addEventListener(e,i)}function tt(t,e,i,p){if(i!==void 0&&!p&&(p=[]),typeof e!="function")return _t(t,e,p,i);ct(r=>_t(t,e(),r,i),p)}function me(t){const e=`$$${t.type}`;let i=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==i&&Object.defineProperty(t,"target",{configurable:!0,value:i}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return i||document}}),z.registry&&!z.done&&(z.done=!0,document.querySelectorAll("[id^=pl-]").forEach(p=>p.remove()));i!==null;){const p=i[e];if(p&&!i.disabled){const r=i[`${e}Data`];if(r!==void 0?p.call(i,r,t):p.call(i,t),t.cancelBubble)return}i=i.host&&i.host!==i&&i.host instanceof Node?i.host:i.parentNode}}function _t(t,e,i,p,r){for(z.context&&!i&&(i=[...t.childNodes]);typeof i=="function";)i=i();if(e===i)return i;const l=typeof e,f=p!==void 0;if(t=f&&i[0]&&i[0].parentNode||t,l==="string"||l==="number"){if(z.context)return i;if(l==="number"&&(e=e.toString()),f){let u=i[0];u&&u.nodeType===3?u.data=e:u=document.createTextNode(e),i=st(t,i,p,u)}else i!==""&&typeof i=="string"?i=t.firstChild.data=e:i=t.textContent=e}else if(e==null||l==="boolean"){if(z.context)return i;i=st(t,i,p)}else{if(l==="function")return ct(()=>{let u=e();for(;typeof u=="function";)u=u();i=_t(t,u,i,p)}),()=>i;if(Array.isArray(e)){const u=[],b=i&&Array.isArray(i);if(At(u,e,i,r))return ct(()=>i=_t(t,u,i,p,!0)),()=>i;if(z.context){if(!u.length)return i;for(let y=0;y<u.length;y++)if(u[y].parentNode)return i=u}if(u.length===0){if(i=st(t,i,p),f)return i}else b?i.length===0?Pt(t,u,p):ke(t,i,u):(i&&st(t),Pt(t,u));i=u}else if(e instanceof Node){if(z.context&&e.parentNode)return i=f?[e]:e;if(Array.isArray(i)){if(f)return i=st(t,i,p,e);st(t,i,null,e)}else i==null||i===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);i=e}}return i}function At(t,e,i,p){let r=!1;for(let l=0,f=e.length;l<f;l++){let u=e[l],b=i&&i[l];if(u instanceof Node)t.push(u);else if(!(u==null||u===!0||u===!1))if(Array.isArray(u))r=At(t,u,b)||r;else if(typeof u=="function")if(p){for(;typeof u=="function";)u=u();r=At(t,Array.isArray(u)?u:[u],Array.isArray(b)?b:[b])||r}else t.push(u),r=!0;else{const y=String(u);b&&b.nodeType===3&&b.data===y?t.push(b):t.push(document.createTextNode(y))}}return r}function Pt(t,e,i=null){for(let p=0,r=e.length;p<r;p++)t.insertBefore(e[p],i)}function st(t,e,i,p){if(i===void 0)return t.textContent="";const r=p||document.createTextNode("");if(e.length){let l=!1;for(let f=e.length-1;f>=0;f--){const u=e[f];if(r!==u){const b=u.parentNode===t;!l&&!f?b?t.replaceChild(r,u):t.insertBefore(r,i):b&&u.remove()}else l=!0}}else t.insertBefore(r,i);return[r]}var F=(t=>(t[t.None=0]="None",t[t.Cross=1]="Cross",t[t.Circle=2]="Circle",t[t.Draw=3]="Draw",t))(F||{});const xe=t=>{switch(t){case 2:return 1;case 1:return 2}return 0},$e=t=>{const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[6,4,2]];for(let p of e){const[r,l,f]=p;if(t[r]!==0&&t[r]===t[l]&&t[r]==t[f])return t[r]}let i=!0;for(let p of t)p===0&&(i=!1);return i?3:0},je="/tic-tac-toe-gunjs/assets/circle.2c56a12d.svg",Se="/tic-tac-toe-gunjs/assets/cross.f03db0bd.svg",Te=ut('<img alt="circle" class="animate-spawn">'),Ae=ut('<img alt="cross" class="animate-spawn">'),De=ut('<button class="btn hover-shadow border-8 field flex justify-center items-center m-auto"></button>'),Oe=t=>(()=>{const e=De.cloneNode(!0);return Yt(e,"click",t.onClick,!0),tt(e,W(Qt,{get fallback(){return[]},get children(){return[W(lt,{get when(){return t.state===F.Circle},get children(){const i=Te.cloneNode(!0);return Rt(i,"src",je),i}}),W(lt,{get when(){return t.state===F.Cross},get children(){const i=Ae.cloneNode(!0);return Rt(i,"src",Se),i}})]}})),e})();xt(["click"]);const Ce=ut('<div class="animate-fadein animation-delay-1000 absolute inset-0 flex justify-center items-center transition bg-black/50"><div class="animate-spawn animation-delay-2000 rounded border-green border-8 bg-lavender px-8 py-5"></div></div>'),Ne=t=>(()=>{const e=Ce.cloneNode(!0),i=e.firstChild;return tt(i,()=>t.children),e})(),Ee=ut('<div class="flex flex-col"><h3 class="m-3 text-4xl text-center"></h3><button class="py-2 px-3 rounded border-green border-2 hover-shadow bg-terra text-green m-auto cursor-pointer">Restart Game</button></div>'),$t=t=>W(Ne,{get children(){const e=Ee.cloneNode(!0),i=e.firstChild,p=i.nextSibling;return tt(i,()=>t.result),Yt(p,"click",t.restartGame,!0),e}});xt(["click"]);function Ge(t,e,i){return t.addEventListener(e,i),()=>t.removeEventListener(e,i)}function Ie([t,e],i,p){return[i?()=>i(t()):t,p?r=>e(p(r)):e]}function Re(t){try{return document.querySelector(t)}catch{return null}}function Pe(t,e){const i=Re(`#${t}`);i?i.scrollIntoView():e&&window.scrollTo(0,0)}function Be(t,e,i,p){let r=!1;const l=u=>typeof u=="string"?{value:u}:u,f=Ie(Z(l(t()),{equals:(u,b)=>u.value===b.value}),void 0,u=>(!r&&e(u),u));return i&&mt(i((u=t())=>{r=!0,f[1](l(u)),r=!1})),{signal:f,utils:p}}function Me(t){if(t){if(Array.isArray(t))return{signal:t}}else return{signal:Z({value:""})};return t}function Le(){return Be(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:t,replace:e,scroll:i,state:p})=>{e?window.history.replaceState(p,"",t):window.history.pushState(p,"",t),Pe(window.location.hash.slice(1),i)},t=>Ge(window,"popstate",()=>t()),{go:t=>window.history.go(t)})}const Ue=/^(?:[a-z0-9]+:)?\/\//i,qe=/^\/+|\/+$/g;function jt(t,e=!1){const i=t.replace(qe,"");return i?e||/^[?#]/.test(i)?i:"/"+i:""}function St(t,e,i){if(Ue.test(e))return;const p=jt(t),r=i&&jt(i);let l="";return!r||e.startsWith("/")?l=p:r.toLowerCase().indexOf(p.toLowerCase())!==0?l=p+r:l=r,(l||"/")+jt(e,!l)}function Je(t,e){if(t==null)throw new Error(e);return t}function We(t){const e={};return t.searchParams.forEach((i,p)=>{e[p]=i}),e}function ft(t,e){return decodeURIComponent(e?t.replace(/\+/g," "):t)}function Fe(t){const e=new Map,i=ae();return new Proxy({},{get(p,r){return e.has(r)||le(i,()=>e.set(r,H(()=>t()[r]))),e.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}const Ke=100,Zt=qt(),He=qt(),te=()=>Je(Jt(Zt),"Make sure your app is wrapped in a <Router />");let Bt;const Ve=()=>te().navigatorFactory(),Xe=()=>te().location;function ze(t,e){const i=new URL("http://sar"),p=H(b=>{const y=t();try{return new URL(y,i)}catch{return console.error(`Invalid path ${y}`),b}},i,{equals:(b,y)=>b.href===y.href}),r=H(()=>ft(p().pathname)),l=H(()=>ft(p().search,!0)),f=H(()=>ft(p().hash)),u=H(()=>"");return{get pathname(){return r()},get search(){return l()},get hash(){return f()},get state(){return e()},get key(){return u()},query:Fe(se(l,()=>We(p())))}}function Qe(t,e="",i,p){const{signal:[r,l],utils:f={}}=Me(t),u=f.parsePath||(T=>T),b=f.renderPath||(T=>T),y=St("",e),s=void 0;if(y===void 0)throw new Error(`${y} is not a valid base path`);y&&!r().value&&l({value:y,replace:!0,scroll:!1});const[h,$]=Z(!1),O=async T=>{$(!0);try{await ce(T)}finally{$(!1)}},[d,x]=Z(r().value),[v,S]=Z(r().state),w=ze(d,v),n=[],c={pattern:y,params:{},path:()=>y,outlet:()=>null,resolvePath(T){return St(y,T)}};if(i)try{Bt=c,c.data=i({data:void 0,params:{},location:w,navigate:A(c)})}finally{Bt=void 0}function m(T,N,E){Q(()=>{if(typeof N=="number"){N&&(f.go?f.go(N):console.warn("Router integration does not support relative routing"));return}const{replace:a,resolve:o,scroll:g,state:k}={replace:!1,resolve:!0,scroll:!0,...E},I=o?T.resolvePath(N):St("",N);if(I===void 0)throw new Error(`Path '${N}' is not a routable path`);if(n.length>=Ke)throw new Error("Too many redirects");const C=d();if(I!==C||k!==v()){const j=n.push({value:C,replace:a,scroll:g,state:v()});O(()=>{x(I),S(k)}).then(()=>{n.length===j&&_({value:I,state:k})})}})}function A(T){return T=T||Jt(He)||c,(N,E)=>m(T,N,E)}function _(T){const N=n[0];N&&((T.value!==N.value||T.state!==N.state)&&l({...T,replace:N.replace,scroll:N.scroll}),n.length=0)}ct(()=>{const{value:T,state:N}=r();Q(()=>{T!==d()&&O(()=>{x(T),S(N)})})});{let T=function(N){if(N.defaultPrevented||N.button!==0||N.metaKey||N.altKey||N.ctrlKey||N.shiftKey)return;const E=N.composedPath().find(j=>j instanceof Node&&j.nodeName.toUpperCase()==="A");if(!E||!E.hasAttribute("link"))return;const a=E.href;if(E.target||!a&&!E.hasAttribute("state"))return;const o=(E.getAttribute("rel")||"").split(/\s+/);if(E.hasAttribute("download")||o&&o.includes("external"))return;const g=new URL(a),k=ft(g.pathname);if(g.origin!==window.location.origin||y&&k&&!k.toLowerCase().startsWith(y.toLowerCase()))return;const I=u(k+ft(g.search,!0)+ft(g.hash)),C=E.getAttribute("state");N.preventDefault(),m(c,I,{resolve:!1,replace:E.hasAttribute("replace"),scroll:!E.hasAttribute("noscroll"),state:C&&JSON.parse(C)})};var D=T;xt(["click"]),document.addEventListener("click",T),mt(()=>document.removeEventListener("click",T))}return{base:c,out:s,location:w,isRouting:h,renderPath:b,parsePath:u,navigatorFactory:A}}const Ye=t=>{const{source:e,url:i,base:p,data:r,out:l}=t,f=e||Le(),u=Qe(f,p,r);return W(Zt.Provider,{value:u,get children(){return t.children}})};let yt;const Ze=new Uint8Array(16);function tn(){if(!yt&&(yt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!yt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yt(Ze)}const J=[];for(let t=0;t<256;++t)J.push((t+256).toString(16).slice(1));function en(t,e=0){return(J[t[e+0]]+J[t[e+1]]+J[t[e+2]]+J[t[e+3]]+"-"+J[t[e+4]]+J[t[e+5]]+"-"+J[t[e+6]]+J[t[e+7]]+"-"+J[t[e+8]]+J[t[e+9]]+"-"+J[t[e+10]]+J[t[e+11]]+J[t[e+12]]+J[t[e+13]]+J[t[e+14]]+J[t[e+15]]).toLowerCase()}const nn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Mt={randomUUID:nn};function rn(t,e,i){if(Mt.randomUUID&&!e&&!t)return Mt.randomUUID();t=t||{};const p=t.random||(t.rng||tn)();if(p[6]=p[6]&15|64,p[8]=p[8]&63|128,e){i=i||0;for(let r=0;r<16;++r)e[i+r]=p[r];return e}return en(p)}function on(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ee={exports:{}};function un(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ne={exports:{}};(function(t){(function(){function e(p,r){return r?un(p):p.slice?e[l(p)]:function(f,u){p(f={exports:{}}),e[l(u)]=f.exports};function l(f){return f.split("/").slice(-1).toString().replace(".js","")}}var i=t;e(function(p){String.random=function(l,f){var u="";for(l=l||24,f=f||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";l-- >0;)u+=f.charAt(Math.floor(Math.random()*f.length));return u},String.match=function(l,f){var u,b;return typeof l!="string"?!1:(typeof f=="string"&&(f={"=":f}),f=f||{},u=f["="]||f["*"]||f[">"]||f["<"],l===u?!0:b!==f["="]?!1:(u=f["*"]||f[">"],l.slice(0,(u||"").length)===u?!0:b!==f["*"]?!1:b!==f[">"]&&b!==f["<"]?l>=f[">"]&&l<=f["<"]:b!==f[">"]&&l>=f[">"]||b!==f["<"]&&l<=f["<"]))},String.hash=function(l,f){if(typeof l=="string"){if(f=f||0,!l.length)return f;for(var u=0,b=l.length,y;u<b;++u)y=l.charCodeAt(u),f=(f<<5)-f+y,f|=0;return f}};var r=Object.prototype.hasOwnProperty;Object.plain=function(l){return l?l instanceof Object&&l.constructor===Object||Object.prototype.toString.call(l).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(l,f){for(var u in l)if(r.call(l,u)&&(!f||f.indexOf(u)==-1))return!1;return!0},Object.keys=Object.keys||function(l){var f=[];for(var u in l)r.call(l,u)&&f.push(u);return f},function(){var l,f=setTimeout,u=0,b=0,y=typeof setImmediate!=""+l&&setImmediate||function(h,$){return typeof MessageChannel==""+l?f:((h=new MessageChannel).port1.onmessage=function(O){O.data==""&&$()},function(O){$=O,h.port2.postMessage("")})}(),s=f.check=f.check||typeof performance!=""+l&&performance||{now:function(){return+new Date}};f.hold=f.hold||9,f.poll=f.poll||function(h){if(f.hold>=s.now()-u&&b++<3333){h();return}y(function(){u=s.now(),h()},b=0)}}(),function(){var l=setTimeout,f=l.turn=l.turn||function($){u.push($)==1&&b(h)},u=f.s=[],b=l.poll,y=0,s,h=function(){(s=u[y++])&&s(),(y==u.length||y==99)&&(u=f.s=u.slice(y),y=0),u.length&&b(h)}}(),function(){var l,f=setTimeout,u=f.turn;(f.each=f.each||function(b,y,s,h){h=h||9,function $(O,d,x){if(d=(O=(b||[]).splice(0,h)).length){for(var v=0;v<d&&l===(x=y(O[v]));v++);if(l===x){u($);return}}s&&s(x)}()})()}()})(e,"./shim"),e(function(p){p.exports=function r(s,f,u){if(!s)return{to:r};var b,y=typeof f=="function",s=(this.tag||(this.tag={}))[s]||y&&(this.tag[s]={tag:s,to:r._={next:function($){var O;(O=this.to)&&O.next($)}}});if(y){var h={off:r.off||(r.off=function(){if(this.next===r._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=r._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:r._,next:f,the:s,on:this,as:u};return(h.back=s.last||s).to=h,s.last=h}return(s=s.to)&&b!==f&&s.next(f),s}})(e,"./onto"),e(function(p){p.exports=function(r){return r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"&&r!=1/0&&r!=-1/0&&r===r||!!r&&typeof r["#"]=="string"&&Object.keys(r).length===1&&r["#"]}})(e,"./valid"),e(function(p){e("./shim");function r(){var s=+new Date;return b<s?(f=0,b=s+r.drift):b=s+(f+=1)/u+r.drift}r.drift=0;var l=-1/0,f=0,u=999,b=l,y;r.is=function(s,h,$){var O=h&&s&&s._&&s._[">"]||$;if(!!O)return typeof(O=O[h])=="number"?O:l},r.ify=function(s,h,$,O,d){(s=s||{})._=s._||{},d&&(s._["#"]=d);var x=s._[">"]||(s._[">"]={});return y!==h&&h!=="_"&&(typeof $=="number"&&(x[h]=$),y!==O&&(s[h]=O)),s},p.exports=r})(e,"./state"),e(function(p){e("./shim");function r(l){var f={s:{}},u=f.s;l=l||{max:999,age:1e3*9},f.check=function(y){return u[y]?b(y):!1};var b=f.track=function(y){var s=u[y]||(u[y]={});return s.was=f.now=+new Date,f.to||(f.to=setTimeout(f.drop,l.age+9)),s};return f.drop=function(y){f.to=null,f.now=+new Date;var s=Object.keys(u);console.STAT&&console.STAT(f.now,+new Date-f.now,"dup drop keys"),setTimeout.each(s,function(h){var $=u[h];$&&(y||l.age)>f.now-$.was||delete u[h]},0,99)},f}p.exports=r})(e,"./dup"),e(function(p){e("./onto"),p.exports=function(f,u){if(!!this.on){var b=(this.opt||{}).lack||9e3;if(typeof f!="function"){if(!f)return;var s=f["#"]||f,y=(this.tag||"")[s];return y?(u&&(y=this.on(s,u),clearTimeout(y.err),y.err=setTimeout(function(){y.off()},b)),!0):void 0}var s=u&&u["#"]||r(9);if(!f)return s;var h=this.on(s,f,u);return h.err=h.err||setTimeout(function(){h.off(),h.next({err:"Error: No ACK yet.",lack:!0})},b),s}};var r=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(p){function r(d){return d instanceof r?(this._={$:this}).$:this instanceof r?r.create(this._={$:this,opt:d}):new r(d)}r.is=function(d){return d instanceof r||d&&d._&&d===d._.$||!1},r.version=.202,r.chain=r.prototype,r.chain.toJSON=function(){},e("./shim"),r.valid=e("./valid"),r.state=e("./state"),r.on=e("./onto"),r.dup=e("./dup"),r.ask=e("./ask"),function(){r.create=function(o){o.root=o.root||o,o.graph=o.graph||{},o.on=o.on||r.on,o.ask=o.ask||r.ask,o.dup=o.dup||r.dup();var g=o.$.opt(o.opt);return o.once||(o.on("in",d,o),o.on("out",d,o),o.on("put",S,o),r.on("create",o),o.on("create",o)),o.once=1,g};function d(o){if(!!o){if(o.out===d){this.to.next(o);return}var g=this,k=g.as,I=k.at||k,C=I.$,j=I.dup,G,R=o.DBG;if((G=o["#"])||(G=o["#"]=f(9)),!j.check(G)){if(j.track(G),G=o._,o._=typeof G=="function"?G:function(){},o.$&&o.$===(o.$._||"").$||(o.$=C),o["@"]&&!o.put&&n(o),!I.ask(o["@"],o))if(R&&(R.u=+new Date),o.put){x(o);return}else o.get&&r.on.get(o,C);R&&(R.uc=+new Date),g.to.next(o),R&&(R.ua=+new Date),!(o.nts||o.NTS)&&(o.out=d,I.on("out",o),R&&(R.ue=+new Date))}}}function x(o){if(!!o){var g=o._||"",k=g.root=((g.$=o.$||"")._||"").root;if(o["@"]&&g.faith&&!g.miss){o.out=d,k.on("out",o);return}g.latch=k.hatch,g.match=k.hatch=[];var I=o.put,C=g.DBG=o.DBG,j=+new Date;if(E=E||j,!(I["#"]&&I["."])){C&&(C.p=j),g["#"]=o["#"],g.msg=o,g.all=0,g.stun=1;var G=Object.keys(I);console.STAT&&console.STAT(j,((C||g).pk=+new Date)-j,"put sort");var R=0,P,B,M,L,X,V,at;(function nt(dt){if(P!=R){if(P=R,!(M=G[R])){console.STAT&&console.STAT(j,((C||g).pd=+new Date)-j,"put"),w(g);return}(L=I[M])?(at=L._)?M!==at["#"]?V=m+A(M)+"soul not same.":(X=at[">"])||(V=m+A(M)+"no state."):V=m+A(M)+"no meta.":V=m+A(M)+"no node.",B=Object.keys(L||{})}if(V){o.err=g.err=V,w(g);return}var Nt=0,rt;for(dt=dt||0;dt++<9&&(rt=B[Nt++]);)if(rt!=="_"){var pt=L[rt],Et=X[rt];if(h===Et){V=m+A(rt)+"on"+A(M)+"no state.";break}if(!b(pt)){V=m+A(rt)+"on"+A(M)+"bad "+typeof pt+A(pt);break}v(pt,rt,M,Et,o),++N}if((B=B.slice(Nt)).length){u(nt);return}++R,B=null,nt(dt)})()}}}r.on.put=x;function v(o,g,k,I,C){var j=C._||"",G=j.root,R=G.graph,P,B=R[k]||$,M=y(B,g,1),L=B[g],X=j.DBG;(P=console.STAT)&&(!R[k]||!L)&&(P.has=(P.has||0)+1);var V=T();if(I>V){setTimeout(function(){v(o,g,k,I,C)},(P=I-V)>D?D:P),console.STAT&&console.STAT((X||j).Hf=+new Date,P,"future");return}if(!(I<M)&&!(!j.faith&&I===M&&(o===L||_(o)<=_(L))&&!j.miss)){j.stun++;var at=C["#"]+j.all++,nt={toString:function(){return at},_:j};nt.toJSON=nt.toString,G.dup.track(nt)["#"]=C["#"],X&&(X.ph=X.ph||+new Date),G.on("put",{"#":nt,"@":C["@"],put:{"#":k,".":g,":":o,">":I},ok:C.ok,_:j})}}function S(o){var g;(g=(o._||"").DBG)&&(g.pa=+new Date,g.pm=g.pm||+new Date);var k=this,I=k.as,C=I.graph,j=o._,G=o.put,R=G["#"],P=G["."],B=G[":"],M=G[">"];o["#"];var L;(L=j.msg)&&(L=L.put)&&(L=L[R])&&s(L,P,M,B,R),C[R]=s(C[R],P,M,B,R),(L=(I.next||"")[R])&&L.on("in",o),w(j),k.to.next(o)}function w(o,g){var k;if(!o.stop&&!(!o.err&&0<--o.stun)&&(o.stop=1,!!(k=o.root))){var I=o.match;I.end=1,I===k.hatch&&(!(I=o.latch)||I.end?delete k.hatch:k.hatch=I),o.hatch&&o.hatch(),setTimeout.each(o.match,function(C){C&&C()}),!(!(g=o.msg)||o.err||g.err)&&(g.out=d,o.root.on("out",g),a())}}function n(o){var g=o["@"]||"",k;if(!(k=g._)){var I=(I=o.$)&&(I=I._)&&(I=I.root)&&(I=I.dup);if(!(I=I.check(g)))return;o["@"]=I["#"]||o["@"];return}k.acks=(k.acks||0)+1,(k.err=o.err)&&(o["@"]=k["#"],w(k)),k.ok=o.ok||k.ok,!k.stop&&!k.crack&&(k.crack=k.match&&k.match.push(function(){c(k)})),c(k)}function c(o){!o||!o.root||o.stun||o.acks!==o.all||o.root.on("in",{"@":o["#"],err:o.err,ok:o.err?h:o.ok||{"":1}})}var m="Error: Invalid graph!",A=function(o){return" '"+(""+o).slice(0,9)+"...' "},_=JSON.stringify,D=2147483647,T=r.state,N=0,E,a=function(){N>999&&N/-(E-(E=+new Date))>1&&(r.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),a=function(){N=0})}}(),function(){r.on.get=function(x,v){var S=v._,w=x.get,n=w["#"],c=S.graph[n],m=w["."],A=S.next||(S.next={});A[n];var _=x._||{},D=_.DBG=x.DBG;if(D&&(D.g=+new Date),!c)return S.on("get",x);if(m){if(typeof m!="string"||h===c[m])return S.on("get",x);c=s({},m,y(c,m),c[m],n)}c&&d(x,c),S.on("get",x)};function d(x,v){var S=+new Date,w=x._||{},n=w.DBG=x.DBG,c=x["#"],m=f(9),A=Object.keys(v||"").sort(),_=((v||"")._||"")["#"];A.length;var D=x.$._.root,T=v===D.graph[_];console.STAT&&console.STAT(S,((n||w).gk=+new Date)-S,"got keys"),v&&function N(){S=+new Date;for(var E=0,a,o={},g;E<9&&(a=A[E++]);)s(o,a,y(v,a),v[a],_);A=A.slice(E),(g={})[_]=o,o=g;var k;T&&(k=function(){},k.ram=k.faith=!0),g=A.length,console.STAT&&console.STAT(S,-(S-(S=+new Date)),"got copied some"),n&&(n.ga=+new Date),D.on("in",{"@":c,"#":m,put:o,"%":g?m=f(9):h,$:D.$,_:k,DBG:n}),console.STAT&&console.STAT(S,+new Date-S,"got in"),g&&setTimeout.turn(N)}(),v||D.on("in",{"@":x["#"]})}r.on.get.ack=d}(),function(){r.chain.opt=function(d){d=d||{};var x=this,v=x._,S=d.peers||d;return Object.plain(d)||(d={}),Object.plain(v.opt)||(v.opt=d),typeof S=="string"&&(S=[S]),Object.plain(v.opt.peers)||(v.opt.peers={}),S instanceof Array&&(d.peers={},S.forEach(function(w){var n={};n.id=n.url=w,d.peers[w]=v.opt.peers[w]=v.opt.peers[w]||n})),l(d,function w(n){var c=this[n];if(this&&this.hasOwnProperty(n)||typeof c=="string"||Object.empty(c)){this[n]=c;return}c&&c.constructor!==Object&&!(c instanceof Array)||l(c,w)}),v.opt.from=d,r.on("opt",v),v.opt.uuid=v.opt.uuid||function(n){return r.state().toString(36).replace(".","")+String.random(n||12)},x}}();var l=function(d,x){Object.keys(d).forEach(x,d)},f=String.random,u=setTimeout.turn,b=r.valid,y=r.state.is,s=r.state.ify,h,$={},O;r.log=function(){return!r.log.off&&O.log.apply(O,arguments),[].slice.call(arguments).join(" ")},r.log.once=function(d,x,v){return(v=r.log.once)[d]=v[d]||0,v[d]++||r.log(x)},typeof window<"u"&&((window.GUN=window.Gun=r).window=window);try{typeof i<"u"&&(i.exports=r)}catch{}p.exports=r,(r.window||{}).console=(r.window||{}).console||{log:function(){}},(O=console).only=function(d,x){return O.only.i&&d===O.only.i&&O.only.i++&&(O.log.apply(O,arguments)||x)},r.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(p){var r=e("./root");r.chain.back=function(u,b){var y;if(u=u||1,u===-1||u===1/0)return this._.root.$;if(u===1)return(this._.back||this._).$;var s=this,h=s._;if(typeof u=="string"&&(u=u.split(".")),u instanceof Array){var $=0,O=u.length,y=h;for($;$<O;$++)y=(y||l)[u[$]];return f!==y?b?s:y:(y=h.back)?y.$.back(u,b):void 0}if(typeof u=="function"){for(var d,y={back:h};(y=y.back)&&f===(d=u(y,b)););return d}return typeof u=="number"?(h.back||h).$.back(u-1):this};var l={},f})(e,"./back"),e(function(p){var r=e("./root");r.chain.chain=function(w){var n=this,c=n._,m=new(w||n).constructor(n),A=m._,_;return A.root=_=c.root,A.id=++_.once,A.back=n._,A.on=r.on,A.on("in",r.on.in,A),A.on("out",r.on.out,A),m};function l(w){var n,c=this.as,m=c.back,A=c.root,_;if(w.$||(w.$=c.$),this.to.next(w),c.err){c.on("in",{put:c.put=h,$:c.$});return}if(n=w.get){if(A.pass&&(A.pass[c.id]=c),c.lex&&Object.keys(c.lex).forEach(function(D){_[D]=c.lex[D]},_=w.get=w.get||{}),n["#"]||c.soul){if(n["#"]=n["#"]||c.soul,w["#"]||(w["#"]=$(9)),m=A.$.get(n["#"])._,n=n["."]){if(d(m.put,n)&&(_=m.ask&&m.ask[n],(m.ask||(m.ask={}))[n]=m.$.get(n)._,m.on("in",{get:n,put:{"#":m.soul,".":n,":":m.put[n],">":v(A.graph[m.soul],n)}}),_))return}else{if(_=m.ask&&m.ask[""],(m.ask||(m.ask={}))[""]=m,h!==m.put&&(m.on("in",m),_))return;w.$=m.$}return A.ask(y,w),A.on("in",w)}if(n["."])return c.get?(w={get:{".":c.get},$:c.$},(m.ask||(m.ask={}))[c.get]=w.$._,m.on("out",w)):(w={get:c.lex?w.get:{},$:c.$},m.on("out",w));if((c.ask||(c.ask={}))[""]=c,c.get)return n["."]=c.get,(m.ask||(m.ask={}))[c.get]=w.$._,m.on("out",w)}return m.on("out",w)}r.on.out=l;function f(w,n){n=n||this.as;var c=n.root,m=w.$||(w.$=n.$),A=(m||"")._||s,_=w.put||"",D=_["#"],T=_["."],N=h!==_["="]?_["="]:_[":"],E=_[">"]||-1/0,a;if(h!==w.put&&(h===_["#"]||h===_["."]||h===_[":"]&&h===_["="]||h===_[">"])){if(!O(_)){if(!(D=((_||"")._||"")["#"])){console.log("chain not yet supported for",_,"...",w,n);return}return m=n.root.$.get(D),setTimeout.each(Object.keys(_).sort(),function(o){o=="_"||h===(E=v(_,o))||n.on("in",{$:m,put:{"#":D,".":o,"=":_[o],">":E},VIA:w})})}n.on("in",{$:A.back.$,put:{"#":D=A.back.soul,".":T=A.has||A.get,"=":_,">":v(A.back.put,T)},via:w});return}(w.seen||"")[n.id]||((w.seen||(w.seen=function(){}))[n.id]=n,n!==A&&(Object.keys(w).forEach(function(o){_[o]=w[o]},_={}),_.get=n.get||_.get,!n.soul&&!n.has?_.$$$=_.$$$||n.$:A.soul&&(_.$=n.$,_.$$=_.$$||A.$),w=_),b(w,n),(n.soul||w.$$)&&E>=v(c.graph[D],T)&&((_=c.$.get(D)._).put=S(_.put,T,E,N,D)),!A.soul&&E>=v(c.graph[D],T)&&(a=(c.$.get(D)._.next||"")[T])&&(a.put=N,typeof(_=O(N))=="string"&&(a.put=c.$.get(_)._.put||N)),this.to&&this.to.next(w),n.any&&setTimeout.each(Object.keys(n.any),function(o){(o=n.any[o])&&o(w)},0,99),n.echo&&setTimeout.each(Object.keys(n.echo),function(o){(o=n.echo[o])&&o.on("in",w)},0,99),((w.$$||"")._||A).soul&&(a=n.next)&&(a=a[T])&&(_={},Object.keys(w).forEach(function(o){_[o]=w[o]}),_.$=(w.$$||w.$).get(_.get=T),delete _.$$,delete _.$$$,a.on("in",_)),u(w,n))}r.on.in=f;function u(w,n){if(n=n||this.as||w.$._,!(w.$$&&this!==r.on)&&!(!w.put||n.soul)){var c=w.put||"",m=c["="]||c[":"],T,A=n.root,_=A.$.get(c["#"]).get(c["."])._;if(typeof(m=O(m))!="string"){this===r.on&&((_.echo||(_.echo={}))[n.id]=n);return}if(!((_.echo||(_.echo={}))[n.id]&&!(A.pass||"")[n.id])){if(T=A.pass){if(T[m+n.id])return;T[m+n.id]=1}(_.echo||(_.echo={}))[n.id]=n,n.has&&(n.link=m);var D=A.$.get(_.link=m)._;(D.echo||(D.echo={}))[_.id]=_;var T=n.ask||"";(T[""]||n.lex)&&D.on("out",{get:{"#":m}}),setTimeout.each(Object.keys(T),function(N,E){!N||!(E=T[N])||E.on("out",{get:{"#":m,".":N}})},0,99)}}}r.on.link=u;function b(w,n){var c=w.put||"",m=h!==c["="]?c["="]:c[":"],A=n.root,_,D;if(h===m){if(n.soul&&h!==n.put||(D=(w.$$||w.$||"")._||"",w["@"]&&(h!==D.put||h!==n.put)))return;(_=n.link||w.linked)&&delete(A.$.get(_)._.echo||"")[n.id],n.has&&(n.link=null),n.put=h,setTimeout.each(Object.keys(n.next||""),function(T,N){!(N=n.next[T])||(_&&delete(A.$.get(_).get(T)._.echo||"")[N.id],N.on("in",{get:T,put:h,$:N.$}))},0,99);return}n.soul||w.$$||(_=O(m),D=w.$._||"",!((_===D.link||n.has&&!D.link)&&!((A.pass||"")[n.id]&&typeof _!="string"))&&(delete(D.echo||"")[n.id],b({get:n.get,put:h,$:w.$,linked:w.linked=w.linked||D.link},n)))}r.on.unlink=b;function y(w,n){var c=this.as,m=c.$._;m.root;var A=c.get||"",_=(w.put||"")[A["#"]]||"";if(!w.put||typeof A["."]=="string"&&h===_[A["."]]){if(h!==m.put||!m.soul&&!m.has)return;m.ack=(m.ack||0)+1,m.on("in",{get:m.get,put:m.put=h,$:m.$,"@":w["@"]});return}(w._||{}).miss=1,r.on.put(w)}var s={},h,$=String.random,O=r.valid,d=function(w,n){return w&&Object.prototype.hasOwnProperty.call(w,n)},x=r.state,v=x.is,S=x.ify})(e,"./chain"),e(function(p){var r=e("./root");r.chain.get=function(h,$,O){var d,x;if(typeof h=="string"){if(h.length==0)return(d=this.chain())._.err={err:r.log("0 length key!",h)},$&&$.call(d,d._.err),d;var v=this,S=v._,w=S.next||b;(d=w[h])||(d=h&&l(h,v)),d=d&&d.$}else if(typeof h=="function"){let T=function(N,E,a){if(!T.stun&&!((j=c.pass)&&!j[m])){var o=N.$._,g=(N.$$||"")._,k=(g||o).put,I=!o.has&&!o.soul,C={},j;if((I||s===k)&&(k=s===((j=N.put)||"")["="]?s===(j||"")[":"]?j:j[":"]:j["="]),typeof(j=r.valid(k))=="string"&&(k=s===(j=c.$.get(j)._.put)?n.not?s:k:j),!(n.not&&s===k)){if(s===n.stun){if((j=c.stun)&&j.on&&(S.$.back(function(G){if(j.on(""+G.id,C={}),(C.run||0)<T.id)return C}),!C.run&&j.on(""+o.id,C={}),!C.run&&g&&j.on(""+g.id,C={}),T.id>C.run&&((!C.stun||C.stun.end)&&(C.stun=j.on("stun"),C.stun=C.stun&&C.stun.last),C.stun&&!C.stun.end))){(C.stun.add||(C.stun.add={}))[m]=function(){T(N,E,1)};return}if(s===k&&(a=0),(j=c.hatch)&&!j.end&&s===n.hatch&&!a){if(A[o.$._.id])return;A[o.$._.id]=1,j.push(function(){T(N,E,1)});return}A={}}if(c.pass){if(c.pass[m+o.id])return;c.pass[m+o.id]=1}if(n.on){n.ok.call(o.$,k,o.get,N,E||T);return}if(n.v2020){n.ok(N,E||T);return}Object.keys(N).forEach(function(G){j[G]=N[G]},j={}),N=j,N.put=k,n.ok.call(n.as,N,E||T)}}};var _=T;if($===!0)return f(this,h,$,O),this;d=this;var S=d._,n=$||{},c=S.root,m;n.at=S,n.ok=h;var A={};return T.at=S,(S.any||(S.any={}))[m=String.random(7)]=T,T.off=function(){T.stun=1,S.any&&delete S.any[m]},T.rid=u,T.id=n.run||++c.once,x=c.pass,(c.pass={})[m]=1,n.out=n.out||{get:{}},S.on("out",n.out),c.pass=x,d}else{if(typeof h=="number")return this.get(""+h,$,O);if(typeof(x=y(h))=="string")return this.get(x,$,O);(x=this.get.next)&&(d=x(this,h))}return d?($&&typeof $=="function"&&d.get($,O),d):((d=this.chain())._.err={err:r.log("Invalid get request!",h)},$&&$.call(d,d._.err),d)};function l(h,$){var O=$._,d=O.next,x=$.chain(),v=x._;return d||(d=O.next={}),d[v.get=h]=v,$===O.root.$?v.soul=h:(O.soul||O.has)&&(v.has=h),v}function f(h,$,O,d){var x=h._,v=0,S;return(S=x.soul||x.link)?$(S,d,x):x.jam?x.jam.push([$,d]):(x.jam=[[$,d]],h.get(function(n,c){if(!(s===n.put&&!x.root.opt.super&&(S=Object.keys(x.root.opt.peers).length)&&++v<=S)){c.rid(n);var m=(m=n.$)&&m._||{},A=0,_;for(S=x.jam,delete x.jam;_=S[A++];){var D=_[0];_=_[1],D&&D(m.link||m.soul||r.valid(n.put)||((n.put||{})._||{})["#"],_,n,c)}}},{out:{get:{".":!0}}}),h)}function u(h){var $=this.at||this.on;if(!h||$.soul||$.has)return this.off();if(!!(h=(h=(h=h.$||h)._||h).id)){$.map;var O;if((O=this.seen||(this.seen={}))[h])return!0;O[h]=!0}}var b={},y=r.valid,s})(e,"./get"),e(function(p){var r=e("./root");r.chain.put=function(d,x,v){var S=this,w=S._,n=w.root;v=v||{},v.root=w.root,v.run||(v.run=n.once),l(v,w.id),v.ack=v.ack||x,v.via=v.via||S,v.data=v.data||d,v.soul||(v.soul=w.soul||typeof x=="string"&&x);var c=v.state=v.state||r.state();return typeof d=="function"?(d(function(m){v.data=m,S.put(y,y,v)}),S):v.soul?(v.$=n.$.get(v.soul),v.todo=[{it:v.data,ref:v.$}],v.turn=v.turn||h,v.ran=v.ran||f,function m(){var A=v.todo,_=A.pop(),D=_.it;_.ref&&_.ref._.id;var T,N,E,a,o;if(l(v,_.ref),(a=_.todo)&&(N=a.pop(),D=D[N],a.length&&A.push(_)),N&&(A.path||(A.path=[])).push(N),!(T=$(D))&&!(o=r.is(D))){if(!Object.plain(D)){f.err(v,"Invalid data: "+b(D)+" at "+(v.via.back(function(j){j.get&&a.push(j.get)},a=[])||a.join("."))+"."+(A.path||[]).join("."));return}for(var g=v.seen||(v.seen=[]),k=g.length;k--;)if(D===(a=g[k]).it){T=D=a.link;break}}if(N&&T)_.node=O(_.node,N,c,D);else{let j=function(G,R){var P=E.link["#"];R&&(R.off(),R.rid(G));var B=P||G.soul||(a=(G.$$||G.$)._||"").soul||a.link||((a=a.put||"")._||"")["#"]||a["#"]||((a=G.put||"")&&G.$$?a["#"]:(a["="]||a[":"]||"")["#"]);if(!P&&l(v,G.$),!B&&!_.link["#"]){(_.wait||(_.wait=[])).push(function(){j(G,R)});return}B||(B=[],(G.$$||G.$).back(function(M){if(a=M.soul||M.link)return B.push(a);B.push(M.get)}),B=B.reverse().join("/")),E.link["#"]=B,!o&&(((v.graph||(v.graph={}))[B]=E.node||(E.node={_:{}}))._["#"]=B),delete v.wait[I],E.wait&&setTimeout.each(E.wait,function(M){M&&M()}),v.ran(v)};var C=j;if(!v.seen){f.err(v,"Data at root of graph must be a node (an object).");return}v.seen.push(E={it:D,link:{},todo:o?[]:Object.keys(D).sort().reverse(),path:(A.path||[]).slice(),up:_}),_.node=O(_.node,N,c,E.link),!o&&E.todo.length&&A.push(E);var I=v.seen.length;(v.wait||(v.wait={}))[I]="",a=(E.ref=o?D:N?_.ref.get(N):_.ref)._,(a=D&&(D._||"")["#"]||a.soul||a.link)?j({soul:a}):E.ref.get(j,{run:v.run,v2020:1,out:{get:{".":" "}}})}if(!A.length)return v.ran(v);v.turn(m)}(),S):(u(v),S)};function l(d,x){if(!!x){x=(x._||"").id||x;var v=d.root.stun||(d.root.stun={on:r.on}),S={},w;d.stun||(d.stun=v.on("stun",function(){})),(w=v.on(""+x))&&w.the.last.next(S),!(S.run>=d.run)&&v.on(""+x,function(n){if(d.stun.end){this.off(),this.to.next(n);return}n.run=n.run||d.run,n.stun=n.stun||d.stun})}}function f(d){if(d.err){f.end(d.stun,d.root);return}if(!(d.todo.length||d.end||!Object.empty(d.wait))){d.end=1;var x=d.$.back(-1)._,v=x.root,S=x.ask(function(m){v.on("ack",m),m.err&&!m.lack&&r.log(m),++w>(d.acks||0)&&this.off(),d.ack&&d.ack(m,this)},d.opt),w=0,n=d.stun,c;(c=function(){!n||(f.end(n,v),setTimeout.each(Object.keys(n=n.add||""),function(m){(m=n[m])&&m()}))}).hatch=c,d.ack&&!d.ok&&(d.ok=d.acks||9),d.via._.on("out",{put:d.out=d.graph,ok:d.ok&&{"@":d.ok+1},opt:d.opt,"#":S,_:c})}}f.end=function(d,x){d.end=s,d.the.to===d&&d===d.the.last&&delete x.stun,d.off()},f.err=function(d,x){(d.ack||s).call(d,d.out={err:d.err=r.log(x)}),d.ran(d)};function u(d){var x=d.via._,v;d.via=d.via.back(function(S){if(S.soul||!S.get)return S.$;v=d.data,(d.data={})[S.get]=v}),(!d.via||!d.via._.soul)&&(d.via=x.root.$.get(((d.data||"")._||"")["#"]||x.$.back("opt.uuid")())),d.via.put(d.data,d.ack,d)}function b(d,x){return d&&(x=d.constructor)&&x.name||typeof d}var y,s=function(){},h=setTimeout.turn,$=r.valid,O=r.state.ify})(e,"./put"),e(function(p){var r=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),p.exports=r})(e,"./index"),e(function(p){var r=e("./index");r.chain.on=function(u,b,y,s){var h=this,$=h._;$.root;var O;if(typeof u=="string")return b?(O=$.on(u,b,y||$,s),y&&y.$&&(y.subs||(y.subs=[])).push(O),h):$.on(u);var d=b;return(d=d===!0?{change:!0}:d||{}).not=1,d.on=1,h.get(u,d),h},r.chain.once=function(u,b){if(b=b||{},!u)return l(this);var y=this,s=y._,h=s.root;s.put;var $=String.random(7),O;return y.get(function(d,x,v,S){var w=this,n=w._,c=n.one||(n.one={});if(S.stun||c[$]==="")return;if((O=r.valid(d))===!0){m();return}if(typeof O=="string")return;clearTimeout((s.one||"")[$]),clearTimeout(c[$]),c[$]=setTimeout(m,b.wait||99);function m(A){if(!n.has&&!n.soul&&(n={put:d,get:x}),f===(O=n.put)&&(O=((v.$$||"")._||"").put),typeof r.valid(O)=="string"&&(O=h.$.get(O)._.put,O===f&&!A)){c[$]=setTimeout(function(){m(1)},b.wait||99);return}S.stun||c[$]!==""&&(c[$]="",(s.soul||s.has)&&S.off(),u.call(w,O,n.get),clearTimeout(c[$]))}},{on:1}),y};function l(u,b,y){return r.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(y=u.chain())._.nix=u.once(function(s,h){y._.on("in",this._)}),y._.lex=u._.lex,y}r.chain.off=function(){var u=this,b=u._,y,s=b.back;if(!!s)return b.ack=0,(y=s.next)&&y[b.get]&&delete y[b.get],(y=s.ask)&&delete y[b.get],(y=s.put)&&delete y[b.get],(y=b.soul)&&delete s.root.graph[y],(y=b.map)&&Object.keys(y).forEach(function(h,$){$=y[h],$.link&&s.root.$.get($.link).off()}),(y=b.next)&&Object.keys(y).forEach(function(h,$){$=y[h],$.$.off()}),b.on("off",{}),u};var f})(e,"./on"),e(function(p){var r=e("./index"),l=r.chain.get.next;r.chain.get.next=function(y,s){var h;return Object.plain(s)?(h=((h=s["#"])||"")["="]||h)?y.get(h):((h=y.chain()._).lex=s,y.on("in",function($){String.match($.get||($.put||"")["."],s["."]||s["#"]||s)&&h.on("in",$),this.to.next($)}),h.$):(l||u)(y,s)},r.chain.map=function(y,s,h){var $=this,O=$._,d,x;return Object.plain(y)&&(d=y["."]?y:{".":y},y=b),y?(r.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),x=$.chain(),$.map().on(function(v,S,w,n){var c=(y||u).call(this,v,S,w,n);if(b!==c){if(v===c)return x._.on("in",w);if(r.is(c))return x._.on("in",c._);var m={};Object.keys(w.put).forEach(function(A){m[A]=w.put[A]},m),m["="]=c,x._.on("in",{get:S,put:m})}}),x):((x=O.each)||((O.each=x=$.chain())._.lex=d||x._.lex||O.lex,x._.nix=$.back("nix"),$.on("in",f,x._)),x)};function f(y){this.to.next(y);var s=this.as,h=y.$,$=h._,O=y.put,d;!$.soul&&!y.$$||(d=s.lex)&&!String.match(y.get||(O||"")["."],d["."]||d["#"]||d)||r.on.link(y,s)}var u=function(){},b})(e,"./map"),e(function(p){var r=e("./index");r.chain.set=function(l,f,u){var b=this,y=b.back(-1),s,h;return f=f||function(){},u=u||{},u.item=u.item||l,(s=((l||"")._||"")["#"])&&((l={})["#"]=s),typeof(h=r.valid(l))=="string"?b.get(s=h).put(l,f,u):r.is(l)?(b.put(function($){l.get(function(O,d,x){if(!O)return f.call(b,{err:r.log('Only a node can be linked! Not "'+x.put+'"!')});(h={})[O]={"#":O},$(h)},!0)}),l):(Object.plain(l)&&(l=y.get(s=b.back("opt.uuid")()).put(l)),b.get(s||y.back("opt.uuid")(7)).put(l,f,u))}})(e,"./set"),e(function(p){e("./shim");var r=function(){},l=JSON.parseAsync||function(y,s,h){var $,O=+new Date;try{s($,JSON.parse(y,h),f.sucks(+new Date-O))}catch(d){s(d)}},f=JSON.stringifyAsync||function(y,s,h,$){var O,d=+new Date;try{s(O,JSON.stringify(y,h,$),f.sucks(+new Date-d))}catch(x){s(x)}};f.sucks=function(y){y>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),f.sucks=r)};function u(y){var s=function(){},h=y.opt||{};h.log=h.log||console.log,h.gap=h.gap||h.wait||0,h.max=h.max||(h.memory?h.memory*999*999:3e8)*.3,h.pack=h.pack||h.max*.01*.01,h.puff=h.puff||9;var $=setTimeout.turn||setTimeout,O=y.dup,d=O.check,x=O.track,v=s.hear=function(n,c){if(!!n){if(h.max<=n.length)return s.say({dam:"!",err:"Message too big!"},c);s===this&&(v.d+=n.length||0,++v.c);var m=c.SH=+new Date,A=n[0],_;if(A==="["){l(n,function(D,T){if(D||!T)return s.say({dam:"!",err:"DAM JSON parse error."},c);console.STAT&&console.STAT(+new Date,T.length,"# on hear batch");var N=h.puff;(function E(){for(var a=+new Date,o=0,g;o<N&&(g=T[o++]);)s.hear(g,c);T=T.slice(o),console.STAT&&console.STAT(a,+new Date-a,"hear loop"),S(c),T.length&&$(E,0)})()}),n="";return}if(A==="{"||(n["#"]||Object.plain(n))&&(_=n)){if(_)return v.one(_,c,m);l(n,function(D,T){if(D||!T)return s.say({dam:"!",err:"DAM JSON parse error."},c);v.one(T,c,m)});return}}};v.one=function(n,c,E){var A,_,D,T,N;if(n.DBG&&(n.DBG=N={DBG:n.DBG}),N&&(N.h=E),N&&(N.hp=+new Date),(A=n["#"])||(A=n["#"]=String.random(9)),!(D=d(A))&&(_=n["##"],!(_&&(D=n["@"]||n.get&&A)&&O.check(T=D+_)))){if((n._=function(){}).via=s.leap=c,(D=n["><"])&&typeof D=="string"&&D.slice(0,99).split(",").forEach(function(a){this[a]=1},n._.yo={}),D=n.dam){(D=s.hear[D])&&D(n,c,y),x(A);return}(D=n.ok)&&(n._.near=D["/"]);var E=+new Date;N&&(N.is=E),c.SI=A,y.on("in",s.last=n),N&&(N.hd=+new Date),console.STAT&&console.STAT(E,+new Date-E,n.get?"msg get":n.put?"msg put":"msg"),(D=x(A)).via=c,n.get&&(D.it=n),T&&x(T),s.leap=s.last=null}},v.c=v.d=0,function(){var n=0,c;s.hash=function(_,D){var T,N,E,a=+new Date;f(_.put,function o(g,k){var I=(N||(N=E=k||"")).slice(0,32768);if(T=String.hash(I,T),N=N.slice(32768),N){$(o,0);return}console.STAT&&console.STAT(a,+new Date-a,"say json+hash"),_._.$put=E,_["##"]=T,s.say(_,D),delete _._.$put},m)};function m(_,D){var T;return D instanceof Object?(Object.keys(D).sort().forEach(A,{to:T={},on:D}),T):D}function A(_){this.to[_]=this.on[_]}s.say=function(_,D){var T;if((T=this)&&(T=T.to)&&T.next&&T.next(_),!_)return!1;var N,E,a=_["@"],o=_._||(_._=function(){}),g=_.DBG,k=+new Date;if(o.y=o.y||k,D||g&&(g.y=k),(N=_["#"])||(N=_["#"]=String.random(9)),!c&&x(N),!_["##"]&&b!==_.put&&!o.via&&a){s.hash(_,D);return}if(!D&&a&&(D=(T=O.s[a])&&(T.via||(T=T.it)&&(T=T._)&&T.via)||(T=s.last)&&a===T["#"]&&s.leap),!D&&a)return O.s[a]?void 0:(console.STAT&&console.STAT(+new Date,++n,"total no peer to ack to"),!1);if(!D&&s.way)return s.way(_);if(g&&(g.yh=+new Date),!(E=o.raw)){s.raw(_,D);return}if(g&&(g.yr=+new Date),!D||!D.id){if(!Object.plain(D||h.peers))return!1;var k=+new Date;h.puff;var I=h.peers,C=Object.keys(D||h.peers||{});console.STAT&&console.STAT(k,+new Date-k,"peer keys"),function R(){var P=+new Date;c=1;var B=o.raw;o.raw=E;for(var M=0,L;M<9&&(L=(C||"")[M++]);)!(L=I[L]||(D||"")[L])||s.say(_,L);o.raw=B,c=0,C=C.slice(M),console.STAT&&console.STAT(P,+new Date-P,"say loop"),C.length&&($(R,0),a&&x(a))}();return}if(!D.wire&&s.wire&&s.wire(D),N!==D.last){if(D.last=N,D===o.via||(T=o.yo)&&(T[D.url]||T[D.pid]||T[D.id]))return!1;if(console.STAT&&console.STAT(k,((g||o).yp=+new Date)-(o.y||k),"say prep"),!c&&a&&x(a),D.batch){if(D.tail=(T=D.tail||0)+E.length,D.tail<=h.pack){D.batch+=(T?",":"")+E;return}S(D)}D.batch="[";var j=+new Date;setTimeout(function(){console.STAT&&console.STAT(j,+new Date-j,"0ms TO"),S(D)},h.gap),w(E,D),console.STAT&&a===D.SI&&console.STAT(k,+new Date-D.SH,"say ack")}},s.say.c=s.say.d=0,s.raw=function(_,D){if(!_)return"";var T=_._||{},N,E;if(E=T.raw)return E;if(typeof _=="string")return _;var a=_["##"],o=_["@"];if(a&&o){if(!T.via&&d(o+a))return!1;if((E=(O.s[o]||"").it)||(E=s.last)&&o===E["#"]){if(a===E["##"])return!1;E["##"]||(E["##"]=a)}}if(!_.dam&&!_["@"]){var g=0,k=[];E=h.peers;for(var I in E){var C=E[I];if(k.push(C.url||C.pid||C.id),++g>6)break}g>1&&(_["><"]=k.join())}if(_.put&&(E=_.ok)&&(_.ok={"@":(E["@"]||1)-1,"/":E["/"]==_._.near?s.near:E["/"]}),N=T.$put){E={},Object.keys(_).forEach(function(G){E[G]=_[G]}),E.put=":])([:",f(E,function(G,R){if(!G){var P=+new Date;E=R.indexOf('"put":":])([:"'),j(b,R=R.slice(0,E+6)+N+R.slice(E+14)),console.STAT&&console.STAT(P,+new Date-P,"say slice")}});return}f(_,j);function j(G,R){G||(T.raw=R,s.say(_,D))}}}();function S(n){var c=n.batch,m=typeof c=="string";if(m&&(c+="]"),n.batch=n.tail=null,!!c&&!(m?3>c.length:!c.length)){if(!m)try{c=c.length===1?c[0]:JSON.stringify(c)}catch(A){return h.log("DAM JSON stringify error",A)}!c||w(c,n)}}function w(n,c){try{var m=c.wire;c.say?c.say(n):m.send&&m.send(n),s.say.d+=n.length||0,++s.say.c}catch{(c.queue=c.queue||[]).push(n)}}return s.near=0,s.hi=function(n){var c=n.wire,m;if(!c){s.wire(n.length&&{url:n,id:n}||n);return}n.id?h.peers[n.url||n.id]=n:(m=n.id=n.id||n.url||String.random(9),s.say({dam:"?",pid:y.opt.pid},h.peers[m]=n),delete O.s[n.last]),n.met||(s.near++,n.met=+new Date,y.on("hi",n)),m=n.queue,n.queue=[],setTimeout.each(m||[],function(A){w(A,n)},0,9)},s.bye=function(n){n.met&&--s.near,delete n.met,y.on("bye",n);var c=+new Date;c=c-(n.met||c),s.bye.time=((s.bye.time||c)+c)/2},s.hear["!"]=function(n,c){h.log("Error:",n.err)},s.hear["?"]=function(n,c){n.pid&&(c.pid||(c.pid=n.pid),n["@"])||(s.say({dam:"?",pid:h.pid,"@":n["#"]},c),delete O.s[c.last])},s.hear.mob=function(n,c){if(!!n.peers){var m=Object.keys(n.peers),A=m[Math.random()*m.length>>0];!A||(s.bye(c),s.hi(A))}},y.on("create",function(n){n.opt.pid=n.opt.pid||String.random(9),this.to.next(n),n.on("out",s.say)}),y.on("bye",function(n,c){n=h.peers[n.id||n]||n,this.to.next(n),n.bye?n.bye():(c=n.wire)&&c.close&&c.close(),delete h.peers[n.id],n.wire=null}),y.on("bye",function(n,c){this.to.next(n),(c=console.STAT)&&(c.peers=s.near),(c=n.url)&&setTimeout(function(){},h.lack||9e3)}),y.on("hi",function(n,c){if(this.to.next(n),(c=console.STAT)&&(c.peers=s.near),!h.super){var m=Object.keys(y.next||"");m.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(m,function(A){var _=y.next[A];if(h.super||(_.ask||"")[""]){s.say({get:{"#":A}},n);return}setTimeout.each(Object.keys(_.ask||""),function(D){!D||s.say({"##":String.hash((y.graph[A]||"")[D]),get:{"#":A,".":D}},n)})})}}),s}var b;try{p.exports=u}catch{}})(e,"./mesh"),e(function(p){var r=e("./index");r.Mesh=e("./mesh"),r.on("opt",function(f){if(this.to.next(f),f.once)return;var u=f.opt;if(u.WebSocket===!1)return;var b=r.window||{},y=u.WebSocket||b.WebSocket||b.webkitWebSocket||b.mozWebSocket;if(!y)return;u.WebSocket=y;var s=u.mesh=u.mesh||r.Mesh(f);s.wire||u.wire,s.wire=u.wire=h;function h(x){try{if(!x||!x.url)return S&&S(x);var v=x.url.replace(/^http/,"ws"),S=x.wire=new u.WebSocket(v);return S.onclose=function(){O(x),u.mesh.bye(x)},S.onerror=function(w){O(x)},S.onopen=function(){u.mesh.hi(x)},S.onmessage=function(w){!w||u.mesh.hear(w.data||w,x)},S}catch{u.mesh.bye(x)}}setTimeout(function(){!u.super&&f.on("out",{dam:"hi"})},1);var $=2*999;function O(x){clearTimeout(x.defer),u.peers[x.url]&&(d&&x.retry<=0||(x.retry=(x.retry||u.retry+1||60)-(-x.tried+(x.tried=+new Date)<$*4?1:0),x.defer=setTimeout(function v(){if(d&&d.hidden)return setTimeout(v,$);h(x)},$)))}var d=""+l!=typeof document&&document});var l})(e,"./websocket"),e(function(p){if(!(typeof Gun>"u")){var r=function(){},l;try{l=(Gun.window||r).localStorage}catch{}l||(Gun.log("Warning: No localStorage exists to persist data to!"),l={setItem:function(u,b){this[u]=b},removeItem:function(u){delete this[u]},getItem:function(u){return this[u]}});var f=JSON.stringifyAsync||function(u,b,y,s){var h;try{b(h,JSON.stringify(u,y,s))}catch($){b($)}};Gun.on("create",function u(b){this.to.next(b);var y=b.opt;b.graph;var s=[],h,$,O,d;if(y.localStorage===!1)return;y.prefix=y.file||"gun/";try{h=u[y.prefix]=u[y.prefix]||JSON.parse(O=l.getItem(y.prefix))||{}}catch{h=u[y.prefix]={}}O=(O||"").length,b.on("get",function(v){this.to.next(v);var S=v.get,w,n,c,m;!S||!(w=S["#"])||(n=h[w]||m,n&&(c=S["."])&&!Object.plain(c)&&(n=Gun.state.ify({},c,Gun.state.is(n,c),n[c],w)),Gun.on.get.ack(v,n))}),b.on("put",function(v){this.to.next(v);var S=v.put,w=S["#"],n=S["."],c=v["#"],m=v.ok||"";if(h[w]=Gun.state.ify(h[w],n,S[">"],S[":"],w),d&&O>4999880){b.on("in",{"@":c,err:"localStorage max!"});return}!v["@"]&&(!v._.via||Math.random()<m["@"]/m["/"])&&s.push(c),!$&&($=setTimeout(x,9+O/333))});function x(){if(!s.length&&((setTimeout.turn||"").s||"").length){setTimeout(x,99);return}var v=s;clearTimeout($),$=!1,s=[],f(h,function(S,w){try{!S&&l.setItem(y.prefix,w)}catch(n){S=d=n||"localStorage failure"}S&&(Gun.log(S+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),b.on("localStorage:error",{err:S,get:y.prefix,put:h})),O=w.length,setTimeout.each(v,function(n){b.on("in",{"@":n,err:S,ok:0})},0,99)})}})}})(e,"./localStorage")})(),function(){var E;if(""+E!=typeof Gun){var e=function(a){console.warn("Warning! Deprecated internal utility will break in next version:",a)},i=Gun;i.fn=i.fn||{is:function(a){return e("fn"),!!a&&typeof a=="function"}},i.bi=i.bi||{is:function(a){return e("bi"),a instanceof Boolean||typeof a=="boolean"}},i.num=i.num||{is:function(a){return e("num"),!p(a)&&(a-parseFloat(a)+1>=0||a===1/0||a===-1/0)}},i.text=i.text||{is:function(a){return e("text"),typeof a=="string"}},i.text.ify=i.text.ify||function(a){return e("text.ify"),i.text.is(a)?a:typeof JSON<"u"?JSON.stringify(a):a&&a.toString?a.toString():a},i.text.random=i.text.random||function(a,o){e("text.random");var g="";for(a=a||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";a>0;)g+=o.charAt(Math.floor(Math.random()*o.length)),a--;return g},i.text.match=i.text.match||function(a,o){var g,k;return e("text.match"),typeof a!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},g=o["="]||o["*"]||o[">"]||o["<"],a===g?!0:k!==o["="]?!1:(g=o["*"]||o[">"]||o["<"],a.slice(0,(g||"").length)===g?!0:k!==o["*"]?!1:k!==o[">"]&&k!==o["<"]?a>=o[">"]&&a<=o["<"]:k!==o[">"]&&a>=o[">"]||k!==o["<"]&&a<=o["<"]))},i.text.hash=i.text.hash||function(a,o){if(e("text.hash"),typeof a=="string"){if(o=o||0,!a.length)return o;for(var g=0,k=a.length,I;g<k;++g)I=a.charCodeAt(g),o=(o<<5)-o+I,o|=0;return o}},i.list=i.list||{is:function(a){return e("list"),a instanceof Array}},i.list.slit=i.list.slit||Array.prototype.slice,i.list.sort=i.list.sort||function(a){return e("list.sort"),function(o,g){return!o||!g?0:(o=o[a],g=g[a],o<g?-1:o>g?1:0)}},i.list.map=i.list.map||function(a,o,g){return e("list.map"),T(a,o,g)},i.list.index=1,i.obj=i.boj||{is:function(a){return e("obj"),a?a instanceof Object&&a.constructor===Object||Object.prototype.toString.call(a).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},i.obj.put=i.obj.put||function(a,o,g){return e("obj.put"),(a||{})[o]=g,a},i.obj.has=i.obj.has||function(a,o){return e("obj.has"),a&&Object.prototype.hasOwnProperty.call(a,o)},i.obj.del=i.obj.del||function(a,o){if(e("obj.del"),!!a)return a[o]=null,delete a[o],a},i.obj.as=i.obj.as||function(a,o,g,k){return e("obj.as"),a[o]=a[o]||(k===g?{}:g)},i.obj.ify=i.obj.ify||function(a){if(e("obj.ify"),c(a))return a;try{a=JSON.parse(a)}catch{a={}}return a},function(){var a;function o(g,k){A(this,k)&&a!==this[k]||(this[k]=g)}i.obj.to=i.obj.to||function(g,k){return e("obj.to"),k=k||{},T(g,o,k),k}}(),i.obj.copy=i.obj.copy||function(a){return e("obj.copy"),a&&JSON.parse(JSON.stringify(a))},function(){function a(o,g){var k=this.n,I;if(!(k&&(g===k||c(k)&&A(k,g)))&&I!==g)return!0}i.obj.empty=i.obj.empty||function(o,g){return e("obj.empty"),o?!T(o,a,{n:g}):!0}}(),function(){function a(k,I){if(arguments.length===2){a.r=a.r||{},a.r[k]=I;return}a.r=a.r||[],a.r.push(k)}var o=Object.keys,g;Object.keys=Object.keys||function(k){return g(k,function(I,C,j){j(C)})},i.obj.map=g=i.obj.map||function(k,I,C){e("obj.map");var j,G=0,R,P,B,M,L=typeof I=="function";if(a.r=j,o&&c(k)&&(B=o(k),M=!0),C=C||{},p(k)||B)for(R=(B||k).length;G<R;G++){var X=G+i.list.index;if(L){if(P=M?I.call(C,k[B[G]],B[G],a):I.call(C,k[G],X,a),P!==j)return P}else if(I===k[M?B[G]:G])return B?B[G]:X}else for(G in k)if(L){if(A(k,G)&&(P=C?I.call(C,k[G],G,a):I(k[G],G,a),P!==j))return P}else if(I===k[G])return G;return L?a.r:i.list.index?0:-1}}(),i.time=i.time||{},i.time.is=i.time.is||function(a){return e("time"),a?a instanceof Date:+new Date().getTime()};var w=i.fn.is,p=i.list.is,n=i.obj,c=n.is,A=n.has,T=n.map,r={};r.is=function(a){return e("val.is"),a===E?!1:a===null?!0:a===1/0?!1:u(a)||f(a)||d(a)?!0:r.link.is(a)||!1},r.link=r.rel={_:"#"},function(){r.link.is=function(o){if(e("val.link.is"),o&&o[l]&&!o._&&c(o)){var g={};if(T(o,a,g),g.id)return g.id}return!1};function a(o,g){var k=this;if(k.id)return k.id=!1;if(g==l&&u(o))k.id=o;else return k.id=!1}}(),r.link.ify=function(a){return e("val.link.ify"),D({},l,a)},i.obj.has._=".";var l=r.link._,E,f=i.bi.is,d=i.num.is,u=i.text.is,n=i.obj,c=n.is,D=n.put,T=n.map;i.val=i.val||r;var b={_:"_"};b.soul=function(a,o){return e("node.soul"),a&&a._&&a._[o||h]},b.soul.ify=function(a,o){return e("node.soul.ify"),o=typeof o=="string"?{soul:o}:o||{},a=a||{},a._=a._||{},a._[h]=o.soul||a._[h]||s(),a},b.soul._=r.link._,function(){b.is=function(o,g,k){e("node.is");var I;return c(o)&&(I=b.soul(o))?!T(o,a,{as:k,cb:g,s:I,n:o}):!1};function a(o,g){if(g!==b._){if(!r.is(o))return!0;this.cb&&this.cb.call(this.as,o,g,this.n,this.s)}}}(),function(){b.ify=function(o,g,k){return e("node.ify"),g?typeof g=="string"?g={soul:g}:typeof g=="function"&&(g={map:g}):g={},g.map&&(g.node=g.map.call(k,o,E,g.node||{})),(g.node=b.soul.ify(g.node||{},g))&&T(o,a,{o:g,as:k}),g.node};function a(o,g){var k=this.o,I,C;if(k.map){I=k.map.call(this.as,o,""+g,k.node),C===I?m(k.node,g):k.node&&(k.node[g]=I);return}r.is(o)&&(k.node[g]=o)}}();var n=i.obj,c=n.is,m=n.del,T=n.map,y=i.text,s=y.random,h=b.soul._,E;i.node=i.node||b;var $=i.state;$.lex=function(){return e("state.lex"),$().toString(36).replace(".","")},$.to=function(a,o,g){e("state.to");var k=(a||{})[o];return c(k)&&(k=N(k)),$.ify(g,o,$.is(a,o),k,b.soul(a))},function(){$.map=function(o,g,k){e("state.map");var I,C=c(C=o||g)?C:null;return o=w(o=o||g)?o:null,C&&!o?(g=d(g)?g:$(),C[v]=C[v]||{},T(C,a,{o:C,s:g}),C):(k=k||c(g)?g:I,g=d(g)?g:$(),function(j,G,R,P){if(!o)return a.call({o:R,s:g},j,G),j;o.call(k||this||{},j,G,R,P),!(A(R,G)&&I===R[G])&&a.call({o:R,s:g},j,G)})};function a(o,g){v!==g&&$.ify(this.o,g,this.s)}}();var n=i.obj;n.as;var A=n.has,c=n.is,T=n.map,N=n.copy,O=i.num,d=O.is,x=i.fn,w=x.is,v=b._,E,S={};(function(){S.is=function(g,k,I,C){return e("graph.is"),!g||!c(g)||_(g)?!1:!T(g,a,{cb:k,fn:I,as:C})};function a(g,k){if(!g||k!==b.soul(g)||!b.is(g,this.fn,this.as))return!0;!this.cb||(o.n=g,o.as=this.as,this.cb.call(o.as,g,k,o))}function o(g){g&&b.is(o.n,g,o.as)}})(),function(){S.ify=function(C,j,G){e("graph.ify");var R={path:[],obj:C};return j?typeof j=="string"?j={soul:j}:typeof j=="function"&&(j.map=j):j={},typeof G=="string"&&(j.soul=j.soul||G,G=E),j.soul&&(R.link=r.link.ify(j.soul)),j.shell=(G||{}).shell,j.graph=j.graph||{},j.seen=j.seen||[],j.as=j.as||G,a(j,R),j.root=R.node,j.graph};function a(C,j){var G;return(G=I(C,j))?G:(j.env=C,j.soul=g,b.ify(j.obj,o,j)&&(j.link=j.link||r.link.ify(b.soul(j.node)),j.obj!==C.shell&&(C.graph[r.link.is(j.link)]=j.node)),j)}function o(C,j,G){var R=this,P=R.env,B,M;if(b._===j&&A(C,r.link._))return G._;if(!!(B=k(C,j,G,R,P))){if(j||(R.node=R.node||G||{},A(C,b._)&&b.soul(C)&&(R.node._=N(C._)),R.node=b.soul.ify(R.node,r.link.is(R.link)),R.link=R.link||r.link.ify(b.soul(R.node))),(M=P.map)&&(M.call(P.as||{},C,j,G,R),A(G,j))){if(C=G[j],E===C){m(G,j);return}if(!(B=k(C,j,G,R,P)))return}if(!j)return R.node;if(B===!0)return C;if(M=a(P,{obj:C,path:R.path.concat(j)}),!!M.node)return M.link}}function g(C){var j=this,G=r.link.is(j.link),R=j.env.graph;j.link=j.link||r.link.ify(C),j.link[r.link._]=C,j.node&&j.node[b._]&&(j.node[b._][r.link._]=C),A(R,G)&&(R[C]=R[G],m(R,G))}function k(C,j,G,R,P){var B;if(r.is(C))return!0;if(c(C))return 1;if(B=P.invalid)return C=B.call(P.as||{},C,j,G),k(C,j,G,R,P);P.err="Invalid value at '"+R.path.concat(j).join(".")+"'!",i.list.is(C)&&(P.err+=" Use `.set(item)` instead of an Array.")}function I(C,j){for(var G=C.seen,R=G.length,P;R--;)if(P=G[R],j.obj===P.obj)return P;G.push(j)}}(),S.node=function(a){e("graph.node");var o=b.soul(a);if(!!o)return D({},o,a)},function(){S.to=function(o,g,k){if(e("graph.to"),!!o){var I={};return k=k||{seen:{}},T(o[g],a,{obj:I,graph:o,opt:k}),I}};function a(o,g){var k,I;if(b._===g){if(_(o,r.link._))return;this.obj[g]=N(o);return}if(!(k=r.link.is(o))){this.obj[g]=o;return}if(I=this.opt.seen[k]){this.obj[g]=I;return}this.obj[g]=this.opt.seen[k]=S.to(this.graph,k,this.opt)}}();var w=i.fn.is,n=i.obj,c=n.is,m=n.del,A=n.has,_=n.empty,D=n.put,T=n.map,N=n.copy,E;i.graph=i.graph||S}}()})(ne);(function(t){t.exports=ne.exports})(ee);const sn=on(ee.exports),fn=ut('<div><form action="/" method="get" class="flex justify-between items-center rounded bg-lavender border-green border-4 px-4 py-2 m-4"><span><label for="id" class="px-2">Join Game ID</label><input name="id" id="id" type="text" class="px-2 rounded border-green border-2 w-[max(80vw, 20rem)]"></span><button type="submit" class="bg-terra mx-2 border-green border-2 px-3 py-1 rounded">Join</button></form><div class="grid grid-cols-3 grid-rows-3 gap-4 aspect-square"></div><div class="flex flex-col justify-center align-middle"><button class="btn hover-shadow border-4 my-4 py-2 px-4 m-auto"></button></div></div>'),an=sn("https://mvp-gun.herokuapp.com/gun"),ln=()=>{const[t,e]=Z(Array.from({length:9},()=>F.None)),[i,p]=Z(F.Circle);let r=F.None;const l=H(()=>{const v=$e(t());return v!==F.None&&(r=F.None),v}),f=v=>{let S=t(),w=i();r===F.None&&(r=w),w===r&&S[v]===F.None&&(S[v]=w,e([...S]),w=xe(w),p(w),y())},u=v=>{if(v.code.startsWith("Digit")){const S=parseInt(v.code.charAt(v.code.length-1))-1;S>=0&&f(S)}else if(v.code.startsWith("Numpad")){let S=parseInt(v.code.charAt(v.code.length-1));S>=7&&S<=9&&(S-=6),S>=1&&S<=3&&(S+=6),S-=1,S>=0&&f(S)}};fe(()=>{window.addEventListener("keydown",u)}),mt(()=>{window.removeEventListener("keydown",u)});const b=()=>{e(Array.from({length:9},()=>F.None)),p(F.Circle),r=F.None,y()},y=()=>{$.put({field:{...t()},turn:i()})},s=Xe();let h=s.query.id;if(!h){h=rn();const v=s.pathname;Ve()(`${v}?id=${h}`,{replace:!0})}const $=an.get(h);$.get("field").on(v=>{const S=Object.values(v),w=S.slice(0,S.length-1);e(w)}),$.get("turn").on(v=>{p(v)});const[O,d]=Z(!1);let x;return(()=>{const v=fn.cloneNode(!0),S=v.firstChild,w=S.nextSibling,n=w.nextSibling,c=n.firstChild;return tt(w,W(we,{get each(){return t()},children:(m,A)=>W(Oe,{state:m,onClick:()=>f(A())})})),tt(v,W(Qt,{get children(){return[W(lt,{get when(){return l()===F.Circle},get children(){return W($t,{restartGame:b,result:"Winner: Circle"})}}),W(lt,{get when(){return l()===F.Cross},get children(){return W($t,{restartGame:b,result:"Winner: Cross"})}}),W(lt,{get when(){return l()===F.Draw},get children(){return W($t,{restartGame:b,result:"Draw"})}})]}}),n),c.$$click=()=>{d(!0),x&&clearTimeout(x),x=setTimeout(()=>{d(!1)},5*1e3),navigator.clipboard.writeText(h)},tt(c,()=>O()?"Game ID Copied!":"Get Game ID"),v})()};xt(["click"]);const cn=ut('<div class="absolute inset-0 flex justify-center items-center bg-artichoke"></div>'),hn=()=>W(Ye,{get children(){const t=cn.cloneNode(!0);return tt(t,W(ln,{})),t}});_e(()=>W(hn,{}),document.getElementById("root"));
