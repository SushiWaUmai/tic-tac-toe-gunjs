(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))y(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&y(s)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function y(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();const Y={},ne=(t,e)=>t===e,re=Symbol("solid-track"),vt={equals:ne};let ie=Kt;const it=1,gt=2,Bt={owned:null,cleanups:null,context:null,owner:null};var U=null;let nt=null,q=null,K=null,rt=null,Tt=0;function yt(t,e){const i=q,y=U,r=t.length===0,l=r?Bt:{owned:null,cleanups:null,context:null,owner:e||y},s=r?t:()=>t(()=>Q(()=>Dt(l)));U=l,q=null;try{return ot(s,!0)}finally{q=i,U=y}}function z(t,e){e=e?Object.assign({},vt,e):vt;const i={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},y=r=>(typeof r=="function"&&(r=r(i.value)),Jt(i,r));return[qt.bind(i),y]}function ct(t,e,i){const y=Wt(t,e,!1,it);kt(y)}function V(t,e,i){i=i?Object.assign({},vt,i):vt;const y=Wt(t,e,!0,0);return y.observers=null,y.observerSlots=null,y.comparator=i.equals||void 0,kt(y),qt.bind(y)}function Q(t){let e,i=q;return q=null,e=t(),q=i,e}function oe(t,e,i){const y=Array.isArray(t);let r,l=i&&i.defer;return s=>{let u;if(y){u=Array(t.length);for(let p=0;p<t.length;p++)u[p]=t[p]()}else u=t();if(l){l=!1;return}const b=Q(()=>e(u,r,s));return r=u,b}}function At(t){return U===null||(U.cleanups===null?U.cleanups=[t]:U.cleanups.push(t)),t}function ue(){return U}function fe(t,e){const i=U;U=t;try{return ot(e,!0)}finally{U=i}}function se(t){const e=q,i=U;return Promise.resolve().then(()=>{q=e,U=i;let y;return ot(t,!1),q=U=null,y?y.done:void 0})}function Mt(t,e){const i=Symbol("context");return{id:i,Provider:he(i),defaultValue:t}}function Lt(t){let e;return(e=Xt(U,t.id))!==void 0?e:t.defaultValue}function Ut(t){const e=V(t),i=V(()=>jt(e()));return i.toArray=()=>{const y=i();return Array.isArray(y)?y:y!=null?[y]:[]},i}function qt(){const t=nt;if(this.sources&&(this.state||t))if(this.state===it||t)kt(this);else{const e=K;K=null,ot(()=>bt(this),!1),K=e}if(q){const e=this.observers?this.observers.length:0;q.sources?(q.sources.push(this),q.sourceSlots.push(e)):(q.sources=[this],q.sourceSlots=[e]),this.observers?(this.observers.push(q),this.observerSlots.push(q.sources.length-1)):(this.observers=[q],this.observerSlots=[q.sources.length-1])}return this.value}function Jt(t,e,i){let y=t.value;return(!t.comparator||!t.comparator(y,e))&&(t.value=e,t.observers&&t.observers.length&&ot(()=>{for(let r=0;r<t.observers.length;r+=1){const l=t.observers[r],s=nt&&nt.running;s&&nt.disposed.has(l),(s&&!l.tState||!s&&!l.state)&&(l.pure?K.push(l):rt.push(l),l.observers&&Vt(l)),s||(l.state=it)}if(K.length>1e6)throw K=[],new Error},!1)),e}function kt(t){if(!t.fn)return;Dt(t);const e=U,i=q,y=Tt;q=U=t,ae(t,t.value,y),q=i,U=e}function ae(t,e,i){let y;try{y=t.fn(e)}catch(r){t.pure&&(t.state=it),Ht(r)}(!t.updatedAt||t.updatedAt<=i)&&(t.updatedAt!=null&&"observers"in t?Jt(t,y):t.value=y,t.updatedAt=i)}function Wt(t,e,i,y=it,r){const l={fn:t,state:y,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:U,context:null,pure:i};return U===null||U!==Bt&&(U.owned?U.owned.push(l):U.owned=[l]),l}function Ft(t){const e=nt;if(t.state===0||e)return;if(t.state===gt||e)return bt(t);if(t.suspense&&Q(t.suspense.inFallback))return t.suspense.effects.push(t);const i=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Tt);)(t.state||e)&&i.push(t);for(let y=i.length-1;y>=0;y--)if(t=i[y],t.state===it||e)kt(t);else if(t.state===gt||e){const r=K;K=null,ot(()=>bt(t,i[0]),!1),K=r}}function ot(t,e){if(K)return t();let i=!1;e||(K=[]),rt?i=!0:rt=[],Tt++;try{const y=t();return le(i),y}catch(y){K||(rt=null),Ht(y)}}function le(t){if(K&&(Kt(K),K=null),t)return;const e=rt;rt=null,e.length&&ot(()=>ie(e),!1)}function Kt(t){for(let e=0;e<t.length;e++)Ft(t[e])}function bt(t,e){const i=nt;t.state=0;for(let y=0;y<t.sources.length;y+=1){const r=t.sources[y];r.sources&&(r.state===it||i?r!==e&&Ft(r):(r.state===gt||i)&&bt(r,e))}}function Vt(t){const e=nt;for(let i=0;i<t.observers.length;i+=1){const y=t.observers[i];(!y.state||e)&&(y.state=gt,y.pure?K.push(y):rt.push(y),y.observers&&Vt(y))}}function Dt(t){let e;if(t.sources)for(;t.sources.length;){const i=t.sources.pop(),y=t.sourceSlots.pop(),r=i.observers;if(r&&r.length){const l=r.pop(),s=i.observerSlots.pop();y<r.length&&(l.sourceSlots[s]=y,r[y]=l,i.observerSlots[y]=s)}}if(t.owned){for(e=0;e<t.owned.length;e++)Dt(t.owned[e]);t.owned=null}if(t.cleanups){for(e=0;e<t.cleanups.length;e++)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function ce(t){return t instanceof Error||typeof t=="string"?t:new Error("Unknown error")}function Ht(t){throw t=ce(t),t}function Xt(t,e){return t?t.context&&t.context[e]!==void 0?t.context[e]:Xt(t.owner,e):void 0}function jt(t){if(typeof t=="function"&&!t.length)return jt(t());if(Array.isArray(t)){const e=[];for(let i=0;i<t.length;i++){const y=jt(t[i]);Array.isArray(y)?e.push.apply(e,y):e.push(y)}return e}return t}function he(t,e){return function(y){let r;return ct(()=>r=Q(()=>(U.context={[t]:y.value},Ut(()=>y.children))),void 0),r}}const pe=Symbol("fallback");function Nt(t){for(let e=0;e<t.length;e++)t[e]()}function de(t,e,i={}){let y=[],r=[],l=[],s=0,u=e.length>1?[]:null;return At(()=>Nt(l)),()=>{let b=t()||[],p,f;return b[re],Q(()=>{let x=b.length,O,h,_,g,T,m,n,c,$;if(x===0)s!==0&&(Nt(l),l=[],y=[],r=[],s=0,u&&(u=[])),i.fallback&&(y=[pe],r[0]=yt(D=>(l[0]=D,i.fallback())),s=1);else if(s===0){for(r=new Array(x),f=0;f<x;f++)y[f]=b[f],r[f]=yt(d);s=x}else{for(_=new Array(x),g=new Array(x),u&&(T=new Array(x)),m=0,n=Math.min(s,x);m<n&&y[m]===b[m];m++);for(n=s-1,c=x-1;n>=m&&c>=m&&y[n]===b[c];n--,c--)_[c]=r[n],g[c]=l[n],u&&(T[c]=u[n]);for(O=new Map,h=new Array(c+1),f=c;f>=m;f--)$=b[f],p=O.get($),h[f]=p===void 0?-1:p,O.set($,f);for(p=m;p<=n;p++)$=y[p],f=O.get($),f!==void 0&&f!==-1?(_[f]=r[p],g[f]=l[p],u&&(T[f]=u[p]),f=h[f],O.set($,f)):l[p]();for(f=m;f<x;f++)f in _?(r[f]=_[f],l[f]=g[f],u&&(u[f]=T[f],u[f](f))):r[f]=yt(d);r=r.slice(0,s=x),y=b.slice(0)}return r});function d(x){if(l[f]=x,u){const[O,h]=z(f);return u[f]=h,e(b[f],O)}return e(b[f])}}}function W(t,e){return Q(()=>t(e||{}))}function ye(t){const e="fallback"in t&&{fallback:()=>t.fallback};return V(de(()=>t.each,t.children,e||void 0))}function zt(t){let e=!1,i=!1;const y=Ut(()=>t.children),r=V(()=>{let l=y();Array.isArray(l)||(l=[l]);for(let s=0;s<l.length;s++){const u=l[s].when;if(u)return i=!!l[s].keyed,[s,u,l[s]]}return[-1]},void 0,{equals:(l,s)=>l[0]===s[0]&&(e?l[1]===s[1]:!l[1]==!s[1])&&l[2]===s[2]});return V(()=>{const[l,s,u]=r();if(l<0)return t.fallback;const b=u.children,p=typeof b=="function"&&b.length>0;return e=i||p,p?Q(()=>b(s)):b})}function lt(t){return t}function ve(t,e,i){let y=i.length,r=e.length,l=y,s=0,u=0,b=e[r-1].nextSibling,p=null;for(;s<r||u<l;){if(e[s]===i[u]){s++,u++;continue}for(;e[r-1]===i[l-1];)r--,l--;if(r===s){const f=l<y?u?i[u-1].nextSibling:i[l-u]:b;for(;u<l;)t.insertBefore(i[u++],f)}else if(l===u)for(;s<r;)(!p||!p.has(e[s]))&&e[s].remove(),s++;else if(e[s]===i[l-1]&&i[u]===e[r-1]){const f=e[--r].nextSibling;t.insertBefore(i[u++],e[s++].nextSibling),t.insertBefore(i[--l],f),e[r]=i[l]}else{if(!p){p=new Map;let d=u;for(;d<l;)p.set(i[d],d++)}const f=p.get(e[s]);if(f!=null)if(u<f&&f<l){let d=s,x=1,O;for(;++d<r&&d<l&&!((O=p.get(e[d]))==null||O!==f+x);)x++;if(x>f-u){const h=e[s];for(;u<f;)t.insertBefore(i[u++],h)}else t.replaceChild(i[u++],e[s++])}else s++;else e[s++].remove()}}}const Et="_$DX_DELEGATE";function ge(t,e,i,y={}){let r;return yt(l=>{r=l,e===document?t():Z(e,t(),e.firstChild?null:void 0,i)},y.owner),()=>{r(),e.textContent=""}}function ut(t,e,i){const y=document.createElement("template");y.innerHTML=t;let r=y.content.firstChild;return i&&(r=r.firstChild),r}function _t(t,e=window.document){const i=e[Et]||(e[Et]=new Set);for(let y=0,r=t.length;y<r;y++){const l=t[y];i.has(l)||(i.add(l),e.addEventListener(l,be))}}function Gt(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}function Qt(t,e,i,y){if(y)Array.isArray(i)?(t[`$$${e}`]=i[0],t[`$$${e}Data`]=i[1]):t[`$$${e}`]=i;else if(Array.isArray(i)){const r=i[0];t.addEventListener(e,i[0]=l=>r.call(t,i[1],l))}else t.addEventListener(e,i)}function Z(t,e,i,y){if(i!==void 0&&!y&&(y=[]),typeof e!="function")return wt(t,e,y,i);ct(r=>wt(t,e(),r,i),y)}function be(t){const e=`$$${t.type}`;let i=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==i&&Object.defineProperty(t,"target",{configurable:!0,value:i}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return i||document}}),Y.registry&&!Y.done&&(Y.done=!0,document.querySelectorAll("[id^=pl-]").forEach(y=>y.remove()));i!==null;){const y=i[e];if(y&&!i.disabled){const r=i[`${e}Data`];if(r!==void 0?y.call(i,r,t):y.call(i,t),t.cancelBubble)return}i=i.host&&i.host!==i&&i.host instanceof Node?i.host:i.parentNode}}function wt(t,e,i,y,r){for(Y.context&&!i&&(i=[...t.childNodes]);typeof i=="function";)i=i();if(e===i)return i;const l=typeof e,s=y!==void 0;if(t=s&&i[0]&&i[0].parentNode||t,l==="string"||l==="number"){if(Y.context)return i;if(l==="number"&&(e=e.toString()),s){let u=i[0];u&&u.nodeType===3?u.data=e:u=document.createTextNode(e),i=ft(t,i,y,u)}else i!==""&&typeof i=="string"?i=t.firstChild.data=e:i=t.textContent=e}else if(e==null||l==="boolean"){if(Y.context)return i;i=ft(t,i,y)}else{if(l==="function")return ct(()=>{let u=e();for(;typeof u=="function";)u=u();i=wt(t,u,i,y)}),()=>i;if(Array.isArray(e)){const u=[],b=i&&Array.isArray(i);if(St(u,e,i,r))return ct(()=>i=wt(t,u,i,y,!0)),()=>i;if(Y.context){if(!u.length)return i;for(let p=0;p<u.length;p++)if(u[p].parentNode)return i=u}if(u.length===0){if(i=ft(t,i,y),s)return i}else b?i.length===0?It(t,u,y):ve(t,i,u):(i&&ft(t),It(t,u));i=u}else if(e instanceof Node){if(Y.context&&e.parentNode)return i=s?[e]:e;if(Array.isArray(i)){if(s)return i=ft(t,i,y,e);ft(t,i,null,e)}else i==null||i===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);i=e}}return i}function St(t,e,i,y){let r=!1;for(let l=0,s=e.length;l<s;l++){let u=e[l],b=i&&i[l];if(u instanceof Node)t.push(u);else if(!(u==null||u===!0||u===!1))if(Array.isArray(u))r=St(t,u,b)||r;else if(typeof u=="function")if(y){for(;typeof u=="function";)u=u();r=St(t,Array.isArray(u)?u:[u],Array.isArray(b)?b:[b])||r}else t.push(u),r=!0;else{const p=String(u);b&&b.nodeType===3&&b.data===p?t.push(b):t.push(document.createTextNode(p))}}return r}function It(t,e,i=null){for(let y=0,r=e.length;y<r;y++)t.insertBefore(e[y],i)}function ft(t,e,i,y){if(i===void 0)return t.textContent="";const r=y||document.createTextNode("");if(e.length){let l=!1;for(let s=e.length-1;s>=0;s--){const u=e[s];if(r!==u){const b=u.parentNode===t;!l&&!s?b?t.replaceChild(r,u):t.insertBefore(r,i):b&&u.remove()}else l=!0}}else t.insertBefore(r,i);return[r]}var F=(t=>(t[t.None=0]="None",t[t.Cross=1]="Cross",t[t.Circle=2]="Circle",t[t.Draw=3]="Draw",t))(F||{});const we=t=>{switch(t){case 2:return 1;case 1:return 2}return 0},ke=t=>{const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[6,4,2]];for(let y of e){const[r,l,s]=y;if(t[r]!==0&&t[r]===t[l]&&t[r]==t[s])return t[r]}let i=!0;for(let y of t)y===0&&(i=!1);return i?3:0},_e="/tic-tac-toe-gunjs/assets/circle.2c56a12d.svg",me="/tic-tac-toe-gunjs/assets/cross.f03db0bd.svg",$e=ut('<img alt="circle" class="animate-spawn">'),xe=ut('<img alt="cross" class="animate-spawn">'),je=ut('<button class="btn border-8 field flex justify-center items-center m-2"></button>'),Se=t=>(()=>{const e=je.cloneNode(!0);return Qt(e,"click",t.onClick,!0),Z(e,W(zt,{get fallback(){return[]},get children(){return[W(lt,{get when(){return t.state===F.Circle},get children(){const i=$e.cloneNode(!0);return Gt(i,"src",_e),i}}),W(lt,{get when(){return t.state===F.Cross},get children(){const i=xe.cloneNode(!0);return Gt(i,"src",me),i}})]}})),e})();_t(["click"]);const Te=ut('<div class="absolute inset-0 flex justify-center items-center"><div class="rounded bg-gray-100 px-8 py-5"></div></div>'),Ae=t=>(()=>{const e=Te.cloneNode(!0),i=e.firstChild;return Z(i,()=>t.children),e})(),De=ut('<div class="flex flex-col"><h3 class="m-3 text-4xl text-center"></h3><span class="py-2 px-3 rounded bg-gray-300 m-auto cursor-pointer">Restart Game</span></div>'),mt=t=>W(Ae,{get children(){const e=De.cloneNode(!0),i=e.firstChild,y=i.nextSibling;return Z(i,()=>t.result),Qt(y,"click",t.restartGame,!0),e}});_t(["click"]);function Oe(t,e,i){return t.addEventListener(e,i),()=>t.removeEventListener(e,i)}function Ce([t,e],i,y){return[i?()=>i(t()):t,y?r=>e(y(r)):e]}function Ne(t){try{return document.querySelector(t)}catch{return null}}function Ee(t,e){const i=Ne(`#${t}`);i?i.scrollIntoView():e&&window.scrollTo(0,0)}function Ge(t,e,i,y){let r=!1;const l=u=>typeof u=="string"?{value:u}:u,s=Ce(z(l(t()),{equals:(u,b)=>u.value===b.value}),void 0,u=>(!r&&e(u),u));return i&&At(i((u=t())=>{r=!0,s[1](l(u)),r=!1})),{signal:s,utils:y}}function Ie(t){if(t){if(Array.isArray(t))return{signal:t}}else return{signal:z({value:""})};return t}function Re(){return Ge(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:t,replace:e,scroll:i,state:y})=>{e?window.history.replaceState(y,"",t):window.history.pushState(y,"",t),Ee(window.location.hash.slice(1),i)},t=>Oe(window,"popstate",()=>t()),{go:t=>window.history.go(t)})}const Pe=/^(?:[a-z0-9]+:)?\/\//i,Be=/^\/+|\/+$/g;function $t(t,e=!1){const i=t.replace(Be,"");return i?e||/^[?#]/.test(i)?i:"/"+i:""}function xt(t,e,i){if(Pe.test(e))return;const y=$t(t),r=i&&$t(i);let l="";return!r||e.startsWith("/")?l=y:r.toLowerCase().indexOf(y.toLowerCase())!==0?l=y+r:l=r,(l||"/")+$t(e,!l)}function Me(t,e){if(t==null)throw new Error(e);return t}function Le(t){const e={};return t.searchParams.forEach((i,y)=>{e[y]=i}),e}function st(t,e){return decodeURIComponent(e?t.replace(/\+/g," "):t)}function Ue(t){const e=new Map,i=ue();return new Proxy({},{get(y,r){return e.has(r)||fe(i,()=>e.set(r,V(()=>t()[r]))),e.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}const qe=100,Yt=Mt(),Je=Mt(),Zt=()=>Me(Lt(Yt),"Make sure your app is wrapped in a <Router />");let Rt;const We=()=>Zt().navigatorFactory(),Fe=()=>Zt().location;function Ke(t,e){const i=new URL("http://sar"),y=V(b=>{const p=t();try{return new URL(p,i)}catch{return console.error(`Invalid path ${p}`),b}},i,{equals:(b,p)=>b.href===p.href}),r=V(()=>st(y().pathname)),l=V(()=>st(y().search,!0)),s=V(()=>st(y().hash)),u=V(()=>"");return{get pathname(){return r()},get search(){return l()},get hash(){return s()},get state(){return e()},get key(){return u()},query:Ue(oe(l,()=>Le(y())))}}function Ve(t,e="",i,y){const{signal:[r,l],utils:s={}}=Ie(t),u=s.parsePath||(S=>S),b=s.renderPath||(S=>S),p=xt("",e),f=void 0;if(p===void 0)throw new Error(`${p} is not a valid base path`);p&&!r().value&&l({value:p,replace:!0,scroll:!1});const[d,x]=z(!1),O=async S=>{x(!0);try{await se(S)}finally{x(!1)}},[h,_]=z(r().value),[g,T]=z(r().state),m=Ke(h,g),n=[],c={pattern:p,params:{},path:()=>p,outlet:()=>null,resolvePath(S){return xt(p,S)}};if(i)try{Rt=c,c.data=i({data:void 0,params:{},location:m,navigate:D(c)})}finally{Rt=void 0}function $(S,N,E){Q(()=>{if(typeof N=="number"){N&&(s.go?s.go(N):console.warn("Router integration does not support relative routing"));return}const{replace:a,resolve:o,scroll:v,state:w}={replace:!1,resolve:!0,scroll:!0,...E},I=o?S.resolvePath(N):xt("",N);if(I===void 0)throw new Error(`Path '${N}' is not a routable path`);if(n.length>=qe)throw new Error("Too many redirects");const C=h();if(I!==C||w!==g()){const j=n.push({value:C,replace:a,scroll:v,state:g()});O(()=>{_(I),T(w)}).then(()=>{n.length===j&&k({value:I,state:w})})}})}function D(S){return S=S||Lt(Je)||c,(N,E)=>$(S,N,E)}function k(S){const N=n[0];N&&((S.value!==N.value||S.state!==N.state)&&l({...S,replace:N.replace,scroll:N.scroll}),n.length=0)}ct(()=>{const{value:S,state:N}=r();Q(()=>{S!==h()&&O(()=>{_(S),T(N)})})});{let S=function(N){if(N.defaultPrevented||N.button!==0||N.metaKey||N.altKey||N.ctrlKey||N.shiftKey)return;const E=N.composedPath().find(j=>j instanceof Node&&j.nodeName.toUpperCase()==="A");if(!E||!E.hasAttribute("link"))return;const a=E.href;if(E.target||!a&&!E.hasAttribute("state"))return;const o=(E.getAttribute("rel")||"").split(/\s+/);if(E.hasAttribute("download")||o&&o.includes("external"))return;const v=new URL(a),w=st(v.pathname);if(v.origin!==window.location.origin||p&&w&&!w.toLowerCase().startsWith(p.toLowerCase()))return;const I=u(w+st(v.search,!0)+st(v.hash)),C=E.getAttribute("state");N.preventDefault(),$(c,I,{resolve:!1,replace:E.hasAttribute("replace"),scroll:!E.hasAttribute("noscroll"),state:C&&JSON.parse(C)})};var A=S;_t(["click"]),document.addEventListener("click",S),At(()=>document.removeEventListener("click",S))}return{base:c,out:f,location:m,isRouting:d,renderPath:b,parsePath:u,navigatorFactory:D}}const He=t=>{const{source:e,url:i,base:y,data:r,out:l}=t,s=e||Re(),u=Ve(s,y,r);return W(Yt.Provider,{value:u,get children(){return t.children}})};let dt;const Xe=new Uint8Array(16);function ze(){if(!dt&&(dt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!dt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dt(Xe)}const J=[];for(let t=0;t<256;++t)J.push((t+256).toString(16).slice(1));function Qe(t,e=0){return(J[t[e+0]]+J[t[e+1]]+J[t[e+2]]+J[t[e+3]]+"-"+J[t[e+4]]+J[t[e+5]]+"-"+J[t[e+6]]+J[t[e+7]]+"-"+J[t[e+8]]+J[t[e+9]]+"-"+J[t[e+10]]+J[t[e+11]]+J[t[e+12]]+J[t[e+13]]+J[t[e+14]]+J[t[e+15]]).toLowerCase()}const Ye=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Pt={randomUUID:Ye};function Ze(t,e,i){if(Pt.randomUUID&&!e&&!t)return Pt.randomUUID();t=t||{};const y=t.random||(t.rng||ze)();if(y[6]=y[6]&15|64,y[8]=y[8]&63|128,e){i=i||0;for(let r=0;r<16;++r)e[i+r]=y[r];return e}return Qe(y)}function tn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var te={exports:{}};function en(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ee={exports:{}};(function(t){(function(){function e(y,r){return r?en(y):y.slice?e[l(y)]:function(s,u){y(s={exports:{}}),e[l(u)]=s.exports};function l(s){return s.split("/").slice(-1).toString().replace(".js","")}}var i=t;e(function(y){String.random=function(l,s){var u="";for(l=l||24,s=s||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";l-- >0;)u+=s.charAt(Math.floor(Math.random()*s.length));return u},String.match=function(l,s){var u,b;return typeof l!="string"?!1:(typeof s=="string"&&(s={"=":s}),s=s||{},u=s["="]||s["*"]||s[">"]||s["<"],l===u?!0:b!==s["="]?!1:(u=s["*"]||s[">"],l.slice(0,(u||"").length)===u?!0:b!==s["*"]?!1:b!==s[">"]&&b!==s["<"]?l>=s[">"]&&l<=s["<"]:b!==s[">"]&&l>=s[">"]||b!==s["<"]&&l<=s["<"]))},String.hash=function(l,s){if(typeof l=="string"){if(s=s||0,!l.length)return s;for(var u=0,b=l.length,p;u<b;++u)p=l.charCodeAt(u),s=(s<<5)-s+p,s|=0;return s}};var r=Object.prototype.hasOwnProperty;Object.plain=function(l){return l?l instanceof Object&&l.constructor===Object||Object.prototype.toString.call(l).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(l,s){for(var u in l)if(r.call(l,u)&&(!s||s.indexOf(u)==-1))return!1;return!0},Object.keys=Object.keys||function(l){var s=[];for(var u in l)r.call(l,u)&&s.push(u);return s},function(){var l,s=setTimeout,u=0,b=0,p=typeof setImmediate!=""+l&&setImmediate||function(d,x){return typeof MessageChannel==""+l?s:((d=new MessageChannel).port1.onmessage=function(O){O.data==""&&x()},function(O){x=O,d.port2.postMessage("")})}(),f=s.check=s.check||typeof performance!=""+l&&performance||{now:function(){return+new Date}};s.hold=s.hold||9,s.poll=s.poll||function(d){if(s.hold>=f.now()-u&&b++<3333){d();return}p(function(){u=f.now(),d()},b=0)}}(),function(){var l=setTimeout,s=l.turn=l.turn||function(x){u.push(x)==1&&b(d)},u=s.s=[],b=l.poll,p=0,f,d=function(){(f=u[p++])&&f(),(p==u.length||p==99)&&(u=s.s=u.slice(p),p=0),u.length&&b(d)}}(),function(){var l,s=setTimeout,u=s.turn;(s.each=s.each||function(b,p,f,d){d=d||9,function x(O,h,_){if(h=(O=(b||[]).splice(0,d)).length){for(var g=0;g<h&&l===(_=p(O[g]));g++);if(l===_){u(x);return}}f&&f(_)}()})()}()})(e,"./shim"),e(function(y){y.exports=function r(f,s,u){if(!f)return{to:r};var b,p=typeof s=="function",f=(this.tag||(this.tag={}))[f]||p&&(this.tag[f]={tag:f,to:r._={next:function(x){var O;(O=this.to)&&O.next(x)}}});if(p){var d={off:r.off||(r.off=function(){if(this.next===r._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=r._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:r._,next:s,the:f,on:this,as:u};return(d.back=f.last||f).to=d,f.last=d}return(f=f.to)&&b!==s&&f.next(s),f}})(e,"./onto"),e(function(y){y.exports=function(r){return r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"&&r!=1/0&&r!=-1/0&&r===r||!!r&&typeof r["#"]=="string"&&Object.keys(r).length===1&&r["#"]}})(e,"./valid"),e(function(y){e("./shim");function r(){var f=+new Date;return b<f?(s=0,b=f+r.drift):b=f+(s+=1)/u+r.drift}r.drift=0;var l=-1/0,s=0,u=999,b=l,p;r.is=function(f,d,x){var O=d&&f&&f._&&f._[">"]||x;if(!!O)return typeof(O=O[d])=="number"?O:l},r.ify=function(f,d,x,O,h){(f=f||{})._=f._||{},h&&(f._["#"]=h);var _=f._[">"]||(f._[">"]={});return p!==d&&d!=="_"&&(typeof x=="number"&&(_[d]=x),p!==O&&(f[d]=O)),f},y.exports=r})(e,"./state"),e(function(y){e("./shim");function r(l){var s={s:{}},u=s.s;l=l||{max:999,age:1e3*9},s.check=function(p){return u[p]?b(p):!1};var b=s.track=function(p){var f=u[p]||(u[p]={});return f.was=s.now=+new Date,s.to||(s.to=setTimeout(s.drop,l.age+9)),f};return s.drop=function(p){s.to=null,s.now=+new Date;var f=Object.keys(u);console.STAT&&console.STAT(s.now,+new Date-s.now,"dup drop keys"),setTimeout.each(f,function(d){var x=u[d];x&&(p||l.age)>s.now-x.was||delete u[d]},0,99)},s}y.exports=r})(e,"./dup"),e(function(y){e("./onto"),y.exports=function(s,u){if(!!this.on){var b=(this.opt||{}).lack||9e3;if(typeof s!="function"){if(!s)return;var f=s["#"]||s,p=(this.tag||"")[f];return p?(u&&(p=this.on(f,u),clearTimeout(p.err),p.err=setTimeout(function(){p.off()},b)),!0):void 0}var f=u&&u["#"]||r(9);if(!s)return f;var d=this.on(f,s,u);return d.err=d.err||setTimeout(function(){d.off(),d.next({err:"Error: No ACK yet.",lack:!0})},b),f}};var r=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(y){function r(h){return h instanceof r?(this._={$:this}).$:this instanceof r?r.create(this._={$:this,opt:h}):new r(h)}r.is=function(h){return h instanceof r||h&&h._&&h===h._.$||!1},r.version=.202,r.chain=r.prototype,r.chain.toJSON=function(){},e("./shim"),r.valid=e("./valid"),r.state=e("./state"),r.on=e("./onto"),r.dup=e("./dup"),r.ask=e("./ask"),function(){r.create=function(o){o.root=o.root||o,o.graph=o.graph||{},o.on=o.on||r.on,o.ask=o.ask||r.ask,o.dup=o.dup||r.dup();var v=o.$.opt(o.opt);return o.once||(o.on("in",h,o),o.on("out",h,o),o.on("put",T,o),r.on("create",o),o.on("create",o)),o.once=1,v};function h(o){if(!!o){if(o.out===h){this.to.next(o);return}var v=this,w=v.as,I=w.at||w,C=I.$,j=I.dup,G,R=o.DBG;if((G=o["#"])||(G=o["#"]=s(9)),!j.check(G)){if(j.track(G),G=o._,o._=typeof G=="function"?G:function(){},o.$&&o.$===(o.$._||"").$||(o.$=C),o["@"]&&!o.put&&n(o),!I.ask(o["@"],o))if(R&&(R.u=+new Date),o.put){_(o);return}else o.get&&r.on.get(o,C);R&&(R.uc=+new Date),v.to.next(o),R&&(R.ua=+new Date),!(o.nts||o.NTS)&&(o.out=h,I.on("out",o),R&&(R.ue=+new Date))}}}function _(o){if(!!o){var v=o._||"",w=v.root=((v.$=o.$||"")._||"").root;if(o["@"]&&v.faith&&!v.miss){o.out=h,w.on("out",o);return}v.latch=w.hatch,v.match=w.hatch=[];var I=o.put,C=v.DBG=o.DBG,j=+new Date;if(E=E||j,!(I["#"]&&I["."])){C&&(C.p=j),v["#"]=o["#"],v.msg=o,v.all=0,v.stun=1;var G=Object.keys(I);console.STAT&&console.STAT(j,((C||v).pk=+new Date)-j,"put sort");var R=0,P,B,M,L,X,H,at;(function tt(ht){if(P!=R){if(P=R,!(M=G[R])){console.STAT&&console.STAT(j,((C||v).pd=+new Date)-j,"put"),m(v);return}(L=I[M])?(at=L._)?M!==at["#"]?H=$+D(M)+"soul not same.":(X=at[">"])||(H=$+D(M)+"no state."):H=$+D(M)+"no meta.":H=$+D(M)+"no node.",B=Object.keys(L||{})}if(H){o.err=v.err=H,m(v);return}var Ot=0,et;for(ht=ht||0;ht++<9&&(et=B[Ot++]);)if(et!=="_"){var pt=L[et],Ct=X[et];if(d===Ct){H=$+D(et)+"on"+D(M)+"no state.";break}if(!b(pt)){H=$+D(et)+"on"+D(M)+"bad "+typeof pt+D(pt);break}g(pt,et,M,Ct,o),++N}if((B=B.slice(Ot)).length){u(tt);return}++R,B=null,tt(ht)})()}}}r.on.put=_;function g(o,v,w,I,C){var j=C._||"",G=j.root,R=G.graph,P,B=R[w]||x,M=p(B,v,1),L=B[v],X=j.DBG;(P=console.STAT)&&(!R[w]||!L)&&(P.has=(P.has||0)+1);var H=S();if(I>H){setTimeout(function(){g(o,v,w,I,C)},(P=I-H)>A?A:P),console.STAT&&console.STAT((X||j).Hf=+new Date,P,"future");return}if(!(I<M)&&!(!j.faith&&I===M&&(o===L||k(o)<=k(L))&&!j.miss)){j.stun++;var at=C["#"]+j.all++,tt={toString:function(){return at},_:j};tt.toJSON=tt.toString,G.dup.track(tt)["#"]=C["#"],X&&(X.ph=X.ph||+new Date),G.on("put",{"#":tt,"@":C["@"],put:{"#":w,".":v,":":o,">":I},ok:C.ok,_:j})}}function T(o){var v;(v=(o._||"").DBG)&&(v.pa=+new Date,v.pm=v.pm||+new Date);var w=this,I=w.as,C=I.graph,j=o._,G=o.put,R=G["#"],P=G["."],B=G[":"],M=G[">"];o["#"];var L;(L=j.msg)&&(L=L.put)&&(L=L[R])&&f(L,P,M,B,R),C[R]=f(C[R],P,M,B,R),(L=(I.next||"")[R])&&L.on("in",o),m(j),w.to.next(o)}function m(o,v){var w;if(!o.stop&&!(!o.err&&0<--o.stun)&&(o.stop=1,!!(w=o.root))){var I=o.match;I.end=1,I===w.hatch&&(!(I=o.latch)||I.end?delete w.hatch:w.hatch=I),o.hatch&&o.hatch(),setTimeout.each(o.match,function(C){C&&C()}),!(!(v=o.msg)||o.err||v.err)&&(v.out=h,o.root.on("out",v),a())}}function n(o){var v=o["@"]||"",w;if(!(w=v._)){var I=(I=o.$)&&(I=I._)&&(I=I.root)&&(I=I.dup);if(!(I=I.check(v)))return;o["@"]=I["#"]||o["@"];return}w.acks=(w.acks||0)+1,(w.err=o.err)&&(o["@"]=w["#"],m(w)),w.ok=o.ok||w.ok,!w.stop&&!w.crack&&(w.crack=w.match&&w.match.push(function(){c(w)})),c(w)}function c(o){!o||!o.root||o.stun||o.acks!==o.all||o.root.on("in",{"@":o["#"],err:o.err,ok:o.err?d:o.ok||{"":1}})}var $="Error: Invalid graph!",D=function(o){return" '"+(""+o).slice(0,9)+"...' "},k=JSON.stringify,A=2147483647,S=r.state,N=0,E,a=function(){N>999&&N/-(E-(E=+new Date))>1&&(r.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),a=function(){N=0})}}(),function(){r.on.get=function(_,g){var T=g._,m=_.get,n=m["#"],c=T.graph[n],$=m["."],D=T.next||(T.next={});D[n];var k=_._||{},A=k.DBG=_.DBG;if(A&&(A.g=+new Date),!c)return T.on("get",_);if($){if(typeof $!="string"||d===c[$])return T.on("get",_);c=f({},$,p(c,$),c[$],n)}c&&h(_,c),T.on("get",_)};function h(_,g){var T=+new Date,m=_._||{},n=m.DBG=_.DBG,c=_["#"],$=s(9),D=Object.keys(g||"").sort(),k=((g||"")._||"")["#"];D.length;var A=_.$._.root,S=g===A.graph[k];console.STAT&&console.STAT(T,((n||m).gk=+new Date)-T,"got keys"),g&&function N(){T=+new Date;for(var E=0,a,o={},v;E<9&&(a=D[E++]);)f(o,a,p(g,a),g[a],k);D=D.slice(E),(v={})[k]=o,o=v;var w;S&&(w=function(){},w.ram=w.faith=!0),v=D.length,console.STAT&&console.STAT(T,-(T-(T=+new Date)),"got copied some"),n&&(n.ga=+new Date),A.on("in",{"@":c,"#":$,put:o,"%":v?$=s(9):d,$:A.$,_:w,DBG:n}),console.STAT&&console.STAT(T,+new Date-T,"got in"),v&&setTimeout.turn(N)}(),g||A.on("in",{"@":_["#"]})}r.on.get.ack=h}(),function(){r.chain.opt=function(h){h=h||{};var _=this,g=_._,T=h.peers||h;return Object.plain(h)||(h={}),Object.plain(g.opt)||(g.opt=h),typeof T=="string"&&(T=[T]),Object.plain(g.opt.peers)||(g.opt.peers={}),T instanceof Array&&(h.peers={},T.forEach(function(m){var n={};n.id=n.url=m,h.peers[m]=g.opt.peers[m]=g.opt.peers[m]||n})),l(h,function m(n){var c=this[n];if(this&&this.hasOwnProperty(n)||typeof c=="string"||Object.empty(c)){this[n]=c;return}c&&c.constructor!==Object&&!(c instanceof Array)||l(c,m)}),g.opt.from=h,r.on("opt",g),g.opt.uuid=g.opt.uuid||function(n){return r.state().toString(36).replace(".","")+String.random(n||12)},_}}();var l=function(h,_){Object.keys(h).forEach(_,h)},s=String.random,u=setTimeout.turn,b=r.valid,p=r.state.is,f=r.state.ify,d,x={},O;r.log=function(){return!r.log.off&&O.log.apply(O,arguments),[].slice.call(arguments).join(" ")},r.log.once=function(h,_,g){return(g=r.log.once)[h]=g[h]||0,g[h]++||r.log(_)},typeof window<"u"&&((window.GUN=window.Gun=r).window=window);try{typeof i<"u"&&(i.exports=r)}catch{}y.exports=r,(r.window||{}).console=(r.window||{}).console||{log:function(){}},(O=console).only=function(h,_){return O.only.i&&h===O.only.i&&O.only.i++&&(O.log.apply(O,arguments)||_)},r.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(y){var r=e("./root");r.chain.back=function(u,b){var p;if(u=u||1,u===-1||u===1/0)return this._.root.$;if(u===1)return(this._.back||this._).$;var f=this,d=f._;if(typeof u=="string"&&(u=u.split(".")),u instanceof Array){var x=0,O=u.length,p=d;for(x;x<O;x++)p=(p||l)[u[x]];return s!==p?b?f:p:(p=d.back)?p.$.back(u,b):void 0}if(typeof u=="function"){for(var h,p={back:d};(p=p.back)&&s===(h=u(p,b)););return h}return typeof u=="number"?(d.back||d).$.back(u-1):this};var l={},s})(e,"./back"),e(function(y){var r=e("./root");r.chain.chain=function(m){var n=this,c=n._,$=new(m||n).constructor(n),D=$._,k;return D.root=k=c.root,D.id=++k.once,D.back=n._,D.on=r.on,D.on("in",r.on.in,D),D.on("out",r.on.out,D),$};function l(m){var n,c=this.as,$=c.back,D=c.root,k;if(m.$||(m.$=c.$),this.to.next(m),c.err){c.on("in",{put:c.put=d,$:c.$});return}if(n=m.get){if(D.pass&&(D.pass[c.id]=c),c.lex&&Object.keys(c.lex).forEach(function(A){k[A]=c.lex[A]},k=m.get=m.get||{}),n["#"]||c.soul){if(n["#"]=n["#"]||c.soul,m["#"]||(m["#"]=x(9)),$=D.$.get(n["#"])._,n=n["."]){if(h($.put,n)&&(k=$.ask&&$.ask[n],($.ask||($.ask={}))[n]=$.$.get(n)._,$.on("in",{get:n,put:{"#":$.soul,".":n,":":$.put[n],">":g(D.graph[$.soul],n)}}),k))return}else{if(k=$.ask&&$.ask[""],($.ask||($.ask={}))[""]=$,d!==$.put&&($.on("in",$),k))return;m.$=$.$}return D.ask(p,m),D.on("in",m)}if(n["."])return c.get?(m={get:{".":c.get},$:c.$},($.ask||($.ask={}))[c.get]=m.$._,$.on("out",m)):(m={get:c.lex?m.get:{},$:c.$},$.on("out",m));if((c.ask||(c.ask={}))[""]=c,c.get)return n["."]=c.get,($.ask||($.ask={}))[c.get]=m.$._,$.on("out",m)}return $.on("out",m)}r.on.out=l;function s(m,n){n=n||this.as;var c=n.root,$=m.$||(m.$=n.$),D=($||"")._||f,k=m.put||"",A=k["#"],S=k["."],N=d!==k["="]?k["="]:k[":"],E=k[">"]||-1/0,a;if(d!==m.put&&(d===k["#"]||d===k["."]||d===k[":"]&&d===k["="]||d===k[">"])){if(!O(k)){if(!(A=((k||"")._||"")["#"])){console.log("chain not yet supported for",k,"...",m,n);return}return $=n.root.$.get(A),setTimeout.each(Object.keys(k).sort(),function(o){o=="_"||d===(E=g(k,o))||n.on("in",{$,put:{"#":A,".":o,"=":k[o],">":E},VIA:m})})}n.on("in",{$:D.back.$,put:{"#":A=D.back.soul,".":S=D.has||D.get,"=":k,">":g(D.back.put,S)},via:m});return}(m.seen||"")[n.id]||((m.seen||(m.seen=function(){}))[n.id]=n,n!==D&&(Object.keys(m).forEach(function(o){k[o]=m[o]},k={}),k.get=n.get||k.get,!n.soul&&!n.has?k.$$$=k.$$$||n.$:D.soul&&(k.$=n.$,k.$$=k.$$||D.$),m=k),b(m,n),(n.soul||m.$$)&&E>=g(c.graph[A],S)&&((k=c.$.get(A)._).put=T(k.put,S,E,N,A)),!D.soul&&E>=g(c.graph[A],S)&&(a=(c.$.get(A)._.next||"")[S])&&(a.put=N,typeof(k=O(N))=="string"&&(a.put=c.$.get(k)._.put||N)),this.to&&this.to.next(m),n.any&&setTimeout.each(Object.keys(n.any),function(o){(o=n.any[o])&&o(m)},0,99),n.echo&&setTimeout.each(Object.keys(n.echo),function(o){(o=n.echo[o])&&o.on("in",m)},0,99),((m.$$||"")._||D).soul&&(a=n.next)&&(a=a[S])&&(k={},Object.keys(m).forEach(function(o){k[o]=m[o]}),k.$=(m.$$||m.$).get(k.get=S),delete k.$$,delete k.$$$,a.on("in",k)),u(m,n))}r.on.in=s;function u(m,n){if(n=n||this.as||m.$._,!(m.$$&&this!==r.on)&&!(!m.put||n.soul)){var c=m.put||"",$=c["="]||c[":"],S,D=n.root,k=D.$.get(c["#"]).get(c["."])._;if(typeof($=O($))!="string"){this===r.on&&((k.echo||(k.echo={}))[n.id]=n);return}if(!((k.echo||(k.echo={}))[n.id]&&!(D.pass||"")[n.id])){if(S=D.pass){if(S[$+n.id])return;S[$+n.id]=1}(k.echo||(k.echo={}))[n.id]=n,n.has&&(n.link=$);var A=D.$.get(k.link=$)._;(A.echo||(A.echo={}))[k.id]=k;var S=n.ask||"";(S[""]||n.lex)&&A.on("out",{get:{"#":$}}),setTimeout.each(Object.keys(S),function(N,E){!N||!(E=S[N])||E.on("out",{get:{"#":$,".":N}})},0,99)}}}r.on.link=u;function b(m,n){var c=m.put||"",$=d!==c["="]?c["="]:c[":"],D=n.root,k,A;if(d===$){if(n.soul&&d!==n.put||(A=(m.$$||m.$||"")._||"",m["@"]&&(d!==A.put||d!==n.put)))return;(k=n.link||m.linked)&&delete(D.$.get(k)._.echo||"")[n.id],n.has&&(n.link=null),n.put=d,setTimeout.each(Object.keys(n.next||""),function(S,N){!(N=n.next[S])||(k&&delete(D.$.get(k).get(S)._.echo||"")[N.id],N.on("in",{get:S,put:d,$:N.$}))},0,99);return}n.soul||m.$$||(k=O($),A=m.$._||"",!((k===A.link||n.has&&!A.link)&&!((D.pass||"")[n.id]&&typeof k!="string"))&&(delete(A.echo||"")[n.id],b({get:n.get,put:d,$:m.$,linked:m.linked=m.linked||A.link},n)))}r.on.unlink=b;function p(m,n){var c=this.as,$=c.$._;$.root;var D=c.get||"",k=(m.put||"")[D["#"]]||"";if(!m.put||typeof D["."]=="string"&&d===k[D["."]]){if(d!==$.put||!$.soul&&!$.has)return;$.ack=($.ack||0)+1,$.on("in",{get:$.get,put:$.put=d,$:$.$,"@":m["@"]});return}(m._||{}).miss=1,r.on.put(m)}var f={},d,x=String.random,O=r.valid,h=function(m,n){return m&&Object.prototype.hasOwnProperty.call(m,n)},_=r.state,g=_.is,T=_.ify})(e,"./chain"),e(function(y){var r=e("./root");r.chain.get=function(d,x,O){var h,_;if(typeof d=="string"){if(d.length==0)return(h=this.chain())._.err={err:r.log("0 length key!",d)},x&&x.call(h,h._.err),h;var g=this,T=g._,m=T.next||b;(h=m[d])||(h=d&&l(d,g)),h=h&&h.$}else if(typeof d=="function"){let S=function(N,E,a){if(!S.stun&&!((j=c.pass)&&!j[$])){var o=N.$._,v=(N.$$||"")._,w=(v||o).put,I=!o.has&&!o.soul,C={},j;if((I||f===w)&&(w=f===((j=N.put)||"")["="]?f===(j||"")[":"]?j:j[":"]:j["="]),typeof(j=r.valid(w))=="string"&&(w=f===(j=c.$.get(j)._.put)?n.not?f:w:j),!(n.not&&f===w)){if(f===n.stun){if((j=c.stun)&&j.on&&(T.$.back(function(G){if(j.on(""+G.id,C={}),(C.run||0)<S.id)return C}),!C.run&&j.on(""+o.id,C={}),!C.run&&v&&j.on(""+v.id,C={}),S.id>C.run&&((!C.stun||C.stun.end)&&(C.stun=j.on("stun"),C.stun=C.stun&&C.stun.last),C.stun&&!C.stun.end))){(C.stun.add||(C.stun.add={}))[$]=function(){S(N,E,1)};return}if(f===w&&(a=0),(j=c.hatch)&&!j.end&&f===n.hatch&&!a){if(D[o.$._.id])return;D[o.$._.id]=1,j.push(function(){S(N,E,1)});return}D={}}if(c.pass){if(c.pass[$+o.id])return;c.pass[$+o.id]=1}if(n.on){n.ok.call(o.$,w,o.get,N,E||S);return}if(n.v2020){n.ok(N,E||S);return}Object.keys(N).forEach(function(G){j[G]=N[G]},j={}),N=j,N.put=w,n.ok.call(n.as,N,E||S)}}};var k=S;if(x===!0)return s(this,d,x,O),this;h=this;var T=h._,n=x||{},c=T.root,$;n.at=T,n.ok=d;var D={};return S.at=T,(T.any||(T.any={}))[$=String.random(7)]=S,S.off=function(){S.stun=1,T.any&&delete T.any[$]},S.rid=u,S.id=n.run||++c.once,_=c.pass,(c.pass={})[$]=1,n.out=n.out||{get:{}},T.on("out",n.out),c.pass=_,h}else{if(typeof d=="number")return this.get(""+d,x,O);if(typeof(_=p(d))=="string")return this.get(_,x,O);(_=this.get.next)&&(h=_(this,d))}return h?(x&&typeof x=="function"&&h.get(x,O),h):((h=this.chain())._.err={err:r.log("Invalid get request!",d)},x&&x.call(h,h._.err),h)};function l(d,x){var O=x._,h=O.next,_=x.chain(),g=_._;return h||(h=O.next={}),h[g.get=d]=g,x===O.root.$?g.soul=d:(O.soul||O.has)&&(g.has=d),g}function s(d,x,O,h){var _=d._,g=0,T;return(T=_.soul||_.link)?x(T,h,_):_.jam?_.jam.push([x,h]):(_.jam=[[x,h]],d.get(function(n,c){if(!(f===n.put&&!_.root.opt.super&&(T=Object.keys(_.root.opt.peers).length)&&++g<=T)){c.rid(n);var $=($=n.$)&&$._||{},D=0,k;for(T=_.jam,delete _.jam;k=T[D++];){var A=k[0];k=k[1],A&&A($.link||$.soul||r.valid(n.put)||((n.put||{})._||{})["#"],k,n,c)}}},{out:{get:{".":!0}}}),d)}function u(d){var x=this.at||this.on;if(!d||x.soul||x.has)return this.off();if(!!(d=(d=(d=d.$||d)._||d).id)){x.map;var O;if((O=this.seen||(this.seen={}))[d])return!0;O[d]=!0}}var b={},p=r.valid,f})(e,"./get"),e(function(y){var r=e("./root");r.chain.put=function(h,_,g){var T=this,m=T._,n=m.root;g=g||{},g.root=m.root,g.run||(g.run=n.once),l(g,m.id),g.ack=g.ack||_,g.via=g.via||T,g.data=g.data||h,g.soul||(g.soul=m.soul||typeof _=="string"&&_);var c=g.state=g.state||r.state();return typeof h=="function"?(h(function($){g.data=$,T.put(p,p,g)}),T):g.soul?(g.$=n.$.get(g.soul),g.todo=[{it:g.data,ref:g.$}],g.turn=g.turn||d,g.ran=g.ran||s,function $(){var D=g.todo,k=D.pop(),A=k.it;k.ref&&k.ref._.id;var S,N,E,a,o;if(l(g,k.ref),(a=k.todo)&&(N=a.pop(),A=A[N],a.length&&D.push(k)),N&&(D.path||(D.path=[])).push(N),!(S=x(A))&&!(o=r.is(A))){if(!Object.plain(A)){s.err(g,"Invalid data: "+b(A)+" at "+(g.via.back(function(j){j.get&&a.push(j.get)},a=[])||a.join("."))+"."+(D.path||[]).join("."));return}for(var v=g.seen||(g.seen=[]),w=v.length;w--;)if(A===(a=v[w]).it){S=A=a.link;break}}if(N&&S)k.node=O(k.node,N,c,A);else{let j=function(G,R){var P=E.link["#"];R&&(R.off(),R.rid(G));var B=P||G.soul||(a=(G.$$||G.$)._||"").soul||a.link||((a=a.put||"")._||"")["#"]||a["#"]||((a=G.put||"")&&G.$$?a["#"]:(a["="]||a[":"]||"")["#"]);if(!P&&l(g,G.$),!B&&!k.link["#"]){(k.wait||(k.wait=[])).push(function(){j(G,R)});return}B||(B=[],(G.$$||G.$).back(function(M){if(a=M.soul||M.link)return B.push(a);B.push(M.get)}),B=B.reverse().join("/")),E.link["#"]=B,!o&&(((g.graph||(g.graph={}))[B]=E.node||(E.node={_:{}}))._["#"]=B),delete g.wait[I],E.wait&&setTimeout.each(E.wait,function(M){M&&M()}),g.ran(g)};var C=j;if(!g.seen){s.err(g,"Data at root of graph must be a node (an object).");return}g.seen.push(E={it:A,link:{},todo:o?[]:Object.keys(A).sort().reverse(),path:(D.path||[]).slice(),up:k}),k.node=O(k.node,N,c,E.link),!o&&E.todo.length&&D.push(E);var I=g.seen.length;(g.wait||(g.wait={}))[I]="",a=(E.ref=o?A:N?k.ref.get(N):k.ref)._,(a=A&&(A._||"")["#"]||a.soul||a.link)?j({soul:a}):E.ref.get(j,{run:g.run,v2020:1,out:{get:{".":" "}}})}if(!D.length)return g.ran(g);g.turn($)}(),T):(u(g),T)};function l(h,_){if(!!_){_=(_._||"").id||_;var g=h.root.stun||(h.root.stun={on:r.on}),T={},m;h.stun||(h.stun=g.on("stun",function(){})),(m=g.on(""+_))&&m.the.last.next(T),!(T.run>=h.run)&&g.on(""+_,function(n){if(h.stun.end){this.off(),this.to.next(n);return}n.run=n.run||h.run,n.stun=n.stun||h.stun})}}function s(h){if(h.err){s.end(h.stun,h.root);return}if(!(h.todo.length||h.end||!Object.empty(h.wait))){h.end=1;var _=h.$.back(-1)._,g=_.root,T=_.ask(function($){g.on("ack",$),$.err&&!$.lack&&r.log($),++m>(h.acks||0)&&this.off(),h.ack&&h.ack($,this)},h.opt),m=0,n=h.stun,c;(c=function(){!n||(s.end(n,g),setTimeout.each(Object.keys(n=n.add||""),function($){($=n[$])&&$()}))}).hatch=c,h.ack&&!h.ok&&(h.ok=h.acks||9),h.via._.on("out",{put:h.out=h.graph,ok:h.ok&&{"@":h.ok+1},opt:h.opt,"#":T,_:c})}}s.end=function(h,_){h.end=f,h.the.to===h&&h===h.the.last&&delete _.stun,h.off()},s.err=function(h,_){(h.ack||f).call(h,h.out={err:h.err=r.log(_)}),h.ran(h)};function u(h){var _=h.via._,g;h.via=h.via.back(function(T){if(T.soul||!T.get)return T.$;g=h.data,(h.data={})[T.get]=g}),(!h.via||!h.via._.soul)&&(h.via=_.root.$.get(((h.data||"")._||"")["#"]||_.$.back("opt.uuid")())),h.via.put(h.data,h.ack,h)}function b(h,_){return h&&(_=h.constructor)&&_.name||typeof h}var p,f=function(){},d=setTimeout.turn,x=r.valid,O=r.state.ify})(e,"./put"),e(function(y){var r=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),y.exports=r})(e,"./index"),e(function(y){var r=e("./index");r.chain.on=function(u,b,p,f){var d=this,x=d._;x.root;var O;if(typeof u=="string")return b?(O=x.on(u,b,p||x,f),p&&p.$&&(p.subs||(p.subs=[])).push(O),d):x.on(u);var h=b;return(h=h===!0?{change:!0}:h||{}).not=1,h.on=1,d.get(u,h),d},r.chain.once=function(u,b){if(b=b||{},!u)return l(this);var p=this,f=p._,d=f.root;f.put;var x=String.random(7),O;return p.get(function(h,_,g,T){var m=this,n=m._,c=n.one||(n.one={});if(T.stun||c[x]==="")return;if((O=r.valid(h))===!0){$();return}if(typeof O=="string")return;clearTimeout((f.one||"")[x]),clearTimeout(c[x]),c[x]=setTimeout($,b.wait||99);function $(D){if(!n.has&&!n.soul&&(n={put:h,get:_}),s===(O=n.put)&&(O=((g.$$||"")._||"").put),typeof r.valid(O)=="string"&&(O=d.$.get(O)._.put,O===s&&!D)){c[x]=setTimeout(function(){$(1)},b.wait||99);return}T.stun||c[x]!==""&&(c[x]="",(f.soul||f.has)&&T.off(),u.call(m,O,n.get),clearTimeout(c[x]))}},{on:1}),p};function l(u,b,p){return r.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(p=u.chain())._.nix=u.once(function(f,d){p._.on("in",this._)}),p._.lex=u._.lex,p}r.chain.off=function(){var u=this,b=u._,p,f=b.back;if(!!f)return b.ack=0,(p=f.next)&&p[b.get]&&delete p[b.get],(p=f.ask)&&delete p[b.get],(p=f.put)&&delete p[b.get],(p=b.soul)&&delete f.root.graph[p],(p=b.map)&&Object.keys(p).forEach(function(d,x){x=p[d],x.link&&f.root.$.get(x.link).off()}),(p=b.next)&&Object.keys(p).forEach(function(d,x){x=p[d],x.$.off()}),b.on("off",{}),u};var s})(e,"./on"),e(function(y){var r=e("./index"),l=r.chain.get.next;r.chain.get.next=function(p,f){var d;return Object.plain(f)?(d=((d=f["#"])||"")["="]||d)?p.get(d):((d=p.chain()._).lex=f,p.on("in",function(x){String.match(x.get||(x.put||"")["."],f["."]||f["#"]||f)&&d.on("in",x),this.to.next(x)}),d.$):(l||u)(p,f)},r.chain.map=function(p,f,d){var x=this,O=x._,h,_;return Object.plain(p)&&(h=p["."]?p:{".":p},p=b),p?(r.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),_=x.chain(),x.map().on(function(g,T,m,n){var c=(p||u).call(this,g,T,m,n);if(b!==c){if(g===c)return _._.on("in",m);if(r.is(c))return _._.on("in",c._);var $={};Object.keys(m.put).forEach(function(D){$[D]=m.put[D]},$),$["="]=c,_._.on("in",{get:T,put:$})}}),_):((_=O.each)||((O.each=_=x.chain())._.lex=h||_._.lex||O.lex,_._.nix=x.back("nix"),x.on("in",s,_._)),_)};function s(p){this.to.next(p);var f=this.as,d=p.$,x=d._,O=p.put,h;!x.soul&&!p.$$||(h=f.lex)&&!String.match(p.get||(O||"")["."],h["."]||h["#"]||h)||r.on.link(p,f)}var u=function(){},b})(e,"./map"),e(function(y){var r=e("./index");r.chain.set=function(l,s,u){var b=this,p=b.back(-1),f,d;return s=s||function(){},u=u||{},u.item=u.item||l,(f=((l||"")._||"")["#"])&&((l={})["#"]=f),typeof(d=r.valid(l))=="string"?b.get(f=d).put(l,s,u):r.is(l)?(b.put(function(x){l.get(function(O,h,_){if(!O)return s.call(b,{err:r.log('Only a node can be linked! Not "'+_.put+'"!')});(d={})[O]={"#":O},x(d)},!0)}),l):(Object.plain(l)&&(l=p.get(f=b.back("opt.uuid")()).put(l)),b.get(f||p.back("opt.uuid")(7)).put(l,s,u))}})(e,"./set"),e(function(y){e("./shim");var r=function(){},l=JSON.parseAsync||function(p,f,d){var x,O=+new Date;try{f(x,JSON.parse(p,d),s.sucks(+new Date-O))}catch(h){f(h)}},s=JSON.stringifyAsync||function(p,f,d,x){var O,h=+new Date;try{f(O,JSON.stringify(p,d,x),s.sucks(+new Date-h))}catch(_){f(_)}};s.sucks=function(p){p>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),s.sucks=r)};function u(p){var f=function(){},d=p.opt||{};d.log=d.log||console.log,d.gap=d.gap||d.wait||0,d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.pack=d.pack||d.max*.01*.01,d.puff=d.puff||9;var x=setTimeout.turn||setTimeout,O=p.dup,h=O.check,_=O.track,g=f.hear=function(n,c){if(!!n){if(d.max<=n.length)return f.say({dam:"!",err:"Message too big!"},c);f===this&&(g.d+=n.length||0,++g.c);var $=c.SH=+new Date,D=n[0],k;if(D==="["){l(n,function(A,S){if(A||!S)return f.say({dam:"!",err:"DAM JSON parse error."},c);console.STAT&&console.STAT(+new Date,S.length,"# on hear batch");var N=d.puff;(function E(){for(var a=+new Date,o=0,v;o<N&&(v=S[o++]);)f.hear(v,c);S=S.slice(o),console.STAT&&console.STAT(a,+new Date-a,"hear loop"),T(c),S.length&&x(E,0)})()}),n="";return}if(D==="{"||(n["#"]||Object.plain(n))&&(k=n)){if(k)return g.one(k,c,$);l(n,function(A,S){if(A||!S)return f.say({dam:"!",err:"DAM JSON parse error."},c);g.one(S,c,$)});return}}};g.one=function(n,c,E){var D,k,A,S,N;if(n.DBG&&(n.DBG=N={DBG:n.DBG}),N&&(N.h=E),N&&(N.hp=+new Date),(D=n["#"])||(D=n["#"]=String.random(9)),!(A=h(D))&&(k=n["##"],!(k&&(A=n["@"]||n.get&&D)&&O.check(S=A+k)))){if((n._=function(){}).via=f.leap=c,(A=n["><"])&&typeof A=="string"&&A.slice(0,99).split(",").forEach(function(a){this[a]=1},n._.yo={}),A=n.dam){(A=f.hear[A])&&A(n,c,p),_(D);return}(A=n.ok)&&(n._.near=A["/"]);var E=+new Date;N&&(N.is=E),c.SI=D,p.on("in",f.last=n),N&&(N.hd=+new Date),console.STAT&&console.STAT(E,+new Date-E,n.get?"msg get":n.put?"msg put":"msg"),(A=_(D)).via=c,n.get&&(A.it=n),S&&_(S),f.leap=f.last=null}},g.c=g.d=0,function(){var n=0,c;f.hash=function(k,A){var S,N,E,a=+new Date;s(k.put,function o(v,w){var I=(N||(N=E=w||"")).slice(0,32768);if(S=String.hash(I,S),N=N.slice(32768),N){x(o,0);return}console.STAT&&console.STAT(a,+new Date-a,"say json+hash"),k._.$put=E,k["##"]=S,f.say(k,A),delete k._.$put},$)};function $(k,A){var S;return A instanceof Object?(Object.keys(A).sort().forEach(D,{to:S={},on:A}),S):A}function D(k){this.to[k]=this.on[k]}f.say=function(k,A){var S;if((S=this)&&(S=S.to)&&S.next&&S.next(k),!k)return!1;var N,E,a=k["@"],o=k._||(k._=function(){}),v=k.DBG,w=+new Date;if(o.y=o.y||w,A||v&&(v.y=w),(N=k["#"])||(N=k["#"]=String.random(9)),!c&&_(N),!k["##"]&&b!==k.put&&!o.via&&a){f.hash(k,A);return}if(!A&&a&&(A=(S=O.s[a])&&(S.via||(S=S.it)&&(S=S._)&&S.via)||(S=f.last)&&a===S["#"]&&f.leap),!A&&a)return O.s[a]?void 0:(console.STAT&&console.STAT(+new Date,++n,"total no peer to ack to"),!1);if(!A&&f.way)return f.way(k);if(v&&(v.yh=+new Date),!(E=o.raw)){f.raw(k,A);return}if(v&&(v.yr=+new Date),!A||!A.id){if(!Object.plain(A||d.peers))return!1;var w=+new Date;d.puff;var I=d.peers,C=Object.keys(A||d.peers||{});console.STAT&&console.STAT(w,+new Date-w,"peer keys"),function R(){var P=+new Date;c=1;var B=o.raw;o.raw=E;for(var M=0,L;M<9&&(L=(C||"")[M++]);)!(L=I[L]||(A||"")[L])||f.say(k,L);o.raw=B,c=0,C=C.slice(M),console.STAT&&console.STAT(P,+new Date-P,"say loop"),C.length&&(x(R,0),a&&_(a))}();return}if(!A.wire&&f.wire&&f.wire(A),N!==A.last){if(A.last=N,A===o.via||(S=o.yo)&&(S[A.url]||S[A.pid]||S[A.id]))return!1;if(console.STAT&&console.STAT(w,((v||o).yp=+new Date)-(o.y||w),"say prep"),!c&&a&&_(a),A.batch){if(A.tail=(S=A.tail||0)+E.length,A.tail<=d.pack){A.batch+=(S?",":"")+E;return}T(A)}A.batch="[";var j=+new Date;setTimeout(function(){console.STAT&&console.STAT(j,+new Date-j,"0ms TO"),T(A)},d.gap),m(E,A),console.STAT&&a===A.SI&&console.STAT(w,+new Date-A.SH,"say ack")}},f.say.c=f.say.d=0,f.raw=function(k,A){if(!k)return"";var S=k._||{},N,E;if(E=S.raw)return E;if(typeof k=="string")return k;var a=k["##"],o=k["@"];if(a&&o){if(!S.via&&h(o+a))return!1;if((E=(O.s[o]||"").it)||(E=f.last)&&o===E["#"]){if(a===E["##"])return!1;E["##"]||(E["##"]=a)}}if(!k.dam&&!k["@"]){var v=0,w=[];E=d.peers;for(var I in E){var C=E[I];if(w.push(C.url||C.pid||C.id),++v>6)break}v>1&&(k["><"]=w.join())}if(k.put&&(E=k.ok)&&(k.ok={"@":(E["@"]||1)-1,"/":E["/"]==k._.near?f.near:E["/"]}),N=S.$put){E={},Object.keys(k).forEach(function(G){E[G]=k[G]}),E.put=":])([:",s(E,function(G,R){if(!G){var P=+new Date;E=R.indexOf('"put":":])([:"'),j(b,R=R.slice(0,E+6)+N+R.slice(E+14)),console.STAT&&console.STAT(P,+new Date-P,"say slice")}});return}s(k,j);function j(G,R){G||(S.raw=R,f.say(k,A))}}}();function T(n){var c=n.batch,$=typeof c=="string";if($&&(c+="]"),n.batch=n.tail=null,!!c&&!($?3>c.length:!c.length)){if(!$)try{c=c.length===1?c[0]:JSON.stringify(c)}catch(D){return d.log("DAM JSON stringify error",D)}!c||m(c,n)}}function m(n,c){try{var $=c.wire;c.say?c.say(n):$.send&&$.send(n),f.say.d+=n.length||0,++f.say.c}catch{(c.queue=c.queue||[]).push(n)}}return f.near=0,f.hi=function(n){var c=n.wire,$;if(!c){f.wire(n.length&&{url:n,id:n}||n);return}n.id?d.peers[n.url||n.id]=n:($=n.id=n.id||n.url||String.random(9),f.say({dam:"?",pid:p.opt.pid},d.peers[$]=n),delete O.s[n.last]),n.met||(f.near++,n.met=+new Date,p.on("hi",n)),$=n.queue,n.queue=[],setTimeout.each($||[],function(D){m(D,n)},0,9)},f.bye=function(n){n.met&&--f.near,delete n.met,p.on("bye",n);var c=+new Date;c=c-(n.met||c),f.bye.time=((f.bye.time||c)+c)/2},f.hear["!"]=function(n,c){d.log("Error:",n.err)},f.hear["?"]=function(n,c){n.pid&&(c.pid||(c.pid=n.pid),n["@"])||(f.say({dam:"?",pid:d.pid,"@":n["#"]},c),delete O.s[c.last])},f.hear.mob=function(n,c){if(!!n.peers){var $=Object.keys(n.peers),D=$[Math.random()*$.length>>0];!D||(f.bye(c),f.hi(D))}},p.on("create",function(n){n.opt.pid=n.opt.pid||String.random(9),this.to.next(n),n.on("out",f.say)}),p.on("bye",function(n,c){n=d.peers[n.id||n]||n,this.to.next(n),n.bye?n.bye():(c=n.wire)&&c.close&&c.close(),delete d.peers[n.id],n.wire=null}),p.on("bye",function(n,c){this.to.next(n),(c=console.STAT)&&(c.peers=f.near),(c=n.url)&&setTimeout(function(){},d.lack||9e3)}),p.on("hi",function(n,c){if(this.to.next(n),(c=console.STAT)&&(c.peers=f.near),!d.super){var $=Object.keys(p.next||"");$.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each($,function(D){var k=p.next[D];if(d.super||(k.ask||"")[""]){f.say({get:{"#":D}},n);return}setTimeout.each(Object.keys(k.ask||""),function(A){!A||f.say({"##":String.hash((p.graph[D]||"")[A]),get:{"#":D,".":A}},n)})})}}),f}var b;try{y.exports=u}catch{}})(e,"./mesh"),e(function(y){var r=e("./index");r.Mesh=e("./mesh"),r.on("opt",function(s){if(this.to.next(s),s.once)return;var u=s.opt;if(u.WebSocket===!1)return;var b=r.window||{},p=u.WebSocket||b.WebSocket||b.webkitWebSocket||b.mozWebSocket;if(!p)return;u.WebSocket=p;var f=u.mesh=u.mesh||r.Mesh(s);f.wire||u.wire,f.wire=u.wire=d;function d(_){try{if(!_||!_.url)return T&&T(_);var g=_.url.replace(/^http/,"ws"),T=_.wire=new u.WebSocket(g);return T.onclose=function(){O(_),u.mesh.bye(_)},T.onerror=function(m){O(_)},T.onopen=function(){u.mesh.hi(_)},T.onmessage=function(m){!m||u.mesh.hear(m.data||m,_)},T}catch{u.mesh.bye(_)}}setTimeout(function(){!u.super&&s.on("out",{dam:"hi"})},1);var x=2*999;function O(_){clearTimeout(_.defer),u.peers[_.url]&&(h&&_.retry<=0||(_.retry=(_.retry||u.retry+1||60)-(-_.tried+(_.tried=+new Date)<x*4?1:0),_.defer=setTimeout(function g(){if(h&&h.hidden)return setTimeout(g,x);d(_)},x)))}var h=""+l!=typeof document&&document});var l})(e,"./websocket"),e(function(y){if(!(typeof Gun>"u")){var r=function(){},l;try{l=(Gun.window||r).localStorage}catch{}l||(Gun.log("Warning: No localStorage exists to persist data to!"),l={setItem:function(u,b){this[u]=b},removeItem:function(u){delete this[u]},getItem:function(u){return this[u]}});var s=JSON.stringifyAsync||function(u,b,p,f){var d;try{b(d,JSON.stringify(u,p,f))}catch(x){b(x)}};Gun.on("create",function u(b){this.to.next(b);var p=b.opt;b.graph;var f=[],d,x,O,h;if(p.localStorage===!1)return;p.prefix=p.file||"gun/";try{d=u[p.prefix]=u[p.prefix]||JSON.parse(O=l.getItem(p.prefix))||{}}catch{d=u[p.prefix]={}}O=(O||"").length,b.on("get",function(g){this.to.next(g);var T=g.get,m,n,c,$;!T||!(m=T["#"])||(n=d[m]||$,n&&(c=T["."])&&!Object.plain(c)&&(n=Gun.state.ify({},c,Gun.state.is(n,c),n[c],m)),Gun.on.get.ack(g,n))}),b.on("put",function(g){this.to.next(g);var T=g.put,m=T["#"],n=T["."],c=g["#"],$=g.ok||"";if(d[m]=Gun.state.ify(d[m],n,T[">"],T[":"],m),h&&O>4999880){b.on("in",{"@":c,err:"localStorage max!"});return}!g["@"]&&(!g._.via||Math.random()<$["@"]/$["/"])&&f.push(c),!x&&(x=setTimeout(_,9+O/333))});function _(){if(!f.length&&((setTimeout.turn||"").s||"").length){setTimeout(_,99);return}var g=f;clearTimeout(x),x=!1,f=[],s(d,function(T,m){try{!T&&l.setItem(p.prefix,m)}catch(n){T=h=n||"localStorage failure"}T&&(Gun.log(T+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),b.on("localStorage:error",{err:T,get:p.prefix,put:d})),O=m.length,setTimeout.each(g,function(n){b.on("in",{"@":n,err:T,ok:0})},0,99)})}})}})(e,"./localStorage")})(),function(){var E;if(""+E!=typeof Gun){var e=function(a){console.warn("Warning! Deprecated internal utility will break in next version:",a)},i=Gun;i.fn=i.fn||{is:function(a){return e("fn"),!!a&&typeof a=="function"}},i.bi=i.bi||{is:function(a){return e("bi"),a instanceof Boolean||typeof a=="boolean"}},i.num=i.num||{is:function(a){return e("num"),!y(a)&&(a-parseFloat(a)+1>=0||a===1/0||a===-1/0)}},i.text=i.text||{is:function(a){return e("text"),typeof a=="string"}},i.text.ify=i.text.ify||function(a){return e("text.ify"),i.text.is(a)?a:typeof JSON<"u"?JSON.stringify(a):a&&a.toString?a.toString():a},i.text.random=i.text.random||function(a,o){e("text.random");var v="";for(a=a||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";a>0;)v+=o.charAt(Math.floor(Math.random()*o.length)),a--;return v},i.text.match=i.text.match||function(a,o){var v,w;return e("text.match"),typeof a!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},v=o["="]||o["*"]||o[">"]||o["<"],a===v?!0:w!==o["="]?!1:(v=o["*"]||o[">"]||o["<"],a.slice(0,(v||"").length)===v?!0:w!==o["*"]?!1:w!==o[">"]&&w!==o["<"]?a>=o[">"]&&a<=o["<"]:w!==o[">"]&&a>=o[">"]||w!==o["<"]&&a<=o["<"]))},i.text.hash=i.text.hash||function(a,o){if(e("text.hash"),typeof a=="string"){if(o=o||0,!a.length)return o;for(var v=0,w=a.length,I;v<w;++v)I=a.charCodeAt(v),o=(o<<5)-o+I,o|=0;return o}},i.list=i.list||{is:function(a){return e("list"),a instanceof Array}},i.list.slit=i.list.slit||Array.prototype.slice,i.list.sort=i.list.sort||function(a){return e("list.sort"),function(o,v){return!o||!v?0:(o=o[a],v=v[a],o<v?-1:o>v?1:0)}},i.list.map=i.list.map||function(a,o,v){return e("list.map"),S(a,o,v)},i.list.index=1,i.obj=i.boj||{is:function(a){return e("obj"),a?a instanceof Object&&a.constructor===Object||Object.prototype.toString.call(a).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},i.obj.put=i.obj.put||function(a,o,v){return e("obj.put"),(a||{})[o]=v,a},i.obj.has=i.obj.has||function(a,o){return e("obj.has"),a&&Object.prototype.hasOwnProperty.call(a,o)},i.obj.del=i.obj.del||function(a,o){if(e("obj.del"),!!a)return a[o]=null,delete a[o],a},i.obj.as=i.obj.as||function(a,o,v,w){return e("obj.as"),a[o]=a[o]||(w===v?{}:v)},i.obj.ify=i.obj.ify||function(a){if(e("obj.ify"),c(a))return a;try{a=JSON.parse(a)}catch{a={}}return a},function(){var a;function o(v,w){D(this,w)&&a!==this[w]||(this[w]=v)}i.obj.to=i.obj.to||function(v,w){return e("obj.to"),w=w||{},S(v,o,w),w}}(),i.obj.copy=i.obj.copy||function(a){return e("obj.copy"),a&&JSON.parse(JSON.stringify(a))},function(){function a(o,v){var w=this.n,I;if(!(w&&(v===w||c(w)&&D(w,v)))&&I!==v)return!0}i.obj.empty=i.obj.empty||function(o,v){return e("obj.empty"),o?!S(o,a,{n:v}):!0}}(),function(){function a(w,I){if(arguments.length===2){a.r=a.r||{},a.r[w]=I;return}a.r=a.r||[],a.r.push(w)}var o=Object.keys,v;Object.keys=Object.keys||function(w){return v(w,function(I,C,j){j(C)})},i.obj.map=v=i.obj.map||function(w,I,C){e("obj.map");var j,G=0,R,P,B,M,L=typeof I=="function";if(a.r=j,o&&c(w)&&(B=o(w),M=!0),C=C||{},y(w)||B)for(R=(B||w).length;G<R;G++){var X=G+i.list.index;if(L){if(P=M?I.call(C,w[B[G]],B[G],a):I.call(C,w[G],X,a),P!==j)return P}else if(I===w[M?B[G]:G])return B?B[G]:X}else for(G in w)if(L){if(D(w,G)&&(P=C?I.call(C,w[G],G,a):I(w[G],G,a),P!==j))return P}else if(I===w[G])return G;return L?a.r:i.list.index?0:-1}}(),i.time=i.time||{},i.time.is=i.time.is||function(a){return e("time"),a?a instanceof Date:+new Date().getTime()};var m=i.fn.is,y=i.list.is,n=i.obj,c=n.is,D=n.has,S=n.map,r={};r.is=function(a){return e("val.is"),a===E?!1:a===null?!0:a===1/0?!1:u(a)||s(a)||h(a)?!0:r.link.is(a)||!1},r.link=r.rel={_:"#"},function(){r.link.is=function(o){if(e("val.link.is"),o&&o[l]&&!o._&&c(o)){var v={};if(S(o,a,v),v.id)return v.id}return!1};function a(o,v){var w=this;if(w.id)return w.id=!1;if(v==l&&u(o))w.id=o;else return w.id=!1}}(),r.link.ify=function(a){return e("val.link.ify"),A({},l,a)},i.obj.has._=".";var l=r.link._,E,s=i.bi.is,h=i.num.is,u=i.text.is,n=i.obj,c=n.is,A=n.put,S=n.map;i.val=i.val||r;var b={_:"_"};b.soul=function(a,o){return e("node.soul"),a&&a._&&a._[o||d]},b.soul.ify=function(a,o){return e("node.soul.ify"),o=typeof o=="string"?{soul:o}:o||{},a=a||{},a._=a._||{},a._[d]=o.soul||a._[d]||f(),a},b.soul._=r.link._,function(){b.is=function(o,v,w){e("node.is");var I;return c(o)&&(I=b.soul(o))?!S(o,a,{as:w,cb:v,s:I,n:o}):!1};function a(o,v){if(v!==b._){if(!r.is(o))return!0;this.cb&&this.cb.call(this.as,o,v,this.n,this.s)}}}(),function(){b.ify=function(o,v,w){return e("node.ify"),v?typeof v=="string"?v={soul:v}:typeof v=="function"&&(v={map:v}):v={},v.map&&(v.node=v.map.call(w,o,E,v.node||{})),(v.node=b.soul.ify(v.node||{},v))&&S(o,a,{o:v,as:w}),v.node};function a(o,v){var w=this.o,I,C;if(w.map){I=w.map.call(this.as,o,""+v,w.node),C===I?$(w.node,v):w.node&&(w.node[v]=I);return}r.is(o)&&(w.node[v]=o)}}();var n=i.obj,c=n.is,$=n.del,S=n.map,p=i.text,f=p.random,d=b.soul._,E;i.node=i.node||b;var x=i.state;x.lex=function(){return e("state.lex"),x().toString(36).replace(".","")},x.to=function(a,o,v){e("state.to");var w=(a||{})[o];return c(w)&&(w=N(w)),x.ify(v,o,x.is(a,o),w,b.soul(a))},function(){x.map=function(o,v,w){e("state.map");var I,C=c(C=o||v)?C:null;return o=m(o=o||v)?o:null,C&&!o?(v=h(v)?v:x(),C[g]=C[g]||{},S(C,a,{o:C,s:v}),C):(w=w||c(v)?v:I,v=h(v)?v:x(),function(j,G,R,P){if(!o)return a.call({o:R,s:v},j,G),j;o.call(w||this||{},j,G,R,P),!(D(R,G)&&I===R[G])&&a.call({o:R,s:v},j,G)})};function a(o,v){g!==v&&x.ify(this.o,v,this.s)}}();var n=i.obj;n.as;var D=n.has,c=n.is,S=n.map,N=n.copy,O=i.num,h=O.is,_=i.fn,m=_.is,g=b._,E,T={};(function(){T.is=function(v,w,I,C){return e("graph.is"),!v||!c(v)||k(v)?!1:!S(v,a,{cb:w,fn:I,as:C})};function a(v,w){if(!v||w!==b.soul(v)||!b.is(v,this.fn,this.as))return!0;!this.cb||(o.n=v,o.as=this.as,this.cb.call(o.as,v,w,o))}function o(v){v&&b.is(o.n,v,o.as)}})(),function(){T.ify=function(C,j,G){e("graph.ify");var R={path:[],obj:C};return j?typeof j=="string"?j={soul:j}:typeof j=="function"&&(j.map=j):j={},typeof G=="string"&&(j.soul=j.soul||G,G=E),j.soul&&(R.link=r.link.ify(j.soul)),j.shell=(G||{}).shell,j.graph=j.graph||{},j.seen=j.seen||[],j.as=j.as||G,a(j,R),j.root=R.node,j.graph};function a(C,j){var G;return(G=I(C,j))?G:(j.env=C,j.soul=v,b.ify(j.obj,o,j)&&(j.link=j.link||r.link.ify(b.soul(j.node)),j.obj!==C.shell&&(C.graph[r.link.is(j.link)]=j.node)),j)}function o(C,j,G){var R=this,P=R.env,B,M;if(b._===j&&D(C,r.link._))return G._;if(!!(B=w(C,j,G,R,P))){if(j||(R.node=R.node||G||{},D(C,b._)&&b.soul(C)&&(R.node._=N(C._)),R.node=b.soul.ify(R.node,r.link.is(R.link)),R.link=R.link||r.link.ify(b.soul(R.node))),(M=P.map)&&(M.call(P.as||{},C,j,G,R),D(G,j))){if(C=G[j],E===C){$(G,j);return}if(!(B=w(C,j,G,R,P)))return}if(!j)return R.node;if(B===!0)return C;if(M=a(P,{obj:C,path:R.path.concat(j)}),!!M.node)return M.link}}function v(C){var j=this,G=r.link.is(j.link),R=j.env.graph;j.link=j.link||r.link.ify(C),j.link[r.link._]=C,j.node&&j.node[b._]&&(j.node[b._][r.link._]=C),D(R,G)&&(R[C]=R[G],$(R,G))}function w(C,j,G,R,P){var B;if(r.is(C))return!0;if(c(C))return 1;if(B=P.invalid)return C=B.call(P.as||{},C,j,G),w(C,j,G,R,P);P.err="Invalid value at '"+R.path.concat(j).join(".")+"'!",i.list.is(C)&&(P.err+=" Use `.set(item)` instead of an Array.")}function I(C,j){for(var G=C.seen,R=G.length,P;R--;)if(P=G[R],j.obj===P.obj)return P;G.push(j)}}(),T.node=function(a){e("graph.node");var o=b.soul(a);if(!!o)return A({},o,a)},function(){T.to=function(o,v,w){if(e("graph.to"),!!o){var I={};return w=w||{seen:{}},S(o[v],a,{obj:I,graph:o,opt:w}),I}};function a(o,v){var w,I;if(b._===v){if(k(o,r.link._))return;this.obj[v]=N(o);return}if(!(w=r.link.is(o))){this.obj[v]=o;return}if(I=this.opt.seen[w]){this.obj[v]=I;return}this.obj[v]=this.opt.seen[w]=T.to(this.graph,w,this.opt)}}();var m=i.fn.is,n=i.obj,c=n.is,$=n.del,D=n.has,k=n.empty,A=n.put,S=n.map,N=n.copy,E;i.graph=i.graph||T}}()})(ee);(function(t){t.exports=ee.exports})(te);const nn=tn(te.exports),rn=ut('<div><div class="grid grid-cols-3 grid-rows-3"></div><div class="flex justify-center align-middle m-auto"><button class="btn border-4 my-4 py-2 px-4"></button></div></div>'),on=nn("https://mvp-gun.herokuapp.com/gun"),un=()=>{const[t,e]=z(Array.from({length:9},()=>F.None)),[i,y]=z(F.Circle);let r=F.None;const l=V(()=>{const _=ke(t());return _!==F.None&&(r=F.None),_}),s=_=>{let g=t(),T=i();r===F.None&&(r=T),T===r&&g[_]===F.None&&(g[_]=T,e([...g]),T=we(T),y(T),b())},u=()=>{e(Array.from({length:9},()=>F.None)),y(F.Circle),r=F.None,b()},b=()=>{d.put({field:{...t()},turn:i()})},p=Fe();let f=p.query.id;if(!f){f=Ze();const _=p.pathname;We()(`${_}?id=${f}`,{replace:!0})}const d=on.get(f);d.get("field").on(_=>{const g=Object.values(_),T=g.slice(0,g.length-1);e(T)}),d.get("turn").on(_=>{y(_)});const[x,O]=z(!1);let h;return(()=>{const _=rn.cloneNode(!0),g=_.firstChild,T=g.nextSibling,m=T.firstChild;return Z(g,W(ye,{get each(){return t()},children:(n,c)=>W(Se,{state:n,onClick:()=>s(c())})})),Z(_,W(zt,{get children(){return[W(lt,{get when(){return l()===F.Circle},get children(){return W(mt,{restartGame:u,result:"Winner: Circle"})}}),W(lt,{get when(){return l()===F.Cross},get children(){return W(mt,{restartGame:u,result:"Winner: Cross"})}}),W(lt,{get when(){return l()===F.Draw},get children(){return W(mt,{restartGame:u,result:"Draw"})}})]}}),T),m.$$click=()=>{O(!0),h&&clearTimeout(h),h=setTimeout(()=>{O(!1)},5*1e3),navigator.clipboard.writeText(window.location.href)},Z(m,()=>x()?"Link Copied!":"Get Link"),_})()};_t(["click"]);const fn=ut('<div class="absolute inset-0 flex justify-center items-center bg-artichoke"></div>'),sn=()=>W(He,{get children(){const t=fn.cloneNode(!0);return Z(t,W(un,{})),t}});ge(()=>W(sn,{}),document.getElementById("root"));
