import{d as y,a as T,i as c,c as r,M as m,s as G,S as L,t as i,b as w,u as F,e as I,f as S,o as W,g as B,A as M,h as R,F as q}from"./index.82520075.js";import{P as n,M as A,g as P,h as O,t as z,u as H,a as J,L as K}from"./layout.ec27a939.js";const Q="/tic-tac-toe-gunjs/assets/circle.2c56a12d.svg",U="/tic-tac-toe-gunjs/assets/cross.f03db0bd.svg",V=i('<img alt="circle" class="animate-spawn">'),X=i('<img alt="cross" class="animate-spawn">'),Y=i('<button class="btn hover-shadow border-8 field flex justify-center items-center m-auto" aria-label="Tic Tac Toe Button"></button>'),Z=a=>(()=>{const l=Y.cloneNode(!0);return T(l,"click",a.onClick,!0),c(l,r(L,{get fallback(){return[]},get children(){return[r(m,{get when(){return a.state===n.Circle},get children(){const o=V.cloneNode(!0);return G(o,"src",Q),o}}),r(m,{get when(){return a.state===n.Cross},get children(){const o=X.cloneNode(!0);return G(o,"src",U),o}})]}})),l})();y(["click"]);const ee=i('<div class="flex flex-col"><h3 class="m-3 text-4xl text-center"></h3><button class="py-2 px-3 rounded border-green border-2 bg-terra text-green m-auto cursor-pointer">Restart Game</button></div>'),v=a=>r(A,{foregroundClass:"animate-spawn animation-delay-2000",backgroundClass:"animate-fadein animation-delay-1000",get children(){const l=ee.cloneNode(!0),o=l.firstChild,d=o.nextSibling;return c(o,()=>a.result),T(d,"click",a.restartGame,!0),l}});y(["click"]);const te=i("<span>Could not find lobby</span>"),re=i('<div><div class="grid grid-cols-3 grid-rows-3 gap-4 aspect-square"></div><div class="flex flex-row justify-center align-middle gap-x-3"><button class="btn hover-shadow border-4 my-4 py-2 px-4"></button></div></div>'),ne=()=>{const[a,l]=w(Array.from({length:9},()=>n.None)),[o,d]=w(n.Circle);let u=F().query.id;const[C]=I(async()=>u?await J(u):!1),$=P(u);$.get("field").on(t=>{const e=Object.values(t),s=e.slice(0,e.length-1);l(s)}),$.get("turn").on(t=>{d(t)});let g=n.None;const h=S(()=>{const t=O(a());return t!==n.None&&(g=n.None),t}),f=t=>{let e=a(),s=o();g===n.None&&(g=s),s===g&&e[t]===n.None&&(e[t]=s,l([...e]),s=z(s),d(s),N())},x=t=>{if(t.code.startsWith("Digit")){const e=parseInt(t.code.charAt(t.code.length-1))-1;e>=0&&f(e)}else if(t.code.startsWith("Numpad")){let e=parseInt(t.code.charAt(t.code.length-1));e>=7&&e<=9&&(e-=6),e>=1&&e<=3&&(e+=6),e-=1,e>=0&&f(e)}};W(()=>{window.addEventListener("keydown",x)}),B(()=>{window.removeEventListener("keydown",x)});const p=()=>{l(Array.from({length:9},()=>n.None)),d(n.Circle),g=n.None,N()},N=()=>{H(u,{field:a(),turn:o()})},[D,_]=w(!1);let b;return(()=>{const t=re.cloneNode(!0),e=t.firstChild,s=e.nextSibling,k=s.firstChild;return c(t,r(R,{get when(){return S(()=>!C.loading,!0)()&&!C()},get children(){return r(A,{get children(){return[te.cloneNode(!0),r(M,{href:"/",class:"bg-terra mx-2 border-green border-2 px-4 py-2 rounded",children:"Back to Main Menu"})]}})}}),e),c(e,r(q,{get each(){return a()},children:(E,j)=>r(Z,{state:E,onClick:()=>f(j())})})),c(t,r(L,{get children(){return[r(m,{get when(){return h()===n.Circle},get children(){return r(v,{restartGame:p,result:"Winner: Circle"})}}),r(m,{get when(){return h()===n.Cross},get children(){return r(v,{restartGame:p,result:"Winner: Cross"})}}),r(m,{get when(){return h()===n.Draw},get children(){return r(v,{restartGame:p,result:"Draw"})}})]}}),s),k.$$click=()=>{_(!0),b&&clearTimeout(b),b=setTimeout(()=>{_(!1)},5*1e3),navigator.clipboard.writeText(u)},c(k,()=>D()?"Game ID Copied!":"Get Game ID"),c(s,r(M,{href:"/",class:"btn hover-shadow border-4 my-4 py-2 px-4",children:"Leave Game"}),null),t})()};y(["click"]);const le=()=>r(K,{get children(){return r(ne,{})}});export{le as default};
