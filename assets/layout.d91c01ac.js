import{d as it,a as rt,i as Z,b as ot,k as Y,t as tt}from"./index.3b47104f.js";var L=(E=>(E[E.None=0]="None",E[E.Cross=1]="Cross",E[E.Circle=2]="Circle",E[E.Draw=3]="Draw",E))(L||{});const pt=E=>{switch(E){case 2:return 1;case 1:return 2}return 0},dt=E=>{const w=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[6,4,2]];for(let M of w){const[a,O,d]=M;if(E[a]!==0&&E[a]===E[O]&&E[a]==E[d])return E[a]}let A=!0;for(let M of E)M===0&&(A=!1);return A?3:0};var ut=tt("<div><div>");const yt=E=>(()=>{var w=ut(),A=w.firstChild;return rt(w,"click",E.cancel,!0),A.$$click=M=>{M.stopPropagation()},Z(A,()=>E.children),ot(M=>{var a=`${E.backgroundClass?E.backgroundClass:""} absolute inset-0 flex justify-center items-center bg-black/50`,O=`${E.foregroundClass?E.foregroundClass:""} rounded border-green border-8 bg-lavender px-8 py-5`;return a!==M.e&&Y(w,M.e=a),O!==M.t&&Y(A,M.t=O),M},{e:void 0,t:void 0}),w})();it(["click"]);function ft(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}var nt={exports:{}};function at(E){throw new Error('Could not dynamically require "'+E+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var et={exports:{}};(function(E){(function(){function w(M,a){return a?at(M):M.slice?w[O(M)]:function(d,v){M(d={exports:{}}),w[O(v)]=d.exports};function O(d){return d.split("/").slice(-1).toString().replace(".js","")}}var A=E;w(function(M){String.random=function(O,d){var v="";for(O=O||24,d=d||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";O-- >0;)v+=d.charAt(Math.floor(Math.random()*d.length));return v},String.match=function(O,d){var v,b;return typeof O!="string"?!1:(typeof d=="string"&&(d={"=":d}),d=d||{},v=d["="]||d["*"]||d[">"]||d["<"],O===v?!0:b!==d["="]?!1:(v=d["*"]||d[">"],O.slice(0,(v||"").length)===v?!0:b!==d["*"]?!1:b!==d[">"]&&b!==d["<"]?O>=d[">"]&&O<=d["<"]:b!==d[">"]&&O>=d[">"]||b!==d["<"]&&O<=d["<"]))},String.hash=function(O,d){if(typeof O=="string"){if(d=d||0,!O.length)return d;for(var v=0,b=O.length,c;v<b;++v)c=O.charCodeAt(v),d=(d<<5)-d+c,d|=0;return d}};var a=Object.prototype.hasOwnProperty;Object.plain=function(O){return O?O instanceof Object&&O.constructor===Object||Object.prototype.toString.call(O).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(O,d){for(var v in O)if(a.call(O,v)&&(!d||d.indexOf(v)==-1))return!1;return!0},Object.keys=Object.keys||function(O){var d=[];for(var v in O)a.call(O,v)&&d.push(v);return d},function(){var O,d=setTimeout,v=0,b=0,c=typeof setImmediate!=""+O&&setImmediate||function(u,g){return typeof MessageChannel==""+O?d:((u=new MessageChannel).port1.onmessage=function(m){m.data==""&&g()},function(m){g=m,u.port2.postMessage("")})}(),f=d.check=d.check||typeof performance!=""+O&&performance||{now:function(){return+new Date}};d.hold=d.hold||9,d.poll=d.poll||function(u){if(d.hold>=f.now()-v&&b++<3333){u();return}c(function(){v=f.now(),u()},b=0)}}(),function(){var O=setTimeout,d=O.turn=O.turn||function(g){v.push(g)==1&&b(u)},v=d.s=[],b=O.poll,c=0,f,u=function(){(f=v[c++])&&f(),(c==v.length||c==99)&&(v=d.s=v.slice(c),c=0),v.length&&b(u)}}(),function(){var O,d=setTimeout,v=d.turn;(d.each=d.each||function(b,c,f,u){u=u||9,function g(m,o,k){if(o=(m=(b||[]).splice(0,u)).length){for(var h=0;h<o&&O===(k=c(m[h]));h++);if(O===k){v(g);return}}f&&f(k)}()})()}()})(w,"./shim"),w(function(M){M.exports=function a(f,d,v){if(!f)return{to:a};var b,c=typeof d=="function",f=(this.tag||(this.tag={}))[f]||c&&(this.tag[f]={tag:f,to:a._={next:function(g){var m;(m=this.to)&&m.next(g)}}});if(c){var u={off:a.off||(a.off=function(){if(this.next===a._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=a._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:a._,next:d,the:f,on:this,as:v};return(u.back=f.last||f).to=u,f.last=u}return(f=f.to)&&b!==d&&f.next(d),f}})(w,"./onto"),w(function(M){M.exports=function(a){return a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"&&a!=1/0&&a!=-1/0&&a===a||!!a&&typeof a["#"]=="string"&&Object.keys(a).length===1&&a["#"]}})(w,"./valid"),w(function(M){w("./shim");function a(){var f=+new Date;return b<f?(d=0,b=f+a.drift):b=f+(d+=1)/v+a.drift}a.drift=0;var O=-1/0,d=0,v=999,b=O,c;a.is=function(f,u,g){var m=u&&f&&f._&&f._[">"]||g;if(!!m)return typeof(m=m[u])=="number"?m:O},a.ify=function(f,u,g,m,o){(f=f||{})._=f._||{},o&&(f._["#"]=o);var k=f._[">"]||(f._[">"]={});return c!==u&&u!=="_"&&(typeof g=="number"&&(k[u]=g),c!==m&&(f[u]=m)),f},M.exports=a})(w,"./state"),w(function(M){w("./shim");function a(O){var d={s:{}},v=d.s;O=O||{max:999,age:1e3*9},d.check=function(c){return v[c]?b(c):!1};var b=d.track=function(c){var f=v[c]||(v[c]={});return f.was=d.now=+new Date,d.to||(d.to=setTimeout(d.drop,O.age+9)),b.ed&&b.ed(c),f};return d.drop=function(c){d.to=null,d.now=+new Date;var f=Object.keys(v);console.STAT&&console.STAT(d.now,+new Date-d.now,"dup drop keys"),setTimeout.each(f,function(u){var g=v[u];g&&(c||O.age)>d.now-g.was||delete v[u]},0,99)},d}M.exports=a})(w,"./dup"),w(function(M){w("./onto"),M.exports=function(d,v){if(!!this.on){var b=(this.opt||{}).lack||9e3;if(typeof d!="function"){if(!d)return;var f=d["#"]||d,c=(this.tag||"")[f];return c?(v&&(c=this.on(f,v),clearTimeout(c.err),c.err=setTimeout(function(){c.off()},b)),!0):void 0}var f=v&&v["#"]||a(9);if(!d)return f;var u=this.on(f,d,v);return u.err=u.err||setTimeout(function(){u.off(),u.next({err:"Error: No ACK yet.",lack:!0})},b),f}};var a=String.random||function(){return Math.random().toString(36).slice(2)}})(w,"./ask"),w(function(M){function a(o){return o instanceof a?(this._={$:this}).$:this instanceof a?a.create(this._={$:this,opt:o}):new a(o)}a.is=function(o){return o instanceof a||o&&o._&&o===o._.$||!1},a.version=.202,a.chain=a.prototype,a.chain.toJSON=function(){},w("./shim"),a.valid=w("./valid"),a.state=w("./state"),a.on=w("./onto"),a.dup=w("./dup"),a.ask=w("./ask"),function(){a.create=function(t){t.root=t.root||t,t.graph=t.graph||{},t.on=t.on||a.on,t.ask=t.ask||a.ask,t.dup=t.dup||a.dup();var i=t.$.opt(t.opt);return t.once||(t.on("in",o,t),t.on("out",o,t),t.on("put",D,t),a.on("create",t),t.on("create",t)),t.once=1,i};function o(t){if(!!t){if(t.out===o){this.to.next(t);return}var i=this,l=i.as,x=l.at||l,T=x.$,j=x.dup,G,I=t.DBG;if((G=t["#"])||(G=t["#"]=d(9)),!j.check(G)){if(j.track(G),G=t._,t._=typeof G=="function"?G:function(){},t.$&&t.$===(t.$._||"").$||(t.$=T),t["@"]&&!t.put&&n(t),!x.ask(t["@"],t))if(I&&(I.u=+new Date),t.put){k(t);return}else t.get&&a.on.get(t,T);I&&(I.uc=+new Date),i.to.next(t),I&&(I.ua=+new Date),!(t.nts||t.NTS)&&(t.out=o,x.on("out",t),I&&(I.ue=+new Date))}}}function k(t){if(!!t){var i=t._||"",l=i.root=((i.$=t.$||"")._||"").root;if(t["@"]&&i.faith&&!i.miss){t.out=o,l.on("out",t);return}i.latch=l.hatch,i.match=l.hatch=[];var x=t.put,T=i.DBG=t.DBG,j=+new Date;if(N=N||j,!(x["#"]&&x["."])){T&&(T.p=j),i["#"]=t["#"],i.msg=t,i.all=0,i.stun=1;var G=Object.keys(x);console.STAT&&console.STAT(j,((T||i).pk=+new Date)-j,"put sort");var I=0,C,J,W,q,P,R,H;(function U(K){if(C!=I){if(C=I,!(W=G[I])){console.STAT&&console.STAT(j,((T||i).pd=+new Date)-j,"put"),y(i);return}(q=x[W])?(H=q._)?W!==H["#"]?R=p+$(W)+"soul not same.":(P=H[">"])||(R=p+$(W)+"no state."):R=p+$(W)+"no meta.":R=p+$(W)+"no node.",J=Object.keys(q||{})}if(R){t.err=i.err=R,y(i);return}var Q=0,F;for(K=K||0;K++<9&&(F=J[Q++]);)if(F!=="_"){var z=q[F],X=P[F];if(u===X){R=p+$(F)+"on"+$(W)+"no state.";break}if(!b(z)){R=p+$(F)+"on"+$(W)+"bad "+typeof z+$(z);break}h(z,F,W,X,t),++B}if((J=J.slice(Q)).length){v(U);return}++I,J=null,U(K)})()}}}a.on.put=k;function h(t,i,l,x,T){var j=T._||"",G=j.root,I=G.graph,C,J=I[l]||g,W=c(J,i,1),q=J[i],P=j.DBG;(C=console.STAT)&&(!I[l]||!q)&&(C.has=(C.has||0)+1);var R=S();if(x>R){setTimeout(function(){h(t,i,l,x,T)},(C=x-R)>_?_:C),console.STAT&&console.STAT((P||j).Hf=+new Date,C,"future");return}if(!(x<W)&&!(!j.faith&&x===W&&(t===q||s(t)<=s(q))&&!j.miss)){j.stun++;var H=T["#"]+j.all++,U={toString:function(){return H},_:j};U.toJSON=U.toString,G.dup.track(U)["#"]=T["#"],P&&(P.ph=P.ph||+new Date),G.on("put",{"#":U,"@":T["@"],put:{"#":l,".":i,":":t,">":x},ok:T.ok,_:j})}}function D(t){var i;(i=(t._||"").DBG)&&(i.pa=+new Date,i.pm=i.pm||+new Date);var l=this,x=l.as,T=x.graph,j=t._,G=t.put,I=G["#"],C=G["."],J=G[":"],W=G[">"];t["#"];var q;(q=j.msg)&&(q=q.put)&&(q=q[I])&&f(q,C,W,J,I),T[I]=f(T[I],C,W,J,I),(q=(x.next||"")[I])&&q.on("in",t),y(j),l.to.next(t)}function y(t,i){var l;if(!t.stop&&!(!t.err&&0<--t.stun)&&(t.stop=1,!!(l=t.root))){var x=t.match;x.end=1,x===l.hatch&&(!(x=t.latch)||x.end?delete l.hatch:l.hatch=x),t.hatch&&t.hatch(),setTimeout.each(t.match,function(T){T&&T()}),!(!(i=t.msg)||t.err||i.err)&&(i.out=o,t.root.on("out",i),e())}}function n(t){var i=t["@"]||"",l;if(!(l=i._)){var x=(x=t.$)&&(x=x._)&&(x=x.root)&&(x=x.dup);if(!(x=x.check(i)))return;t["@"]=x["#"]||t["@"];return}l.acks=(l.acks||0)+1,(l.err=t.err)&&(t["@"]=l["#"],y(l)),l.ok=t.ok||l.ok,!l.stop&&!l.crack&&(l.crack=l.match&&l.match.push(function(){r(l)})),r(l)}function r(t){!t||!t.root||t.stun||t.acks!==t.all||t.root.on("in",{"@":t["#"],err:t.err,ok:t.err?u:t.ok||{"":1}})}var p="Error: Invalid graph!",$=function(t){return" '"+(""+t).slice(0,9)+"...' "},s=JSON.stringify,_=2147483647,S=a.state,B=0,N,e=function(){B>999&&B/-(N-(N=+new Date))>1&&(a.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),e=function(){B=0})}}(),function(){a.on.get=function(k,h){var D=h._,y=k.get,n=y["#"],r=D.graph[n],p=y["."],$=D.next||(D.next={}),s=$[n],_=k._||{},S=_.DBG=k.DBG;if(S&&(S.g=+new Date),!r)return D.on("get",k);if(p){if((typeof p!="string"||u===r[p])&&!((s||"").next||"")[p]){D.on("get",k);return}r=f({},p,c(r,p),r[p],n)}r&&o(k,r),D.on("get",k)};function o(k,h){var D=+new Date,y=k._||{},n=y.DBG=k.DBG,r=k["#"],p=d(9),$=Object.keys(h||"").sort(),s=((h||"")._||"")["#"];$.length;var _=k.$._.root,S=h===_.graph[s];console.STAT&&console.STAT(D,((n||y).gk=+new Date)-D,"got keys"),h&&function B(){D=+new Date;for(var N=0,e,t={},i;N<9&&(e=$[N++]);)f(t,e,c(h,e),h[e],s);$=$.slice(N),(i={})[s]=t,t=i;var l;S&&(l=function(){},l.ram=l.faith=!0),i=$.length,console.STAT&&console.STAT(D,-(D-(D=+new Date)),"got copied some"),n&&(n.ga=+new Date),_.on("in",{"@":r,"#":p,put:t,"%":i?p=d(9):u,$:_.$,_:l,DBG:n,FOO:1}),console.STAT&&console.STAT(D,+new Date-D,"got in"),i&&setTimeout.turn(B)}(),h||_.on("in",{"@":k["#"]})}a.on.get.ack=o}(),function(){a.chain.opt=function(o){o=o||{};var k=this,h=k._,D=o.peers||o;return Object.plain(o)||(o={}),Object.plain(h.opt)||(h.opt=o),typeof D=="string"&&(D=[D]),Object.plain(h.opt.peers)||(h.opt.peers={}),D instanceof Array&&(o.peers={},D.forEach(function(y){var n={};n.id=n.url=y,o.peers[y]=h.opt.peers[y]=h.opt.peers[y]||n})),O(o,function y(n){var r=this[n];if(this&&this.hasOwnProperty(n)||typeof r=="string"||Object.empty(r)){this[n]=r;return}r&&r.constructor!==Object&&!(r instanceof Array)||O(r,y)}),h.opt.from=o,a.on("opt",h),h.opt.uuid=h.opt.uuid||function(n){return a.state().toString(36).replace(".","")+String.random(n||12)},k}}();var O=function(o,k){Object.keys(o).forEach(k,o)},d=String.random,v=setTimeout.turn,b=a.valid,c=a.state.is,f=a.state.ify,u,g={},m;a.log=function(){return!a.log.off&&m.log.apply(m,arguments),[].slice.call(arguments).join(" ")},a.log.once=function(o,k,h){return(h=a.log.once)[o]=h[o]||0,h[o]++||a.log(k)},typeof window<"u"&&((window.GUN=window.Gun=a).window=window);try{typeof A<"u"&&(A.exports=a)}catch{}M.exports=a,(a.window||{}).console=(a.window||{}).console||{log:function(){}},(m=console).only=function(o,k){return m.only.i&&o===m.only.i&&m.only.i++&&(m.log.apply(m,arguments)||k)},a.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(w,"./root"),w(function(M){var a=w("./root");a.chain.back=function(v,b){var c;if(v=v||1,v===-1||v===1/0)return this._.root.$;if(v===1)return(this._.back||this._).$;var f=this,u=f._;if(typeof v=="string"&&(v=v.split(".")),v instanceof Array){var g=0,m=v.length,c=u;for(g;g<m;g++)c=(c||O)[v[g]];return d!==c?b?f:c:(c=u.back)?c.$.back(v,b):void 0}if(typeof v=="function"){for(var o,c={back:u};(c=c.back)&&d===(o=v(c,b)););return o}return typeof v=="number"?(u.back||u).$.back(v-1):this};var O={},d})(w,"./back"),w(function(M){var a=w("./root");a.chain.chain=function(y){var n=this,r=n._,p=new(y||n).constructor(n),$=p._,s;return $.root=s=r.root,$.id=++s.once,$.back=n._,$.on=a.on,$.on("in",a.on.in,$),$.on("out",a.on.out,$),p};function O(y){var n,r=this.as,p=r.back,$=r.root,s;if(y.$||(y.$=r.$),this.to.next(y),r.err){r.on("in",{put:r.put=u,$:r.$});return}if(n=y.get){if($.pass&&($.pass[r.id]=r),r.lex&&Object.keys(r.lex).forEach(function(_){s[_]=r.lex[_]},s=y.get=y.get||{}),n["#"]||r.soul){if(n["#"]=n["#"]||r.soul,y["#"]||(y["#"]=g(9)),p=$.$.get(n["#"])._,n=n["."]){if(o(p.put,n)&&(s=p.ask&&p.ask[n],(p.ask||(p.ask={}))[n]=p.$.get(n)._,p.on("in",{get:n,put:{"#":p.soul,".":n,":":p.put[n],">":h($.graph[p.soul],n)}}),s))return}else{if(s=p.ask&&p.ask[""],(p.ask||(p.ask={}))[""]=p,u!==p.put&&(p.on("in",p),s))return;y.$=p.$}return $.ask(c,y),$.on("in",y)}if(n["."])return r.get?(y={get:{".":r.get},$:r.$},(p.ask||(p.ask={}))[r.get]=y.$._,p.on("out",y)):(y={get:r.lex?y.get:{},$:r.$},p.on("out",y));if((r.ask||(r.ask={}))[""]=r,r.get)return n["."]=r.get,(p.ask||(p.ask={}))[r.get]=y.$._,p.on("out",y)}return p.on("out",y)}a.on.out=O;function d(y,n){n=n||this.as;var r=n.root,p=y.$||(y.$=n.$),$=(p||"")._||f,s=y.put||"",_=s["#"],S=s["."],B=u!==s["="]?s["="]:s[":"],N=s[">"]||-1/0,e;if(u!==y.put&&(u===s["#"]||u===s["."]||u===s[":"]&&u===s["="]||u===s[">"])){if(!m(s)){if(!(_=((s||"")._||"")["#"])){console.log("chain not yet supported for",s,"...",y,n);return}return p=n.root.$.get(_),setTimeout.each(Object.keys(s).sort(),function(t){t=="_"||u===(N=h(s,t))||n.on("in",{$:p,put:{"#":_,".":t,"=":s[t],">":N},VIA:y})})}n.on("in",{$:$.back.$,put:{"#":_=$.back.soul,".":S=$.has||$.get,"=":s,">":h($.back.put,S)},via:y});return}(y.seen||"")[n.id]||((y.seen||(y.seen=function(){}))[n.id]=n,n!==$&&(Object.keys(y).forEach(function(t){s[t]=y[t]},s={}),s.get=n.get||s.get,!n.soul&&!n.has?s.$$$=s.$$$||n.$:$.soul&&(s.$=n.$,s.$$=s.$$||$.$),y=s),b(y,n),(n.soul||y.$$)&&N>=h(r.graph[_],S)&&((s=r.$.get(_)._).put=D(s.put,S,N,B,_)),!$.soul&&N>=h(r.graph[_],S)&&(e=(r.$.get(_)._.next||"")[S])&&(e.put=B,typeof(s=m(B))=="string"&&(e.put=r.$.get(s)._.put||B)),this.to&&this.to.next(y),n.any&&setTimeout.each(Object.keys(n.any),function(t){(t=n.any[t])&&t(y)},0,99),n.echo&&setTimeout.each(Object.keys(n.echo),function(t){(t=n.echo[t])&&t.on("in",y)},0,99),((y.$$||"")._||$).soul&&(e=n.next)&&(e=e[S])&&(s={},Object.keys(y).forEach(function(t){s[t]=y[t]}),s.$=(y.$$||y.$).get(s.get=S),delete s.$$,delete s.$$$,e.on("in",s)),v(y,n))}a.on.in=d;function v(y,n){if(n=n||this.as||y.$._,!(y.$$&&this!==a.on)&&!(!y.put||n.soul)){var r=y.put||"",p=r["="]||r[":"],S,$=n.root,s=$.$.get(r["#"]).get(r["."])._;if(typeof(p=m(p))!="string"){this===a.on&&((s.echo||(s.echo={}))[n.id]=n);return}if(!((s.echo||(s.echo={}))[n.id]&&!($.pass||"")[n.id])){if(S=$.pass){if(S[p+n.id])return;S[p+n.id]=1}(s.echo||(s.echo={}))[n.id]=n,n.has&&(n.link=p);var _=$.$.get(s.link=p)._;(_.echo||(_.echo={}))[s.id]=s;var S=n.ask||"";(S[""]||n.lex)&&_.on("out",{get:{"#":p}}),setTimeout.each(Object.keys(S),function(B,N){!B||!(N=S[B])||N.on("out",{get:{"#":p,".":B}})},0,99)}}}a.on.link=v;function b(y,n){var r=y.put||"",p=u!==r["="]?r["="]:r[":"],$=n.root,s,_;if(u===p){if(n.soul&&u!==n.put||(_=(y.$$||y.$||"")._||"",y["@"]&&(u!==_.put||u!==n.put)))return;(s=n.link||y.linked)&&delete($.$.get(s)._.echo||"")[n.id],n.has&&(n.link=null),n.put=u,setTimeout.each(Object.keys(n.next||""),function(S,B){!(B=n.next[S])||(s&&delete($.$.get(s).get(S)._.echo||"")[B.id],B.on("in",{get:S,put:u,$:B.$}))},0,99);return}n.soul||y.$$||(s=m(p),_=y.$._||"",!((s===_.link||n.has&&!_.link)&&!(($.pass||"")[n.id]&&typeof s!="string"))&&(delete(_.echo||"")[n.id],b({get:n.get,put:u,$:y.$,linked:y.linked=y.linked||_.link},n)))}a.on.unlink=b;function c(y,n){var r=this.as,p=r.$._;p.root;var $=r.get||"",s=(y.put||"")[$["#"]]||"";if(!y.put||typeof $["."]=="string"&&u===s[$["."]]){if(u!==p.put||!p.soul&&!p.has)return;p.ack=(p.ack||0)+1,p.on("in",{get:p.get,put:p.put=u,$:p.$,"@":y["@"]});return}(y._||{}).miss=1,a.on.put(y)}var f={},u,g=String.random,m=a.valid,o=function(y,n){return y&&Object.prototype.hasOwnProperty.call(y,n)},k=a.state,h=k.is,D=k.ify})(w,"./chain"),w(function(M){var a=w("./root");a.chain.get=function(u,g,m){var o,k;if(typeof u=="string"){if(u.length==0)return(o=this.chain())._.err={err:a.log("0 length key!",u)},g&&g.call(o,o._.err),o;var h=this,D=h._,y=D.next||b;(o=y[u])||(o=u&&O(u,h)),o=o&&o.$}else if(typeof u=="function"){let _=function(S,B,N){if(!_.stun&&!((T=r.pass)&&!T[p])){var e=S.$._,t=(S.$$||"")._,i=(t||e).put,l=!e.has&&!e.soul,x={},T;if((l||f===i)&&(i=f===((T=S.put)||"")["="]?f===(T||"")[":"]?T:T[":"]:T["="]),typeof(T=a.valid(i))=="string"&&(i=f===(T=r.$.get(T)._.put)?n.not?f:i:T),!(n.not&&f===i)){if(f===n.stun){if((T=r.stun)&&T.on&&(D.$.back(function(j){if(T.on(""+j.id,x={}),(x.run||0)<_.id)return x}),!x.run&&T.on(""+e.id,x={}),!x.run&&t&&T.on(""+t.id,x={}),_.id>x.run&&((!x.stun||x.stun.end)&&(x.stun=T.on("stun"),x.stun=x.stun&&x.stun.last),x.stun&&!x.stun.end))){(x.stun.add||(x.stun.add={}))[p]=function(){_(S,B,1)};return}if(f===i&&(N=0),(T=r.hatch)&&!T.end&&f===n.hatch&&!N){if($[e.$._.id])return;$[e.$._.id]=1,T.push(function(){_(S,B,1)});return}$={}}if(r.pass){if(r.pass[p+e.id])return;r.pass[p+e.id]=1}if(n.on){n.ok.call(e.$,i,e.get,S,B||_);return}if(n.v2020){n.ok(S,B||_);return}Object.keys(S).forEach(function(j){T[j]=S[j]},T={}),S=T,S.put=i,n.ok.call(n.as,S,B||_)}}};if(g===!0)return d(this,u,g,m),this;o=this;var D=o._,n=g||{},r=D.root,p;n.at=D,n.ok=u;var $={};return _.at=D,(D.any||(D.any={}))[p=String.random(7)]=_,_.off=function(){_.stun=1,D.any&&delete D.any[p]},_.rid=v,_.id=n.run||++r.once,k=r.pass,(r.pass={})[p]=1,n.out=n.out||{get:{}},D.on("out",n.out),r.pass=k,o}else{if(typeof u=="number")return this.get(""+u,g,m);if(typeof(k=c(u))=="string")return this.get(k,g,m);(k=this.get.next)&&(o=k(this,u))}return o?(g&&typeof g=="function"&&o.get(g,m),o):((o=this.chain())._.err={err:a.log("Invalid get request!",u)},g&&g.call(o,o._.err),o)};function O(u,g){var m=g._,o=m.next,k=g.chain(),h=k._;return o||(o=m.next={}),o[h.get=u]=h,g===m.root.$?h.soul=u:(m.soul||m.has)&&(h.has=u),h}function d(u,g,m,o){var k=u._,h=0,D;return(D=k.soul||k.link)?g(D,o,k):k.jam?k.jam.push([g,o]):(k.jam=[[g,o]],u.get(function(n,r){if(!(f===n.put&&!k.root.opt.super&&(D=Object.keys(k.root.opt.peers).length)&&++h<=D)){r.rid(n);var p=(p=n.$)&&p._||{},$=0,s;for(D=k.jam,delete k.jam;s=D[$++];){var _=s[0];s=s[1],_&&_(p.link||p.soul||a.valid(n.put)||((n.put||{})._||{})["#"],s,n,r)}}},{out:{get:{".":!0}}}),u)}function v(u){var g=this.at||this.on;if(!u||g.soul||g.has)return this.off();if(!!(u=(u=(u=u.$||u)._||u).id)){g.map;var m;if((m=this.seen||(this.seen={}))[u])return!0;m[u]=!0}}var b={},c=a.valid,f})(w,"./get"),w(function(M){var a=w("./root");a.chain.put=function(o,k,h){var D=this,y=D._,n=y.root;h=h||{},h.root=y.root,h.run||(h.run=n.once),O(h,y.id),h.ack=h.ack||k,h.via=h.via||D,h.data=h.data||o,h.soul||(h.soul=y.soul||typeof k=="string"&&k);var r=h.state=h.state||a.state();return typeof o=="function"?(o(function(p){h.data=p,D.put(c,c,h)}),D):h.soul?(h.$=n.$.get(h.soul),h.todo=[{it:h.data,ref:h.$}],h.turn=h.turn||u,h.ran=h.ran||d,function p(){var $=h.todo,s=$.pop(),_=s.it;s.ref&&s.ref._.id;var S,B,N,e,t;if(O(h,s.ref),(e=s.todo)&&(B=e.pop(),_=_[B],e.length&&$.push(s)),B&&($.path||($.path=[])).push(B),!(S=g(_))&&!(t=a.is(_))){if(!Object.plain(_)){d.err(h,"Invalid data: "+b(_)+" at "+(h.via.back(function(T){T.get&&e.push(T.get)},e=[])||e.join("."))+"."+($.path||[]).join("."));return}for(var i=h.seen||(h.seen=[]),l=i.length;l--;)if(_===(e=i[l]).it){S=_=e.link;break}}if(B&&S)s.node=m(s.node,B,r,_);else{let T=function(j,G){var I=N.link["#"];G&&(G.off(),G.rid(j));var C=I||j.soul||(e=(j.$$||j.$)._||"").soul||e.link||((e=e.put||"")._||"")["#"]||e["#"]||((e=j.put||"")&&j.$$?e["#"]:(e["="]||e[":"]||"")["#"]);if(!I&&O(h,j.$),!C&&!s.link["#"]){(s.wait||(s.wait=[])).push(function(){T(j,G)});return}C||(C=[],(j.$$||j.$).back(function(J){if(e=J.soul||J.link)return C.push(e);C.push(J.get)}),C=C.reverse().join("/")),N.link["#"]=C,!t&&(((h.graph||(h.graph={}))[C]=N.node||(N.node={_:{}}))._["#"]=C),delete h.wait[x],N.wait&&setTimeout.each(N.wait,function(J){J&&J()}),h.ran(h)};if(!h.seen){d.err(h,"Data at root of graph must be a node (an object).");return}h.seen.push(N={it:_,link:{},todo:t?[]:Object.keys(_).sort().reverse(),path:($.path||[]).slice(),up:s}),s.node=m(s.node,B,r,N.link),!t&&N.todo.length&&$.push(N);var x=h.seen.length;(h.wait||(h.wait={}))[x]="",e=(N.ref=t?_:B?s.ref.get(B):s.ref)._,(e=_&&(_._||"")["#"]||e.soul||e.link)?T({soul:e}):N.ref.get(T,{run:h.run,v2020:1,out:{get:{".":" "}}})}if(!$.length)return h.ran(h);h.turn(p)}(),D):(v(h),D)};function O(o,k){if(!!k){k=(k._||"").id||k;var h=o.root.stun||(o.root.stun={on:a.on}),D={},y;o.stun||(o.stun=h.on("stun",function(){})),(y=h.on(""+k))&&y.the.last.next(D),!(D.run>=o.run)&&h.on(""+k,function(n){if(o.stun.end){this.off(),this.to.next(n);return}n.run=n.run||o.run,n.stun=n.stun||o.stun})}}function d(o){if(o.err){d.end(o.stun,o.root);return}if(!(o.todo.length||o.end||!Object.empty(o.wait))){o.end=1;var k=o.$.back(-1)._,h=k.root,D=k.ask(function(p){h.on("ack",p),p.err&&!p.lack&&a.log(p),++y>(o.acks||0)&&this.off(),o.ack&&o.ack(p,this)},o.opt),y=0,n=o.stun,r;(r=function(){!n||(d.end(n,h),setTimeout.each(Object.keys(n=n.add||""),function(p){(p=n[p])&&p()}))}).hatch=r,o.ack&&!o.ok&&(o.ok=o.acks||9),o.via._.on("out",{put:o.out=o.graph,ok:o.ok&&{"@":o.ok+1},opt:o.opt,"#":D,_:r})}}d.end=function(o,k){o.end=f,o.the.to===o&&o===o.the.last&&delete k.stun,o.off()},d.err=function(o,k){(o.ack||f).call(o,o.out={err:o.err=a.log(k)}),o.ran(o)};function v(o){var k=o.via._,h;o.via=o.via.back(function(D){if(D.soul||!D.get)return D.$;h=o.data,(o.data={})[D.get]=h}),(!o.via||!o.via._.soul)&&(o.via=k.root.$.get(((o.data||"")._||"")["#"]||k.$.back("opt.uuid")())),o.via.put(o.data,o.ack,o)}function b(o,k){return o&&(k=o.constructor)&&k.name||typeof o}var c,f=function(){},u=setTimeout.turn,g=a.valid,m=a.state.ify})(w,"./put"),w(function(M){var a=w("./root");w("./chain"),w("./back"),w("./put"),w("./get"),M.exports=a})(w,"./index"),w(function(M){var a=w("./index");a.chain.on=function(v,b,c,f){var u=this,g=u._;g.root;var m;if(typeof v=="string")return b?(m=g.on(v,b,c||g,f),c&&c.$&&(c.subs||(c.subs=[])).push(m),u):g.on(v);var o=b;return(o=o===!0?{change:!0}:o||{}).not=1,o.on=1,u.get(v,o),u},a.chain.once=function(v,b){if(b=b||{},!v)return O(this);var c=this,f=c._,u=f.root;f.put;var g=String.random(7),m;return c.get(function(o,k,h,D){var y=this,n=y._,r=n.one||(n.one={});if(D.stun||r[g]==="")return;if((m=a.valid(o))===!0){p();return}if(typeof m=="string")return;clearTimeout((f.one||"")[g]),clearTimeout(r[g]),r[g]=setTimeout(p,b.wait||99);function p($){if(!n.has&&!n.soul&&(n={put:o,get:k}),d===(m=n.put)&&(m=((h.$$||"")._||"").put),typeof a.valid(m)=="string"&&(m=u.$.get(m)._.put,m===d&&!$)){r[g]=setTimeout(function(){p(1)},b.wait||99);return}D.stun||r[g]!==""&&(r[g]="",(f.soul||f.has)&&D.off(),v.call(y,m,n.get),clearTimeout(r[g]))}},{on:1}),c};function O(v,b,c){return a.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(c=v.chain())._.nix=v.once(function(f,u){c._.on("in",this._)}),c._.lex=v._.lex,c}a.chain.off=function(){var v=this,b=v._,c,f=b.back;if(!!f)return b.ack=0,(c=f.next)&&c[b.get]&&delete c[b.get],(c=f.any)&&(delete f.any,f.any={}),(c=f.ask)&&delete c[b.get],(c=f.put)&&delete c[b.get],(c=b.soul)&&delete f.root.graph[c],(c=b.map)&&Object.keys(c).forEach(function(u,g){g=c[u],g.link&&f.root.$.get(g.link).off()}),(c=b.next)&&Object.keys(c).forEach(function(u,g){g=c[u],g.$.off()}),b.on("off",{}),v};var d})(w,"./on"),w(function(M){var a=w("./index"),O=a.chain.get.next;a.chain.get.next=function(c,f){var u;return Object.plain(f)?(u=((u=f["#"])||"")["="]||u)?c.get(u):((u=c.chain()._).lex=f,c.on("in",function(g){String.match(g.get||(g.put||"")["."],f["."]||f["#"]||f)&&u.on("in",g),this.to.next(g)}),u.$):(O||v)(c,f)},a.chain.map=function(c,f,u){var g=this,m=g._,o,k;return Object.plain(c)&&(o=c["."]?c:{".":c},c=b),c?(a.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),k=g.chain(),g.map().on(function(h,D,y,n){var r=(c||v).call(this,h,D,y,n);if(b!==r){if(h===r)return k._.on("in",y);if(a.is(r))return k._.on("in",r._);var p={};Object.keys(y.put).forEach(function($){p[$]=y.put[$]},p),p["="]=r,k._.on("in",{get:D,put:p})}}),k):((k=m.each)||((m.each=k=g.chain())._.lex=o||k._.lex||m.lex,k._.nix=g.back("nix"),g.on("in",d,k._)),k)};function d(c){this.to.next(c);var f=this.as,u=c.$,g=u._,m=c.put,o;!g.soul&&!c.$$||(o=f.lex)&&!String.match(c.get||(m||"")["."],o["."]||o["#"]||o)||a.on.link(c,f)}var v=function(){},b})(w,"./map"),w(function(M){var a=w("./index");a.chain.set=function(O,d,v){var b=this,c=b.back(-1),f,u;return d=d||function(){},v=v||{},v.item=v.item||O,(f=((O||"")._||"")["#"])&&((O={})["#"]=f),typeof(u=a.valid(O))=="string"?b.get(f=u).put(O,d,v):a.is(O)?(b.put(function(g){O.get(function(m,o,k){if(!m)return d.call(b,{err:a.log('Only a node can be linked! Not "'+k.put+'"!')});(u={})[m]={"#":m},g(u)},!0)}),O):(Object.plain(O)&&(O=c.get(f=b.back("opt.uuid")()).put(O)),b.get(f||c.back("opt.uuid")(7)).put(O,d,v))}})(w,"./set"),w(function(M){w("./shim");var a=function(){},O=JSON.parseAsync||function(c,f,u){var g,m=+new Date;try{f(g,JSON.parse(c,u),d.sucks(+new Date-m))}catch(o){f(o)}},d=JSON.stringifyAsync||function(c,f,u,g){var m,o=+new Date;try{f(m,JSON.stringify(c,u,g),d.sucks(+new Date-o))}catch(k){f(k)}};d.sucks=function(c){c>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),d.sucks=a)};function v(c){var f=function(){},u=c.opt||{};u.log=u.log||console.log,u.gap=u.gap||u.wait||0,u.max=u.max||(u.memory?u.memory*999*999:3e8)*.3,u.pack=u.pack||u.max*.01*.01,u.puff=u.puff||9;var g=setTimeout.turn||setTimeout,m=c.dup,o=m.check,k=m.track,h=f.hear=function(n,r){if(!!n){if(u.max<=n.length)return f.say({dam:"!",err:"Message too big!"},r);f===this&&(h.d+=n.length||0,++h.c);var p=r.SH=+new Date,$=n[0],s;if($==="["){O(n,function(_,S){if(_||!S)return f.say({dam:"!",err:"DAM JSON parse error."},r);console.STAT&&console.STAT(+new Date,S.length,"# on hear batch");var B=u.puff;(function N(){for(var e=+new Date,t=0,i;t<B&&(i=S[t++]);)f.hear(i,r);S=S.slice(t),console.STAT&&console.STAT(e,+new Date-e,"hear loop"),D(r),S.length&&g(N,0)})()}),n="";return}if($==="{"||(n["#"]||Object.plain(n))&&(s=n)){if(s)return h.one(s,r,p);O(n,function(_,S){if(_||!S)return f.say({dam:"!",err:"DAM JSON parse error."},r);h.one(S,r,p)});return}}};h.one=function(n,r,N){var $,s,_,S,B;if(n.DBG&&(n.DBG=B={DBG:n.DBG}),B&&(B.h=N),B&&(B.hp=+new Date),($=n["#"])||($=n["#"]=String.random(9)),!(_=o($))&&(s=n["##"],!(s&&(_=n["@"]||n.get&&$)&&m.check(S=_+s)))){if((n._=function(){}).via=f.leap=r,(_=n["><"])&&typeof _=="string"&&_.slice(0,99).split(",").forEach(function(e){this[e]=1},n._.yo={}),_=n.dam){(_=f.hear[_])&&_(n,r,c),k($);return}(_=n.ok)&&(n._.near=_["/"]);var N=+new Date;B&&(B.is=N),r.SI=$,k.ed=function(e){$===e&&(k.ed=0,(e=m.s[$])&&(e.via=r,n.get&&(e.it=n)))},c.on("in",f.last=n),B&&(B.hd=+new Date),console.STAT&&console.STAT(N,+new Date-N,n.get?"msg get":n.put?"msg put":"msg"),k($),S&&k(S),f.leap=f.last=null}},h.c=h.d=0,function(){var n=0,r;f.hash=function(s,_){var S,B,N,e=+new Date;d(s.put,function t(i,l){var x=(B||(B=N=l||"")).slice(0,32768);if(S=String.hash(x,S),B=B.slice(32768),B){g(t,0);return}console.STAT&&console.STAT(e,+new Date-e,"say json+hash"),s._.$put=N,s["##"]=S,f.say(s,_),delete s._.$put},p)};function p(s,_){var S;return _ instanceof Object?(Object.keys(_).sort().forEach($,{to:S={},on:_}),S):_}function $(s){this.to[s]=this.on[s]}f.say=function(s,_){var S;if((S=this)&&(S=S.to)&&S.next&&S.next(s),!s)return!1;var B,N,e,t=s["@"],i=s._||(s._=function(){}),l=s.DBG,x=+new Date;if(i.y=i.y||x,_||l&&(l.y=x),(B=s["#"])||(B=s["#"]=String.random(9)),!r&&k(B),!(N=s["##"])&&b!==s.put&&!i.via&&t){f.hash(s,_);return}if(!_&&t&&(_=(S=m.s[t])&&(S.via||(S=S.it)&&(S=S._)&&S.via)||(S=f.last)&&t===S["#"]&&f.leap),!_&&t)return m.s[t]?void 0:(console.STAT&&console.STAT(+new Date,++n,"total no peer to ack to"),!1);if(t&&!s.put&&!N&&((m.s[t]||"").it||"")["##"])return!1;if(!_&&f.way)return f.way(s);if(l&&(l.yh=+new Date),!(e=i.raw)){f.raw(s,_);return}if(l&&(l.yr=+new Date),!_||!_.id){if(!Object.plain(_||u.peers))return!1;var x=+new Date;u.puff;var T=u.peers,j=Object.keys(_||u.peers||{});console.STAT&&console.STAT(x,+new Date-x,"peer keys"),function C(){var J=+new Date;r=1;var W=i.raw;i.raw=e;for(var q=0,P;q<9&&(P=(j||"")[q++]);)!(P=T[P]||(_||"")[P])||f.say(s,P);i.raw=W,r=0,j=j.slice(q),console.STAT&&console.STAT(J,+new Date-J,"say loop"),j.length&&(g(C,0),t&&k(t))}();return}if(!_.wire&&f.wire&&f.wire(_),B!==_.last){if(_.last=B,_===i.via||(S=i.yo)&&(S[_.url]||S[_.pid]||S[_.id]))return!1;if(console.STAT&&console.STAT(x,((l||i).yp=+new Date)-(i.y||x),"say prep"),!r&&t&&k(t),_.batch){if(_.tail=(S=_.tail||0)+e.length,_.tail<=u.pack){_.batch+=(S?",":"")+e;return}D(_)}_.batch="[";var G=+new Date;setTimeout(function(){console.STAT&&console.STAT(G,+new Date-G,"0ms TO"),D(_)},u.gap),y(e,_),console.STAT&&t===_.SI&&console.STAT(x,+new Date-_.SH,"say ack")}},f.say.c=f.say.d=0,f.raw=function(s,_){if(!s)return"";var S=s._||{},B,N;if(N=S.raw)return N;if(typeof s=="string")return s;var e=s["##"],t=s["@"];if(e&&t){if(!S.via&&o(t+e))return!1;if(N=(m.s[t]||"").it){if(e===N["##"])return!1;N["##"]||(N["##"]=e)}}if(!s.dam&&!s["@"]){var i=0,l=[];N=u.peers;for(var x in N){var T=N[x];if(l.push(T.url||T.pid||T.id),++i>6)break}i>1&&(s["><"]=l.join())}if(s.put&&(N=s.ok)&&(s.ok={"@":(N["@"]||1)-1,"/":N["/"]==s._.near?f.near:N["/"]}),B=S.$put){N={},Object.keys(s).forEach(function(G){N[G]=s[G]}),N.put=":])([:",d(N,function(G,I){if(!G){var C=+new Date;N=I.indexOf('"put":":])([:"'),j(b,I=I.slice(0,N+6)+B+I.slice(N+14)),console.STAT&&console.STAT(C,+new Date-C,"say slice")}});return}d(s,j);function j(G,I){G||(S.raw=I,f.say(s,_))}}}();function D(n){var r=n.batch,p=typeof r=="string";if(p&&(r+="]"),n.batch=n.tail=null,!!r&&!(p?3>r.length:!r.length)){if(!p)try{r=r.length===1?r[0]:JSON.stringify(r)}catch($){return u.log("DAM JSON stringify error",$)}!r||y(r,n)}}function y(n,r){try{var p=r.wire;r.say?r.say(n):p.send&&p.send(n),f.say.d+=n.length||0,++f.say.c}catch{(r.queue=r.queue||[]).push(n)}}return f.near=0,f.hi=function(n){var r=n.wire,p;if(!r){f.wire(n.length&&{url:n,id:n}||n);return}n.id?u.peers[n.url||n.id]=n:(p=n.id=n.id||n.url||String.random(9),f.say({dam:"?",pid:c.opt.pid},u.peers[p]=n),delete m.s[n.last]),n.met||(f.near++,n.met=+new Date,c.on("hi",n)),p=n.queue,n.queue=[],setTimeout.each(p||[],function($){y($,n)},0,9)},f.bye=function(n){n.met&&--f.near,delete n.met,c.on("bye",n);var r=+new Date;r=r-(n.met||r),f.bye.time=((f.bye.time||r)+r)/2},f.hear["!"]=function(n,r){u.log("Error:",n.err)},f.hear["?"]=function(n,r){n.pid&&(r.pid||(r.pid=n.pid),n["@"])||(f.say({dam:"?",pid:u.pid,"@":n["#"]},r),delete m.s[r.last])},f.hear.mob=function(n,r){if(!!n.peers){var p=Object.keys(n.peers),$=p[Math.random()*p.length>>0];!$||(f.bye(r),f.hi($))}},c.on("create",function(n){n.opt.pid=n.opt.pid||String.random(9),this.to.next(n),n.on("out",f.say)}),c.on("bye",function(n,r){n=u.peers[n.id||n]||n,this.to.next(n),n.bye?n.bye():(r=n.wire)&&r.close&&r.close(),delete u.peers[n.id],n.wire=null}),c.on("bye",function(n,r){this.to.next(n),(r=console.STAT)&&(r.peers=f.near),(r=n.url)&&setTimeout(function(){},u.lack||9e3)}),c.on("hi",function(n,r){if(this.to.next(n),(r=console.STAT)&&(r.peers=f.near),!u.super){var p=Object.keys(c.next||"");p.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(p,function($){var s=c.next[$];if(u.super||(s.ask||"")[""]){f.say({get:{"#":$}},n);return}setTimeout.each(Object.keys(s.ask||""),function(_){!_||f.say({"##":String.hash((c.graph[$]||"")[_]),get:{"#":$,".":_}},n)})})}}),f}var b;try{M.exports=v}catch{}})(w,"./mesh"),w(function(M){var a=w("./index");a.Mesh=w("./mesh"),a.on("opt",function(d){if(this.to.next(d),d.once)return;var v=d.opt;if(v.WebSocket===!1)return;var b=a.window||{},c=v.WebSocket||b.WebSocket||b.webkitWebSocket||b.mozWebSocket;if(!c)return;v.WebSocket=c;var f=v.mesh=v.mesh||a.Mesh(d);f.wire||v.wire,f.wire=v.wire=u;function u(k){try{if(!k||!k.url)return D&&D(k);var h=k.url.replace(/^http/,"ws"),D=k.wire=new v.WebSocket(h);return D.onclose=function(){m(k),v.mesh.bye(k)},D.onerror=function(y){m(k)},D.onopen=function(){v.mesh.hi(k)},D.onmessage=function(y){!y||v.mesh.hear(y.data||y,k)},D}catch{v.mesh.bye(k)}}setTimeout(function(){!v.super&&d.on("out",{dam:"hi"})},1);var g=2*999;function m(k){clearTimeout(k.defer),v.peers[k.url]&&(o&&k.retry<=0||(k.retry=(k.retry||v.retry+1||60)-(-k.tried+(k.tried=+new Date)<g*4?1:0),k.defer=setTimeout(function h(){if(o&&o.hidden)return setTimeout(h,g);u(k)},g)))}var o=""+O!=typeof document&&document});var O})(w,"./websocket"),w(function(M){if(!(typeof Gun>"u")){var a=function(){},O;try{O=(Gun.window||a).localStorage}catch{}O||(Gun.log("Warning: No localStorage exists to persist data to!"),O={setItem:function(v,b){this[v]=b},removeItem:function(v){delete this[v]},getItem:function(v){return this[v]}});var d=JSON.stringifyAsync||function(v,b,c,f){var u;try{b(u,JSON.stringify(v,c,f))}catch(g){b(g)}};Gun.on("create",function v(b){this.to.next(b);var c=b.opt;b.graph;var f=[],u,g,m,o;if(c.localStorage===!1)return;c.prefix=c.file||"gun/";try{u=v[c.prefix]=v[c.prefix]||JSON.parse(m=O.getItem(c.prefix))||{}}catch{u=v[c.prefix]={}}m=(m||"").length,b.on("get",function(h){this.to.next(h);var D=h.get,y,n,r,p;!D||!(y=D["#"])||(n=u[y]||p,n&&(r=D["."])&&!Object.plain(r)&&(n=Gun.state.ify({},r,Gun.state.is(n,r),n[r],y)),Gun.on.get.ack(h,n))}),b.on("put",function(h){this.to.next(h);var D=h.put,y=D["#"],n=D["."],r=h["#"],p=h.ok||"";if(u[y]=Gun.state.ify(u[y],n,D[">"],D[":"],y),o&&m>4999880){b.on("in",{"@":r,err:"localStorage max!"});return}!h["@"]&&(!h._.via||Math.random()<p["@"]/p["/"])&&f.push(r),!g&&(g=setTimeout(k,9+m/333))});function k(){if(!f.length&&((setTimeout.turn||"").s||"").length){setTimeout(k,99);return}var h=f;clearTimeout(g),g=!1,f=[],d(u,function(D,y){try{!D&&O.setItem(c.prefix,y)}catch(n){D=o=n||"localStorage failure"}D&&(Gun.log(D+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),b.on("localStorage:error",{err:D,get:c.prefix,put:u})),m=y.length,setTimeout.each(h,function(n){b.on("in",{"@":n,err:D,ok:0})},0,99)})}})}})(w,"./localStorage")})(),function(){var N;if(""+N!=typeof Gun){var w=function(e){console.warn("Warning! Deprecated internal utility will break in next version:",e)},A=Gun;A.fn=A.fn||{is:function(e){return w("fn"),!!e&&typeof e=="function"}},A.bi=A.bi||{is:function(e){return w("bi"),e instanceof Boolean||typeof e=="boolean"}},A.num=A.num||{is:function(e){return w("num"),!M(e)&&(e-parseFloat(e)+1>=0||e===1/0||e===-1/0)}},A.text=A.text||{is:function(e){return w("text"),typeof e=="string"}},A.text.ify=A.text.ify||function(e){return w("text.ify"),A.text.is(e)?e:typeof JSON<"u"?JSON.stringify(e):e&&e.toString?e.toString():e},A.text.random=A.text.random||function(e,t){w("text.random");var i="";for(e=e||24,t=t||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";e>0;)i+=t.charAt(Math.floor(Math.random()*t.length)),e--;return i},A.text.match=A.text.match||function(e,t){var i,l;return w("text.match"),typeof e!="string"?!1:(typeof t=="string"&&(t={"=":t}),t=t||{},i=t["="]||t["*"]||t[">"]||t["<"],e===i?!0:l!==t["="]?!1:(i=t["*"]||t[">"]||t["<"],e.slice(0,(i||"").length)===i?!0:l!==t["*"]?!1:l!==t[">"]&&l!==t["<"]?e>=t[">"]&&e<=t["<"]:l!==t[">"]&&e>=t[">"]||l!==t["<"]&&e<=t["<"]))},A.text.hash=A.text.hash||function(e,t){if(w("text.hash"),typeof e=="string"){if(t=t||0,!e.length)return t;for(var i=0,l=e.length,x;i<l;++i)x=e.charCodeAt(i),t=(t<<5)-t+x,t|=0;return t}},A.list=A.list||{is:function(e){return w("list"),e instanceof Array}},A.list.slit=A.list.slit||Array.prototype.slice,A.list.sort=A.list.sort||function(e){return w("list.sort"),function(t,i){return!t||!i?0:(t=t[e],i=i[e],t<i?-1:t>i?1:0)}},A.list.map=A.list.map||function(e,t,i){return w("list.map"),S(e,t,i)},A.list.index=1,A.obj=A.boj||{is:function(e){return w("obj"),e?e instanceof Object&&e.constructor===Object||Object.prototype.toString.call(e).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},A.obj.put=A.obj.put||function(e,t,i){return w("obj.put"),(e||{})[t]=i,e},A.obj.has=A.obj.has||function(e,t){return w("obj.has"),e&&Object.prototype.hasOwnProperty.call(e,t)},A.obj.del=A.obj.del||function(e,t){if(w("obj.del"),!!e)return e[t]=null,delete e[t],e},A.obj.as=A.obj.as||function(e,t,i,l){return w("obj.as"),e[t]=e[t]||(l===i?{}:i)},A.obj.ify=A.obj.ify||function(e){if(w("obj.ify"),r(e))return e;try{e=JSON.parse(e)}catch{e={}}return e},function(){var e;function t(i,l){$(this,l)&&e!==this[l]||(this[l]=i)}A.obj.to=A.obj.to||function(i,l){return w("obj.to"),l=l||{},S(i,t,l),l}}(),A.obj.copy=A.obj.copy||function(e){return w("obj.copy"),e&&JSON.parse(JSON.stringify(e))},function(){function e(t,i){var l=this.n,x;if(!(l&&(i===l||r(l)&&$(l,i)))&&x!==i)return!0}A.obj.empty=A.obj.empty||function(t,i){return w("obj.empty"),t?!S(t,e,{n:i}):!0}}(),function(){function e(l,x){if(arguments.length===2){e.r=e.r||{},e.r[l]=x;return}e.r=e.r||[],e.r.push(l)}var t=Object.keys,i;Object.keys=Object.keys||function(l){return i(l,function(x,T,j){j(T)})},A.obj.map=i=A.obj.map||function(l,x,T){w("obj.map");var j,G=0,I,C,J,W,q=typeof x=="function";if(e.r=j,t&&r(l)&&(J=t(l),W=!0),T=T||{},M(l)||J)for(I=(J||l).length;G<I;G++){var P=G+A.list.index;if(q){if(C=W?x.call(T,l[J[G]],J[G],e):x.call(T,l[G],P,e),C!==j)return C}else if(x===l[W?J[G]:G])return J?J[G]:P}else for(G in l)if(q){if($(l,G)&&(C=T?x.call(T,l[G],G,e):x(l[G],G,e),C!==j))return C}else if(x===l[G])return G;return q?e.r:A.list.index?0:-1}}(),A.time=A.time||{},A.time.is=A.time.is||function(e){return w("time"),e?e instanceof Date:+new Date().getTime()};var y=A.fn.is,M=A.list.is,n=A.obj,r=n.is,$=n.has,S=n.map,a={};a.is=function(e){return w("val.is"),e===N?!1:e===null?!0:e===1/0?!1:v(e)||d(e)||o(e)?!0:a.link.is(e)||!1},a.link=a.rel={_:"#"},function(){a.link.is=function(t){if(w("val.link.is"),t&&t[O]&&!t._&&r(t)){var i={};if(S(t,e,i),i.id)return i.id}return!1};function e(t,i){var l=this;if(l.id)return l.id=!1;if(i==O&&v(t))l.id=t;else return l.id=!1}}(),a.link.ify=function(e){return w("val.link.ify"),_({},O,e)},A.obj.has._=".";var O=a.link._,N,d=A.bi.is,o=A.num.is,v=A.text.is,n=A.obj,r=n.is,_=n.put,S=n.map;A.val=A.val||a;var b={_:"_"};b.soul=function(e,t){return w("node.soul"),e&&e._&&e._[t||u]},b.soul.ify=function(e,t){return w("node.soul.ify"),t=typeof t=="string"?{soul:t}:t||{},e=e||{},e._=e._||{},e._[u]=t.soul||e._[u]||f(),e},b.soul._=a.link._,function(){b.is=function(t,i,l){w("node.is");var x;return r(t)&&(x=b.soul(t))?!S(t,e,{as:l,cb:i,s:x,n:t}):!1};function e(t,i){if(i!==b._){if(!a.is(t))return!0;this.cb&&this.cb.call(this.as,t,i,this.n,this.s)}}}(),function(){b.ify=function(t,i,l){return w("node.ify"),i?typeof i=="string"?i={soul:i}:typeof i=="function"&&(i={map:i}):i={},i.map&&(i.node=i.map.call(l,t,N,i.node||{})),(i.node=b.soul.ify(i.node||{},i))&&S(t,e,{o:i,as:l}),i.node};function e(t,i){var l=this.o,x,T;if(l.map){x=l.map.call(this.as,t,""+i,l.node),T===x?p(l.node,i):l.node&&(l.node[i]=x);return}a.is(t)&&(l.node[i]=t)}}();var n=A.obj,r=n.is,p=n.del,S=n.map,c=A.text,f=c.random,u=b.soul._,N;A.node=A.node||b;var g=A.state;g.lex=function(){return w("state.lex"),g().toString(36).replace(".","")},g.to=function(e,t,i){w("state.to");var l=(e||{})[t];return r(l)&&(l=B(l)),g.ify(i,t,g.is(e,t),l,b.soul(e))},function(){g.map=function(t,i,l){w("state.map");var x,T=r(T=t||i)?T:null;return t=y(t=t||i)?t:null,T&&!t?(i=o(i)?i:g(),T[h]=T[h]||{},S(T,e,{o:T,s:i}),T):(l=l||r(i)?i:x,i=o(i)?i:g(),function(j,G,I,C){if(!t)return e.call({o:I,s:i},j,G),j;t.call(l||this||{},j,G,I,C),!($(I,G)&&x===I[G])&&e.call({o:I,s:i},j,G)})};function e(t,i){h!==i&&g.ify(this.o,i,this.s)}}();var n=A.obj;n.as;var $=n.has,r=n.is,S=n.map,B=n.copy,m=A.num,o=m.is,k=A.fn,y=k.is,h=b._,N,D={};(function(){D.is=function(i,l,x,T){return w("graph.is"),!i||!r(i)||s(i)?!1:!S(i,e,{cb:l,fn:x,as:T})};function e(i,l){if(!i||l!==b.soul(i)||!b.is(i,this.fn,this.as))return!0;!this.cb||(t.n=i,t.as=this.as,this.cb.call(t.as,i,l,t))}function t(i){i&&b.is(t.n,i,t.as)}})(),function(){D.ify=function(T,j,G){w("graph.ify");var I={path:[],obj:T};return j?typeof j=="string"?j={soul:j}:typeof j=="function"&&(j.map=j):j={},typeof G=="string"&&(j.soul=j.soul||G,G=N),j.soul&&(I.link=a.link.ify(j.soul)),j.shell=(G||{}).shell,j.graph=j.graph||{},j.seen=j.seen||[],j.as=j.as||G,e(j,I),j.root=I.node,j.graph};function e(T,j){var G;return(G=x(T,j))?G:(j.env=T,j.soul=i,b.ify(j.obj,t,j)&&(j.link=j.link||a.link.ify(b.soul(j.node)),j.obj!==T.shell&&(T.graph[a.link.is(j.link)]=j.node)),j)}function t(T,j,G){var I=this,C=I.env,J,W;if(b._===j&&$(T,a.link._))return G._;if(!!(J=l(T,j,G,I,C))){if(j||(I.node=I.node||G||{},$(T,b._)&&b.soul(T)&&(I.node._=B(T._)),I.node=b.soul.ify(I.node,a.link.is(I.link)),I.link=I.link||a.link.ify(b.soul(I.node))),(W=C.map)&&(W.call(C.as||{},T,j,G,I),$(G,j))){if(T=G[j],N===T){p(G,j);return}if(!(J=l(T,j,G,I,C)))return}if(!j)return I.node;if(J===!0)return T;if(W=e(C,{obj:T,path:I.path.concat(j)}),!!W.node)return W.link}}function i(T){var j=this,G=a.link.is(j.link),I=j.env.graph;j.link=j.link||a.link.ify(T),j.link[a.link._]=T,j.node&&j.node[b._]&&(j.node[b._][a.link._]=T),$(I,G)&&(I[T]=I[G],p(I,G))}function l(T,j,G,I,C){var J;if(a.is(T))return!0;if(r(T))return 1;if(J=C.invalid)return T=J.call(C.as||{},T,j,G),l(T,j,G,I,C);C.err="Invalid value at '"+I.path.concat(j).join(".")+"'!",A.list.is(T)&&(C.err+=" Use `.set(item)` instead of an Array.")}function x(T,j){for(var G=T.seen,I=G.length,C;I--;)if(C=G[I],j.obj===C.obj)return C;G.push(j)}}(),D.node=function(e){w("graph.node");var t=b.soul(e);if(!!t)return _({},t,e)},function(){D.to=function(t,i,l){if(w("graph.to"),!!t){var x={};return l=l||{seen:{}},S(t[i],e,{obj:x,graph:t,opt:l}),x}};function e(t,i){var l,x;if(b._===i){if(s(t,a.link._))return;this.obj[i]=B(t);return}if(!(l=a.link.is(t))){this.obj[i]=t;return}if(x=this.opt.seen[l]){this.obj[i]=x;return}this.obj[i]=this.opt.seen[l]=D.to(this.graph,l,this.opt)}}();var y=A.fn.is,n=A.obj,r=n.is,p=n.del,$=n.has,s=n.empty,_=n.put,S=n.map,B=n.copy,N;A.graph=A.graph||D}}()})(et);(function(E){E.exports=et.exports})(nt);const st=ft(nt.exports),ct=st("gunjs.sushiwaumai.com"),V=E=>ct.get(`TTT:${E}`),vt=async E=>{const w=V(E);return new Promise(A=>{w.put({field:{...Array.from({length:9},()=>L.None)},turn:L.Circle},()=>{A(w)})})},kt=(E,w)=>{const A=V(E);return A.put({field:{...w.field},turn:w.turn}),A},_t=async E=>{const w=V(E);return new Promise(A=>{w.once(M=>{A(M!==void 0)})})};var lt=tt('<div class="absolute inset-0 flex justify-center flex-col items-center bg-artichoke overflow-hidden">');const bt=E=>(()=>{var w=lt();return Z(w,()=>E.children),w})();export{bt as L,yt as M,L as P,_t as a,vt as c,V as g,dt as h,pt as t,kt as u};
