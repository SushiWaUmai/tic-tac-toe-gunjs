(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))p(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&p(s)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function p(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();const z={};function re(t){z.context=t}const ie=(t,e)=>t===e,oe=Symbol("solid-track"),gt={equals:ie};let Mt=Ht;const et=1,wt=2,Ut={owned:null,cleanups:null,context:null,owner:null};var U=null;let it=null,q=null,K=null,Y=null,Dt=0;function vt(t,e){const i=q,p=U,r=t.length===0,l=r?Ut:{owned:null,cleanups:null,context:null,owner:e||p},s=r?t:()=>t(()=>Q(()=>Ct(l)));U=l,q=null;try{return ot(s,!0)}finally{q=i,U=p}}function Z(t,e){e=e?Object.assign({},gt,e):gt;const i={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},p=r=>(typeof r=="function"&&(r=r(i.value)),Kt(i,r));return[Ft.bind(i),p]}function ct(t,e,i){const p=Ot(t,e,!1,et);ht(p)}function ue(t,e,i){Mt=de;const p=Ot(t,e,!1,et);p.user=!0,Y?Y.push(p):ht(p)}function H(t,e,i){i=i?Object.assign({},gt,i):gt;const p=Ot(t,e,!0,0);return p.observers=null,p.observerSlots=null,p.comparator=i.equals||void 0,ht(p),Ft.bind(p)}function Q(t){let e,i=q;return q=null,e=t(),q=i,e}function fe(t,e,i){const p=Array.isArray(t);let r,l=i&&i.defer;return s=>{let u;if(p){u=Array(t.length);for(let d=0;d<t.length;d++)u[d]=t[d]()}else u=t();if(l){l=!1;return}const w=Q(()=>e(u,r,s));return r=u,w}}function se(t){ue(()=>Q(t))}function mt(t){return U===null||(U.cleanups===null?U.cleanups=[t]:U.cleanups.push(t)),t}function ae(){return U}function le(t,e){const i=U;U=t;try{return ot(e,!0)}finally{U=i}}function ce(t){const e=q,i=U;return Promise.resolve().then(()=>{q=e,U=i;let p;return ot(t,!1),q=U=null,p?p.done:void 0})}function qt(t,e){const i=Symbol("context");return{id:i,Provider:ve(i),defaultValue:t}}function Jt(t){let e;return(e=zt(U,t.id))!==void 0?e:t.defaultValue}function Wt(t){const e=H(t),i=H(()=>Tt(e()));return i.toArray=()=>{const p=i();return Array.isArray(p)?p:p!=null?[p]:[]},i}function Ft(){const t=it;if(this.sources&&(this.state||t))if(this.state===et||t)ht(this);else{const e=K;K=null,ot(()=>kt(this),!1),K=e}if(q){const e=this.observers?this.observers.length:0;q.sources?(q.sources.push(this),q.sourceSlots.push(e)):(q.sources=[this],q.sourceSlots=[e]),this.observers?(this.observers.push(q),this.observerSlots.push(q.sources.length-1)):(this.observers=[q],this.observerSlots=[q.sources.length-1])}return this.value}function Kt(t,e,i){let p=t.value;return(!t.comparator||!t.comparator(p,e))&&(t.value=e,t.observers&&t.observers.length&&ot(()=>{for(let r=0;r<t.observers.length;r+=1){const l=t.observers[r],s=it&&it.running;s&&it.disposed.has(l),(s&&!l.tState||!s&&!l.state)&&(l.pure?K.push(l):Y.push(l),l.observers&&Vt(l)),s||(l.state=et)}if(K.length>1e6)throw K=[],new Error},!1)),e}function ht(t){if(!t.fn)return;Ct(t);const e=U,i=q,p=Dt;q=U=t,he(t,t.value,p),q=i,U=e}function he(t,e,i){let p;try{p=t.fn(e)}catch(r){t.pure&&(t.state=et),Xt(r)}(!t.updatedAt||t.updatedAt<=i)&&(t.updatedAt!=null&&"observers"in t?Kt(t,p):t.value=p,t.updatedAt=i)}function Ot(t,e,i,p=et,r){const l={fn:t,state:p,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:U,context:null,pure:i};return U===null||U!==Ut&&(U.owned?U.owned.push(l):U.owned=[l]),l}function bt(t){const e=it;if(t.state===0||e)return;if(t.state===wt||e)return kt(t);if(t.suspense&&Q(t.suspense.inFallback))return t.suspense.effects.push(t);const i=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Dt);)(t.state||e)&&i.push(t);for(let p=i.length-1;p>=0;p--)if(t=i[p],t.state===et||e)ht(t);else if(t.state===wt||e){const r=K;K=null,ot(()=>kt(t,i[0]),!1),K=r}}function ot(t,e){if(K)return t();let i=!1;e||(K=[]),Y?i=!0:Y=[],Dt++;try{const p=t();return pe(i),p}catch(p){K||(Y=null),Xt(p)}}function pe(t){if(K&&(Ht(K),K=null),t)return;const e=Y;Y=null,e.length&&ot(()=>Mt(e),!1)}function Ht(t){for(let e=0;e<t.length;e++)bt(t[e])}function de(t){let e,i=0;for(e=0;e<t.length;e++){const p=t[e];p.user?t[i++]=p:bt(p)}for(z.context&&re(),e=0;e<i;e++)bt(t[e])}function kt(t,e){const i=it;t.state=0;for(let p=0;p<t.sources.length;p+=1){const r=t.sources[p];r.sources&&(r.state===et||i?r!==e&&bt(r):(r.state===wt||i)&&kt(r,e))}}function Vt(t){const e=it;for(let i=0;i<t.observers.length;i+=1){const p=t.observers[i];(!p.state||e)&&(p.state=wt,p.pure?K.push(p):Y.push(p),p.observers&&Vt(p))}}function Ct(t){let e;if(t.sources)for(;t.sources.length;){const i=t.sources.pop(),p=t.sourceSlots.pop(),r=i.observers;if(r&&r.length){const l=r.pop(),s=i.observerSlots.pop();p<r.length&&(l.sourceSlots[s]=p,r[p]=l,i.observerSlots[p]=s)}}if(t.owned){for(e=0;e<t.owned.length;e++)Ct(t.owned[e]);t.owned=null}if(t.cleanups){for(e=0;e<t.cleanups.length;e++)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function ye(t){return t instanceof Error||typeof t=="string"?t:new Error("Unknown error")}function Xt(t){throw t=ye(t),t}function zt(t,e){return t?t.context&&t.context[e]!==void 0?t.context[e]:zt(t.owner,e):void 0}function Tt(t){if(typeof t=="function"&&!t.length)return Tt(t());if(Array.isArray(t)){const e=[];for(let i=0;i<t.length;i++){const p=Tt(t[i]);Array.isArray(p)?e.push.apply(e,p):e.push(p)}return e}return t}function ve(t,e){return function(p){let r;return ct(()=>r=Q(()=>(U.context={[t]:p.value},Wt(()=>p.children))),void 0),r}}const ge=Symbol("fallback");function Gt(t){for(let e=0;e<t.length;e++)t[e]()}function we(t,e,i={}){let p=[],r=[],l=[],s=0,u=e.length>1?[]:null;return mt(()=>Gt(l)),()=>{let w=t()||[],d,f;return w[oe],Q(()=>{let x=w.length,O,h,$,g,S,b,n,c,m;if(x===0)s!==0&&(Gt(l),l=[],p=[],r=[],s=0,u&&(u=[])),i.fallback&&(p=[ge],r[0]=vt(D=>(l[0]=D,i.fallback())),s=1);else if(s===0){for(r=new Array(x),f=0;f<x;f++)p[f]=w[f],r[f]=vt(y);s=x}else{for($=new Array(x),g=new Array(x),u&&(S=new Array(x)),b=0,n=Math.min(s,x);b<n&&p[b]===w[b];b++);for(n=s-1,c=x-1;n>=b&&c>=b&&p[n]===w[c];n--,c--)$[c]=r[n],g[c]=l[n],u&&(S[c]=u[n]);for(O=new Map,h=new Array(c+1),f=c;f>=b;f--)m=w[f],d=O.get(m),h[f]=d===void 0?-1:d,O.set(m,f);for(d=b;d<=n;d++)m=p[d],f=O.get(m),f!==void 0&&f!==-1?($[f]=r[d],g[f]=l[d],u&&(S[f]=u[d]),f=h[f],O.set(m,f)):l[d]();for(f=b;f<x;f++)f in $?(r[f]=$[f],l[f]=g[f],u&&(u[f]=S[f],u[f](f))):r[f]=vt(y);r=r.slice(0,s=x),p=w.slice(0)}return r});function y(x){if(l[f]=x,u){const[O,h]=Z(f);return u[f]=h,e(w[f],O)}return e(w[f])}}}function W(t,e){return Q(()=>t(e||{}))}function be(t){const e="fallback"in t&&{fallback:()=>t.fallback};return H(we(()=>t.each,t.children,e||void 0))}function Qt(t){let e=!1,i=!1;const p=Wt(()=>t.children),r=H(()=>{let l=p();Array.isArray(l)||(l=[l]);for(let s=0;s<l.length;s++){const u=l[s].when;if(u)return i=!!l[s].keyed,[s,u,l[s]]}return[-1]},void 0,{equals:(l,s)=>l[0]===s[0]&&(e?l[1]===s[1]:!l[1]==!s[1])&&l[2]===s[2]});return H(()=>{const[l,s,u]=r();if(l<0)return t.fallback;const w=u.children,d=typeof w=="function"&&w.length>0;return e=i||d,d?Q(()=>w(s)):w})}function lt(t){return t}function ke(t,e,i){let p=i.length,r=e.length,l=p,s=0,u=0,w=e[r-1].nextSibling,d=null;for(;s<r||u<l;){if(e[s]===i[u]){s++,u++;continue}for(;e[r-1]===i[l-1];)r--,l--;if(r===s){const f=l<p?u?i[u-1].nextSibling:i[l-u]:w;for(;u<l;)t.insertBefore(i[u++],f)}else if(l===u)for(;s<r;)(!d||!d.has(e[s]))&&e[s].remove(),s++;else if(e[s]===i[l-1]&&i[u]===e[r-1]){const f=e[--r].nextSibling;t.insertBefore(i[u++],e[s++].nextSibling),t.insertBefore(i[--l],f),e[r]=i[l]}else{if(!d){d=new Map;let y=u;for(;y<l;)d.set(i[y],y++)}const f=d.get(e[s]);if(f!=null)if(u<f&&f<l){let y=s,x=1,O;for(;++y<r&&y<l&&!((O=d.get(e[y]))==null||O!==f+x);)x++;if(x>f-u){const h=e[s];for(;u<f;)t.insertBefore(i[u++],h)}else t.replaceChild(i[u++],e[s++])}else s++;else e[s++].remove()}}}const It="_$DX_DELEGATE";function _e(t,e,i,p={}){let r;return vt(l=>{r=l,e===document?t():tt(e,t(),e.firstChild?null:void 0,i)},p.owner),()=>{r(),e.textContent=""}}function ut(t,e,i){const p=document.createElement("template");p.innerHTML=t;let r=p.content.firstChild;return i&&(r=r.firstChild),r}function $t(t,e=window.document){const i=e[It]||(e[It]=new Set);for(let p=0,r=t.length;p<r;p++){const l=t[p];i.has(l)||(i.add(l),e.addEventListener(l,me))}}function Rt(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}function Yt(t,e,i,p){if(p)Array.isArray(i)?(t[`$$${e}`]=i[0],t[`$$${e}Data`]=i[1]):t[`$$${e}`]=i;else if(Array.isArray(i)){const r=i[0];t.addEventListener(e,i[0]=l=>r.call(t,i[1],l))}else t.addEventListener(e,i)}function tt(t,e,i,p){if(i!==void 0&&!p&&(p=[]),typeof e!="function")return _t(t,e,p,i);ct(r=>_t(t,e(),r,i),p)}function me(t){const e=`$$${t.type}`;let i=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==i&&Object.defineProperty(t,"target",{configurable:!0,value:i}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return i||document}}),z.registry&&!z.done&&(z.done=!0,document.querySelectorAll("[id^=pl-]").forEach(p=>p.remove()));i!==null;){const p=i[e];if(p&&!i.disabled){const r=i[`${e}Data`];if(r!==void 0?p.call(i,r,t):p.call(i,t),t.cancelBubble)return}i=i.host&&i.host!==i&&i.host instanceof Node?i.host:i.parentNode}}function _t(t,e,i,p,r){for(z.context&&!i&&(i=[...t.childNodes]);typeof i=="function";)i=i();if(e===i)return i;const l=typeof e,s=p!==void 0;if(t=s&&i[0]&&i[0].parentNode||t,l==="string"||l==="number"){if(z.context)return i;if(l==="number"&&(e=e.toString()),s){let u=i[0];u&&u.nodeType===3?u.data=e:u=document.createTextNode(e),i=ft(t,i,p,u)}else i!==""&&typeof i=="string"?i=t.firstChild.data=e:i=t.textContent=e}else if(e==null||l==="boolean"){if(z.context)return i;i=ft(t,i,p)}else{if(l==="function")return ct(()=>{let u=e();for(;typeof u=="function";)u=u();i=_t(t,u,i,p)}),()=>i;if(Array.isArray(e)){const u=[],w=i&&Array.isArray(i);if(At(u,e,i,r))return ct(()=>i=_t(t,u,i,p,!0)),()=>i;if(z.context){if(!u.length)return i;for(let d=0;d<u.length;d++)if(u[d].parentNode)return i=u}if(u.length===0){if(i=ft(t,i,p),s)return i}else w?i.length===0?Pt(t,u,p):ke(t,i,u):(i&&ft(t),Pt(t,u));i=u}else if(e instanceof Node){if(z.context&&e.parentNode)return i=s?[e]:e;if(Array.isArray(i)){if(s)return i=ft(t,i,p,e);ft(t,i,null,e)}else i==null||i===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);i=e}}return i}function At(t,e,i,p){let r=!1;for(let l=0,s=e.length;l<s;l++){let u=e[l],w=i&&i[l];if(u instanceof Node)t.push(u);else if(!(u==null||u===!0||u===!1))if(Array.isArray(u))r=At(t,u,w)||r;else if(typeof u=="function")if(p){for(;typeof u=="function";)u=u();r=At(t,Array.isArray(u)?u:[u],Array.isArray(w)?w:[w])||r}else t.push(u),r=!0;else{const d=String(u);w&&w.nodeType===3&&w.data===d?t.push(w):t.push(document.createTextNode(d))}}return r}function Pt(t,e,i=null){for(let p=0,r=e.length;p<r;p++)t.insertBefore(e[p],i)}function ft(t,e,i,p){if(i===void 0)return t.textContent="";const r=p||document.createTextNode("");if(e.length){let l=!1;for(let s=e.length-1;s>=0;s--){const u=e[s];if(r!==u){const w=u.parentNode===t;!l&&!s?w?t.replaceChild(r,u):t.insertBefore(r,i):w&&u.remove()}else l=!0}}else t.insertBefore(r,i);return[r]}var F=(t=>(t[t.None=0]="None",t[t.Cross=1]="Cross",t[t.Circle=2]="Circle",t[t.Draw=3]="Draw",t))(F||{});const $e=t=>{switch(t){case 2:return 1;case 1:return 2}return 0},xe=t=>{const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[6,4,2]];for(let p of e){const[r,l,s]=p;if(t[r]!==0&&t[r]===t[l]&&t[r]==t[s])return t[r]}let i=!0;for(let p of t)p===0&&(i=!1);return i?3:0},je="/tic-tac-toe-gunjs/assets/circle.2c56a12d.svg",Se="/tic-tac-toe-gunjs/assets/cross.f03db0bd.svg",Te=ut('<img alt="circle" class="animate-spawn">'),Ae=ut('<img alt="cross" class="animate-spawn">'),De=ut('<button class="btn border-8 field flex justify-center items-center m-2"></button>'),Oe=t=>(()=>{const e=De.cloneNode(!0);return Yt(e,"click",t.onClick,!0),tt(e,W(Qt,{get fallback(){return[]},get children(){return[W(lt,{get when(){return t.state===F.Circle},get children(){const i=Te.cloneNode(!0);return Rt(i,"src",je),i}}),W(lt,{get when(){return t.state===F.Cross},get children(){const i=Ae.cloneNode(!0);return Rt(i,"src",Se),i}})]}})),e})();$t(["click"]);const Ce=ut('<div class="absolute inset-0 flex justify-center items-center"><div class="rounded bg-gray-100 px-8 py-5"></div></div>'),Ne=t=>(()=>{const e=Ce.cloneNode(!0),i=e.firstChild;return tt(i,()=>t.children),e})(),Ee=ut('<div class="flex flex-col"><h3 class="m-3 text-4xl text-center"></h3><span class="py-2 px-3 rounded bg-gray-300 m-auto cursor-pointer">Restart Game</span></div>'),xt=t=>W(Ne,{get children(){const e=Ee.cloneNode(!0),i=e.firstChild,p=i.nextSibling;return tt(i,()=>t.result),Yt(p,"click",t.restartGame,!0),e}});$t(["click"]);function Ge(t,e,i){return t.addEventListener(e,i),()=>t.removeEventListener(e,i)}function Ie([t,e],i,p){return[i?()=>i(t()):t,p?r=>e(p(r)):e]}function Re(t){try{return document.querySelector(t)}catch{return null}}function Pe(t,e){const i=Re(`#${t}`);i?i.scrollIntoView():e&&window.scrollTo(0,0)}function Be(t,e,i,p){let r=!1;const l=u=>typeof u=="string"?{value:u}:u,s=Ie(Z(l(t()),{equals:(u,w)=>u.value===w.value}),void 0,u=>(!r&&e(u),u));return i&&mt(i((u=t())=>{r=!0,s[1](l(u)),r=!1})),{signal:s,utils:p}}function Le(t){if(t){if(Array.isArray(t))return{signal:t}}else return{signal:Z({value:""})};return t}function Me(){return Be(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:t,replace:e,scroll:i,state:p})=>{e?window.history.replaceState(p,"",t):window.history.pushState(p,"",t),Pe(window.location.hash.slice(1),i)},t=>Ge(window,"popstate",()=>t()),{go:t=>window.history.go(t)})}const Ue=/^(?:[a-z0-9]+:)?\/\//i,qe=/^\/+|\/+$/g;function jt(t,e=!1){const i=t.replace(qe,"");return i?e||/^[?#]/.test(i)?i:"/"+i:""}function St(t,e,i){if(Ue.test(e))return;const p=jt(t),r=i&&jt(i);let l="";return!r||e.startsWith("/")?l=p:r.toLowerCase().indexOf(p.toLowerCase())!==0?l=p+r:l=r,(l||"/")+jt(e,!l)}function Je(t,e){if(t==null)throw new Error(e);return t}function We(t){const e={};return t.searchParams.forEach((i,p)=>{e[p]=i}),e}function st(t,e){return decodeURIComponent(e?t.replace(/\+/g," "):t)}function Fe(t){const e=new Map,i=ae();return new Proxy({},{get(p,r){return e.has(r)||le(i,()=>e.set(r,H(()=>t()[r]))),e.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}const Ke=100,Zt=qt(),He=qt(),te=()=>Je(Jt(Zt),"Make sure your app is wrapped in a <Router />");let Bt;const Ve=()=>te().navigatorFactory(),Xe=()=>te().location;function ze(t,e){const i=new URL("http://sar"),p=H(w=>{const d=t();try{return new URL(d,i)}catch{return console.error(`Invalid path ${d}`),w}},i,{equals:(w,d)=>w.href===d.href}),r=H(()=>st(p().pathname)),l=H(()=>st(p().search,!0)),s=H(()=>st(p().hash)),u=H(()=>"");return{get pathname(){return r()},get search(){return l()},get hash(){return s()},get state(){return e()},get key(){return u()},query:Fe(fe(l,()=>We(p())))}}function Qe(t,e="",i,p){const{signal:[r,l],utils:s={}}=Le(t),u=s.parsePath||(T=>T),w=s.renderPath||(T=>T),d=St("",e),f=void 0;if(d===void 0)throw new Error(`${d} is not a valid base path`);d&&!r().value&&l({value:d,replace:!0,scroll:!1});const[y,x]=Z(!1),O=async T=>{x(!0);try{await ce(T)}finally{x(!1)}},[h,$]=Z(r().value),[g,S]=Z(r().state),b=ze(h,g),n=[],c={pattern:d,params:{},path:()=>d,outlet:()=>null,resolvePath(T){return St(d,T)}};if(i)try{Bt=c,c.data=i({data:void 0,params:{},location:b,navigate:D(c)})}finally{Bt=void 0}function m(T,N,E){Q(()=>{if(typeof N=="number"){N&&(s.go?s.go(N):console.warn("Router integration does not support relative routing"));return}const{replace:a,resolve:o,scroll:v,state:k}={replace:!1,resolve:!0,scroll:!0,...E},I=o?T.resolvePath(N):St("",N);if(I===void 0)throw new Error(`Path '${N}' is not a routable path`);if(n.length>=Ke)throw new Error("Too many redirects");const C=h();if(I!==C||k!==g()){const j=n.push({value:C,replace:a,scroll:v,state:g()});O(()=>{$(I),S(k)}).then(()=>{n.length===j&&_({value:I,state:k})})}})}function D(T){return T=T||Jt(He)||c,(N,E)=>m(T,N,E)}function _(T){const N=n[0];N&&((T.value!==N.value||T.state!==N.state)&&l({...T,replace:N.replace,scroll:N.scroll}),n.length=0)}ct(()=>{const{value:T,state:N}=r();Q(()=>{T!==h()&&O(()=>{$(T),S(N)})})});{let T=function(N){if(N.defaultPrevented||N.button!==0||N.metaKey||N.altKey||N.ctrlKey||N.shiftKey)return;const E=N.composedPath().find(j=>j instanceof Node&&j.nodeName.toUpperCase()==="A");if(!E||!E.hasAttribute("link"))return;const a=E.href;if(E.target||!a&&!E.hasAttribute("state"))return;const o=(E.getAttribute("rel")||"").split(/\s+/);if(E.hasAttribute("download")||o&&o.includes("external"))return;const v=new URL(a),k=st(v.pathname);if(v.origin!==window.location.origin||d&&k&&!k.toLowerCase().startsWith(d.toLowerCase()))return;const I=u(k+st(v.search,!0)+st(v.hash)),C=E.getAttribute("state");N.preventDefault(),m(c,I,{resolve:!1,replace:E.hasAttribute("replace"),scroll:!E.hasAttribute("noscroll"),state:C&&JSON.parse(C)})};var A=T;$t(["click"]),document.addEventListener("click",T),mt(()=>document.removeEventListener("click",T))}return{base:c,out:f,location:b,isRouting:y,renderPath:w,parsePath:u,navigatorFactory:D}}const Ye=t=>{const{source:e,url:i,base:p,data:r,out:l}=t,s=e||Me(),u=Qe(s,p,r);return W(Zt.Provider,{value:u,get children(){return t.children}})};let yt;const Ze=new Uint8Array(16);function tn(){if(!yt&&(yt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!yt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yt(Ze)}const J=[];for(let t=0;t<256;++t)J.push((t+256).toString(16).slice(1));function en(t,e=0){return(J[t[e+0]]+J[t[e+1]]+J[t[e+2]]+J[t[e+3]]+"-"+J[t[e+4]]+J[t[e+5]]+"-"+J[t[e+6]]+J[t[e+7]]+"-"+J[t[e+8]]+J[t[e+9]]+"-"+J[t[e+10]]+J[t[e+11]]+J[t[e+12]]+J[t[e+13]]+J[t[e+14]]+J[t[e+15]]).toLowerCase()}const nn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Lt={randomUUID:nn};function rn(t,e,i){if(Lt.randomUUID&&!e&&!t)return Lt.randomUUID();t=t||{};const p=t.random||(t.rng||tn)();if(p[6]=p[6]&15|64,p[8]=p[8]&63|128,e){i=i||0;for(let r=0;r<16;++r)e[i+r]=p[r];return e}return en(p)}function on(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ee={exports:{}};function un(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ne={exports:{}};(function(t){(function(){function e(p,r){return r?un(p):p.slice?e[l(p)]:function(s,u){p(s={exports:{}}),e[l(u)]=s.exports};function l(s){return s.split("/").slice(-1).toString().replace(".js","")}}var i=t;e(function(p){String.random=function(l,s){var u="";for(l=l||24,s=s||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";l-- >0;)u+=s.charAt(Math.floor(Math.random()*s.length));return u},String.match=function(l,s){var u,w;return typeof l!="string"?!1:(typeof s=="string"&&(s={"=":s}),s=s||{},u=s["="]||s["*"]||s[">"]||s["<"],l===u?!0:w!==s["="]?!1:(u=s["*"]||s[">"],l.slice(0,(u||"").length)===u?!0:w!==s["*"]?!1:w!==s[">"]&&w!==s["<"]?l>=s[">"]&&l<=s["<"]:w!==s[">"]&&l>=s[">"]||w!==s["<"]&&l<=s["<"]))},String.hash=function(l,s){if(typeof l=="string"){if(s=s||0,!l.length)return s;for(var u=0,w=l.length,d;u<w;++u)d=l.charCodeAt(u),s=(s<<5)-s+d,s|=0;return s}};var r=Object.prototype.hasOwnProperty;Object.plain=function(l){return l?l instanceof Object&&l.constructor===Object||Object.prototype.toString.call(l).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(l,s){for(var u in l)if(r.call(l,u)&&(!s||s.indexOf(u)==-1))return!1;return!0},Object.keys=Object.keys||function(l){var s=[];for(var u in l)r.call(l,u)&&s.push(u);return s},function(){var l,s=setTimeout,u=0,w=0,d=typeof setImmediate!=""+l&&setImmediate||function(y,x){return typeof MessageChannel==""+l?s:((y=new MessageChannel).port1.onmessage=function(O){O.data==""&&x()},function(O){x=O,y.port2.postMessage("")})}(),f=s.check=s.check||typeof performance!=""+l&&performance||{now:function(){return+new Date}};s.hold=s.hold||9,s.poll=s.poll||function(y){if(s.hold>=f.now()-u&&w++<3333){y();return}d(function(){u=f.now(),y()},w=0)}}(),function(){var l=setTimeout,s=l.turn=l.turn||function(x){u.push(x)==1&&w(y)},u=s.s=[],w=l.poll,d=0,f,y=function(){(f=u[d++])&&f(),(d==u.length||d==99)&&(u=s.s=u.slice(d),d=0),u.length&&w(y)}}(),function(){var l,s=setTimeout,u=s.turn;(s.each=s.each||function(w,d,f,y){y=y||9,function x(O,h,$){if(h=(O=(w||[]).splice(0,y)).length){for(var g=0;g<h&&l===($=d(O[g]));g++);if(l===$){u(x);return}}f&&f($)}()})()}()})(e,"./shim"),e(function(p){p.exports=function r(f,s,u){if(!f)return{to:r};var w,d=typeof s=="function",f=(this.tag||(this.tag={}))[f]||d&&(this.tag[f]={tag:f,to:r._={next:function(x){var O;(O=this.to)&&O.next(x)}}});if(d){var y={off:r.off||(r.off=function(){if(this.next===r._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=r._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:r._,next:s,the:f,on:this,as:u};return(y.back=f.last||f).to=y,f.last=y}return(f=f.to)&&w!==s&&f.next(s),f}})(e,"./onto"),e(function(p){p.exports=function(r){return r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"&&r!=1/0&&r!=-1/0&&r===r||!!r&&typeof r["#"]=="string"&&Object.keys(r).length===1&&r["#"]}})(e,"./valid"),e(function(p){e("./shim");function r(){var f=+new Date;return w<f?(s=0,w=f+r.drift):w=f+(s+=1)/u+r.drift}r.drift=0;var l=-1/0,s=0,u=999,w=l,d;r.is=function(f,y,x){var O=y&&f&&f._&&f._[">"]||x;if(!!O)return typeof(O=O[y])=="number"?O:l},r.ify=function(f,y,x,O,h){(f=f||{})._=f._||{},h&&(f._["#"]=h);var $=f._[">"]||(f._[">"]={});return d!==y&&y!=="_"&&(typeof x=="number"&&($[y]=x),d!==O&&(f[y]=O)),f},p.exports=r})(e,"./state"),e(function(p){e("./shim");function r(l){var s={s:{}},u=s.s;l=l||{max:999,age:1e3*9},s.check=function(d){return u[d]?w(d):!1};var w=s.track=function(d){var f=u[d]||(u[d]={});return f.was=s.now=+new Date,s.to||(s.to=setTimeout(s.drop,l.age+9)),f};return s.drop=function(d){s.to=null,s.now=+new Date;var f=Object.keys(u);console.STAT&&console.STAT(s.now,+new Date-s.now,"dup drop keys"),setTimeout.each(f,function(y){var x=u[y];x&&(d||l.age)>s.now-x.was||delete u[y]},0,99)},s}p.exports=r})(e,"./dup"),e(function(p){e("./onto"),p.exports=function(s,u){if(!!this.on){var w=(this.opt||{}).lack||9e3;if(typeof s!="function"){if(!s)return;var f=s["#"]||s,d=(this.tag||"")[f];return d?(u&&(d=this.on(f,u),clearTimeout(d.err),d.err=setTimeout(function(){d.off()},w)),!0):void 0}var f=u&&u["#"]||r(9);if(!s)return f;var y=this.on(f,s,u);return y.err=y.err||setTimeout(function(){y.off(),y.next({err:"Error: No ACK yet.",lack:!0})},w),f}};var r=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(p){function r(h){return h instanceof r?(this._={$:this}).$:this instanceof r?r.create(this._={$:this,opt:h}):new r(h)}r.is=function(h){return h instanceof r||h&&h._&&h===h._.$||!1},r.version=.202,r.chain=r.prototype,r.chain.toJSON=function(){},e("./shim"),r.valid=e("./valid"),r.state=e("./state"),r.on=e("./onto"),r.dup=e("./dup"),r.ask=e("./ask"),function(){r.create=function(o){o.root=o.root||o,o.graph=o.graph||{},o.on=o.on||r.on,o.ask=o.ask||r.ask,o.dup=o.dup||r.dup();var v=o.$.opt(o.opt);return o.once||(o.on("in",h,o),o.on("out",h,o),o.on("put",S,o),r.on("create",o),o.on("create",o)),o.once=1,v};function h(o){if(!!o){if(o.out===h){this.to.next(o);return}var v=this,k=v.as,I=k.at||k,C=I.$,j=I.dup,G,R=o.DBG;if((G=o["#"])||(G=o["#"]=s(9)),!j.check(G)){if(j.track(G),G=o._,o._=typeof G=="function"?G:function(){},o.$&&o.$===(o.$._||"").$||(o.$=C),o["@"]&&!o.put&&n(o),!I.ask(o["@"],o))if(R&&(R.u=+new Date),o.put){$(o);return}else o.get&&r.on.get(o,C);R&&(R.uc=+new Date),v.to.next(o),R&&(R.ua=+new Date),!(o.nts||o.NTS)&&(o.out=h,I.on("out",o),R&&(R.ue=+new Date))}}}function $(o){if(!!o){var v=o._||"",k=v.root=((v.$=o.$||"")._||"").root;if(o["@"]&&v.faith&&!v.miss){o.out=h,k.on("out",o);return}v.latch=k.hatch,v.match=k.hatch=[];var I=o.put,C=v.DBG=o.DBG,j=+new Date;if(E=E||j,!(I["#"]&&I["."])){C&&(C.p=j),v["#"]=o["#"],v.msg=o,v.all=0,v.stun=1;var G=Object.keys(I);console.STAT&&console.STAT(j,((C||v).pk=+new Date)-j,"put sort");var R=0,P,B,L,M,X,V,at;(function nt(pt){if(P!=R){if(P=R,!(L=G[R])){console.STAT&&console.STAT(j,((C||v).pd=+new Date)-j,"put"),b(v);return}(M=I[L])?(at=M._)?L!==at["#"]?V=m+D(L)+"soul not same.":(X=at[">"])||(V=m+D(L)+"no state."):V=m+D(L)+"no meta.":V=m+D(L)+"no node.",B=Object.keys(M||{})}if(V){o.err=v.err=V,b(v);return}var Nt=0,rt;for(pt=pt||0;pt++<9&&(rt=B[Nt++]);)if(rt!=="_"){var dt=M[rt],Et=X[rt];if(y===Et){V=m+D(rt)+"on"+D(L)+"no state.";break}if(!w(dt)){V=m+D(rt)+"on"+D(L)+"bad "+typeof dt+D(dt);break}g(dt,rt,L,Et,o),++N}if((B=B.slice(Nt)).length){u(nt);return}++R,B=null,nt(pt)})()}}}r.on.put=$;function g(o,v,k,I,C){var j=C._||"",G=j.root,R=G.graph,P,B=R[k]||x,L=d(B,v,1),M=B[v],X=j.DBG;(P=console.STAT)&&(!R[k]||!M)&&(P.has=(P.has||0)+1);var V=T();if(I>V){setTimeout(function(){g(o,v,k,I,C)},(P=I-V)>A?A:P),console.STAT&&console.STAT((X||j).Hf=+new Date,P,"future");return}if(!(I<L)&&!(!j.faith&&I===L&&(o===M||_(o)<=_(M))&&!j.miss)){j.stun++;var at=C["#"]+j.all++,nt={toString:function(){return at},_:j};nt.toJSON=nt.toString,G.dup.track(nt)["#"]=C["#"],X&&(X.ph=X.ph||+new Date),G.on("put",{"#":nt,"@":C["@"],put:{"#":k,".":v,":":o,">":I},ok:C.ok,_:j})}}function S(o){var v;(v=(o._||"").DBG)&&(v.pa=+new Date,v.pm=v.pm||+new Date);var k=this,I=k.as,C=I.graph,j=o._,G=o.put,R=G["#"],P=G["."],B=G[":"],L=G[">"];o["#"];var M;(M=j.msg)&&(M=M.put)&&(M=M[R])&&f(M,P,L,B,R),C[R]=f(C[R],P,L,B,R),(M=(I.next||"")[R])&&M.on("in",o),b(j),k.to.next(o)}function b(o,v){var k;if(!o.stop&&!(!o.err&&0<--o.stun)&&(o.stop=1,!!(k=o.root))){var I=o.match;I.end=1,I===k.hatch&&(!(I=o.latch)||I.end?delete k.hatch:k.hatch=I),o.hatch&&o.hatch(),setTimeout.each(o.match,function(C){C&&C()}),!(!(v=o.msg)||o.err||v.err)&&(v.out=h,o.root.on("out",v),a())}}function n(o){var v=o["@"]||"",k;if(!(k=v._)){var I=(I=o.$)&&(I=I._)&&(I=I.root)&&(I=I.dup);if(!(I=I.check(v)))return;o["@"]=I["#"]||o["@"];return}k.acks=(k.acks||0)+1,(k.err=o.err)&&(o["@"]=k["#"],b(k)),k.ok=o.ok||k.ok,!k.stop&&!k.crack&&(k.crack=k.match&&k.match.push(function(){c(k)})),c(k)}function c(o){!o||!o.root||o.stun||o.acks!==o.all||o.root.on("in",{"@":o["#"],err:o.err,ok:o.err?y:o.ok||{"":1}})}var m="Error: Invalid graph!",D=function(o){return" '"+(""+o).slice(0,9)+"...' "},_=JSON.stringify,A=2147483647,T=r.state,N=0,E,a=function(){N>999&&N/-(E-(E=+new Date))>1&&(r.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),a=function(){N=0})}}(),function(){r.on.get=function($,g){var S=g._,b=$.get,n=b["#"],c=S.graph[n],m=b["."],D=S.next||(S.next={});D[n];var _=$._||{},A=_.DBG=$.DBG;if(A&&(A.g=+new Date),!c)return S.on("get",$);if(m){if(typeof m!="string"||y===c[m])return S.on("get",$);c=f({},m,d(c,m),c[m],n)}c&&h($,c),S.on("get",$)};function h($,g){var S=+new Date,b=$._||{},n=b.DBG=$.DBG,c=$["#"],m=s(9),D=Object.keys(g||"").sort(),_=((g||"")._||"")["#"];D.length;var A=$.$._.root,T=g===A.graph[_];console.STAT&&console.STAT(S,((n||b).gk=+new Date)-S,"got keys"),g&&function N(){S=+new Date;for(var E=0,a,o={},v;E<9&&(a=D[E++]);)f(o,a,d(g,a),g[a],_);D=D.slice(E),(v={})[_]=o,o=v;var k;T&&(k=function(){},k.ram=k.faith=!0),v=D.length,console.STAT&&console.STAT(S,-(S-(S=+new Date)),"got copied some"),n&&(n.ga=+new Date),A.on("in",{"@":c,"#":m,put:o,"%":v?m=s(9):y,$:A.$,_:k,DBG:n}),console.STAT&&console.STAT(S,+new Date-S,"got in"),v&&setTimeout.turn(N)}(),g||A.on("in",{"@":$["#"]})}r.on.get.ack=h}(),function(){r.chain.opt=function(h){h=h||{};var $=this,g=$._,S=h.peers||h;return Object.plain(h)||(h={}),Object.plain(g.opt)||(g.opt=h),typeof S=="string"&&(S=[S]),Object.plain(g.opt.peers)||(g.opt.peers={}),S instanceof Array&&(h.peers={},S.forEach(function(b){var n={};n.id=n.url=b,h.peers[b]=g.opt.peers[b]=g.opt.peers[b]||n})),l(h,function b(n){var c=this[n];if(this&&this.hasOwnProperty(n)||typeof c=="string"||Object.empty(c)){this[n]=c;return}c&&c.constructor!==Object&&!(c instanceof Array)||l(c,b)}),g.opt.from=h,r.on("opt",g),g.opt.uuid=g.opt.uuid||function(n){return r.state().toString(36).replace(".","")+String.random(n||12)},$}}();var l=function(h,$){Object.keys(h).forEach($,h)},s=String.random,u=setTimeout.turn,w=r.valid,d=r.state.is,f=r.state.ify,y,x={},O;r.log=function(){return!r.log.off&&O.log.apply(O,arguments),[].slice.call(arguments).join(" ")},r.log.once=function(h,$,g){return(g=r.log.once)[h]=g[h]||0,g[h]++||r.log($)},typeof window<"u"&&((window.GUN=window.Gun=r).window=window);try{typeof i<"u"&&(i.exports=r)}catch{}p.exports=r,(r.window||{}).console=(r.window||{}).console||{log:function(){}},(O=console).only=function(h,$){return O.only.i&&h===O.only.i&&O.only.i++&&(O.log.apply(O,arguments)||$)},r.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(p){var r=e("./root");r.chain.back=function(u,w){var d;if(u=u||1,u===-1||u===1/0)return this._.root.$;if(u===1)return(this._.back||this._).$;var f=this,y=f._;if(typeof u=="string"&&(u=u.split(".")),u instanceof Array){var x=0,O=u.length,d=y;for(x;x<O;x++)d=(d||l)[u[x]];return s!==d?w?f:d:(d=y.back)?d.$.back(u,w):void 0}if(typeof u=="function"){for(var h,d={back:y};(d=d.back)&&s===(h=u(d,w)););return h}return typeof u=="number"?(y.back||y).$.back(u-1):this};var l={},s})(e,"./back"),e(function(p){var r=e("./root");r.chain.chain=function(b){var n=this,c=n._,m=new(b||n).constructor(n),D=m._,_;return D.root=_=c.root,D.id=++_.once,D.back=n._,D.on=r.on,D.on("in",r.on.in,D),D.on("out",r.on.out,D),m};function l(b){var n,c=this.as,m=c.back,D=c.root,_;if(b.$||(b.$=c.$),this.to.next(b),c.err){c.on("in",{put:c.put=y,$:c.$});return}if(n=b.get){if(D.pass&&(D.pass[c.id]=c),c.lex&&Object.keys(c.lex).forEach(function(A){_[A]=c.lex[A]},_=b.get=b.get||{}),n["#"]||c.soul){if(n["#"]=n["#"]||c.soul,b["#"]||(b["#"]=x(9)),m=D.$.get(n["#"])._,n=n["."]){if(h(m.put,n)&&(_=m.ask&&m.ask[n],(m.ask||(m.ask={}))[n]=m.$.get(n)._,m.on("in",{get:n,put:{"#":m.soul,".":n,":":m.put[n],">":g(D.graph[m.soul],n)}}),_))return}else{if(_=m.ask&&m.ask[""],(m.ask||(m.ask={}))[""]=m,y!==m.put&&(m.on("in",m),_))return;b.$=m.$}return D.ask(d,b),D.on("in",b)}if(n["."])return c.get?(b={get:{".":c.get},$:c.$},(m.ask||(m.ask={}))[c.get]=b.$._,m.on("out",b)):(b={get:c.lex?b.get:{},$:c.$},m.on("out",b));if((c.ask||(c.ask={}))[""]=c,c.get)return n["."]=c.get,(m.ask||(m.ask={}))[c.get]=b.$._,m.on("out",b)}return m.on("out",b)}r.on.out=l;function s(b,n){n=n||this.as;var c=n.root,m=b.$||(b.$=n.$),D=(m||"")._||f,_=b.put||"",A=_["#"],T=_["."],N=y!==_["="]?_["="]:_[":"],E=_[">"]||-1/0,a;if(y!==b.put&&(y===_["#"]||y===_["."]||y===_[":"]&&y===_["="]||y===_[">"])){if(!O(_)){if(!(A=((_||"")._||"")["#"])){console.log("chain not yet supported for",_,"...",b,n);return}return m=n.root.$.get(A),setTimeout.each(Object.keys(_).sort(),function(o){o=="_"||y===(E=g(_,o))||n.on("in",{$:m,put:{"#":A,".":o,"=":_[o],">":E},VIA:b})})}n.on("in",{$:D.back.$,put:{"#":A=D.back.soul,".":T=D.has||D.get,"=":_,">":g(D.back.put,T)},via:b});return}(b.seen||"")[n.id]||((b.seen||(b.seen=function(){}))[n.id]=n,n!==D&&(Object.keys(b).forEach(function(o){_[o]=b[o]},_={}),_.get=n.get||_.get,!n.soul&&!n.has?_.$$$=_.$$$||n.$:D.soul&&(_.$=n.$,_.$$=_.$$||D.$),b=_),w(b,n),(n.soul||b.$$)&&E>=g(c.graph[A],T)&&((_=c.$.get(A)._).put=S(_.put,T,E,N,A)),!D.soul&&E>=g(c.graph[A],T)&&(a=(c.$.get(A)._.next||"")[T])&&(a.put=N,typeof(_=O(N))=="string"&&(a.put=c.$.get(_)._.put||N)),this.to&&this.to.next(b),n.any&&setTimeout.each(Object.keys(n.any),function(o){(o=n.any[o])&&o(b)},0,99),n.echo&&setTimeout.each(Object.keys(n.echo),function(o){(o=n.echo[o])&&o.on("in",b)},0,99),((b.$$||"")._||D).soul&&(a=n.next)&&(a=a[T])&&(_={},Object.keys(b).forEach(function(o){_[o]=b[o]}),_.$=(b.$$||b.$).get(_.get=T),delete _.$$,delete _.$$$,a.on("in",_)),u(b,n))}r.on.in=s;function u(b,n){if(n=n||this.as||b.$._,!(b.$$&&this!==r.on)&&!(!b.put||n.soul)){var c=b.put||"",m=c["="]||c[":"],T,D=n.root,_=D.$.get(c["#"]).get(c["."])._;if(typeof(m=O(m))!="string"){this===r.on&&((_.echo||(_.echo={}))[n.id]=n);return}if(!((_.echo||(_.echo={}))[n.id]&&!(D.pass||"")[n.id])){if(T=D.pass){if(T[m+n.id])return;T[m+n.id]=1}(_.echo||(_.echo={}))[n.id]=n,n.has&&(n.link=m);var A=D.$.get(_.link=m)._;(A.echo||(A.echo={}))[_.id]=_;var T=n.ask||"";(T[""]||n.lex)&&A.on("out",{get:{"#":m}}),setTimeout.each(Object.keys(T),function(N,E){!N||!(E=T[N])||E.on("out",{get:{"#":m,".":N}})},0,99)}}}r.on.link=u;function w(b,n){var c=b.put||"",m=y!==c["="]?c["="]:c[":"],D=n.root,_,A;if(y===m){if(n.soul&&y!==n.put||(A=(b.$$||b.$||"")._||"",b["@"]&&(y!==A.put||y!==n.put)))return;(_=n.link||b.linked)&&delete(D.$.get(_)._.echo||"")[n.id],n.has&&(n.link=null),n.put=y,setTimeout.each(Object.keys(n.next||""),function(T,N){!(N=n.next[T])||(_&&delete(D.$.get(_).get(T)._.echo||"")[N.id],N.on("in",{get:T,put:y,$:N.$}))},0,99);return}n.soul||b.$$||(_=O(m),A=b.$._||"",!((_===A.link||n.has&&!A.link)&&!((D.pass||"")[n.id]&&typeof _!="string"))&&(delete(A.echo||"")[n.id],w({get:n.get,put:y,$:b.$,linked:b.linked=b.linked||A.link},n)))}r.on.unlink=w;function d(b,n){var c=this.as,m=c.$._;m.root;var D=c.get||"",_=(b.put||"")[D["#"]]||"";if(!b.put||typeof D["."]=="string"&&y===_[D["."]]){if(y!==m.put||!m.soul&&!m.has)return;m.ack=(m.ack||0)+1,m.on("in",{get:m.get,put:m.put=y,$:m.$,"@":b["@"]});return}(b._||{}).miss=1,r.on.put(b)}var f={},y,x=String.random,O=r.valid,h=function(b,n){return b&&Object.prototype.hasOwnProperty.call(b,n)},$=r.state,g=$.is,S=$.ify})(e,"./chain"),e(function(p){var r=e("./root");r.chain.get=function(y,x,O){var h,$;if(typeof y=="string"){if(y.length==0)return(h=this.chain())._.err={err:r.log("0 length key!",y)},x&&x.call(h,h._.err),h;var g=this,S=g._,b=S.next||w;(h=b[y])||(h=y&&l(y,g)),h=h&&h.$}else if(typeof y=="function"){let T=function(N,E,a){if(!T.stun&&!((j=c.pass)&&!j[m])){var o=N.$._,v=(N.$$||"")._,k=(v||o).put,I=!o.has&&!o.soul,C={},j;if((I||f===k)&&(k=f===((j=N.put)||"")["="]?f===(j||"")[":"]?j:j[":"]:j["="]),typeof(j=r.valid(k))=="string"&&(k=f===(j=c.$.get(j)._.put)?n.not?f:k:j),!(n.not&&f===k)){if(f===n.stun){if((j=c.stun)&&j.on&&(S.$.back(function(G){if(j.on(""+G.id,C={}),(C.run||0)<T.id)return C}),!C.run&&j.on(""+o.id,C={}),!C.run&&v&&j.on(""+v.id,C={}),T.id>C.run&&((!C.stun||C.stun.end)&&(C.stun=j.on("stun"),C.stun=C.stun&&C.stun.last),C.stun&&!C.stun.end))){(C.stun.add||(C.stun.add={}))[m]=function(){T(N,E,1)};return}if(f===k&&(a=0),(j=c.hatch)&&!j.end&&f===n.hatch&&!a){if(D[o.$._.id])return;D[o.$._.id]=1,j.push(function(){T(N,E,1)});return}D={}}if(c.pass){if(c.pass[m+o.id])return;c.pass[m+o.id]=1}if(n.on){n.ok.call(o.$,k,o.get,N,E||T);return}if(n.v2020){n.ok(N,E||T);return}Object.keys(N).forEach(function(G){j[G]=N[G]},j={}),N=j,N.put=k,n.ok.call(n.as,N,E||T)}}};var _=T;if(x===!0)return s(this,y,x,O),this;h=this;var S=h._,n=x||{},c=S.root,m;n.at=S,n.ok=y;var D={};return T.at=S,(S.any||(S.any={}))[m=String.random(7)]=T,T.off=function(){T.stun=1,S.any&&delete S.any[m]},T.rid=u,T.id=n.run||++c.once,$=c.pass,(c.pass={})[m]=1,n.out=n.out||{get:{}},S.on("out",n.out),c.pass=$,h}else{if(typeof y=="number")return this.get(""+y,x,O);if(typeof($=d(y))=="string")return this.get($,x,O);($=this.get.next)&&(h=$(this,y))}return h?(x&&typeof x=="function"&&h.get(x,O),h):((h=this.chain())._.err={err:r.log("Invalid get request!",y)},x&&x.call(h,h._.err),h)};function l(y,x){var O=x._,h=O.next,$=x.chain(),g=$._;return h||(h=O.next={}),h[g.get=y]=g,x===O.root.$?g.soul=y:(O.soul||O.has)&&(g.has=y),g}function s(y,x,O,h){var $=y._,g=0,S;return(S=$.soul||$.link)?x(S,h,$):$.jam?$.jam.push([x,h]):($.jam=[[x,h]],y.get(function(n,c){if(!(f===n.put&&!$.root.opt.super&&(S=Object.keys($.root.opt.peers).length)&&++g<=S)){c.rid(n);var m=(m=n.$)&&m._||{},D=0,_;for(S=$.jam,delete $.jam;_=S[D++];){var A=_[0];_=_[1],A&&A(m.link||m.soul||r.valid(n.put)||((n.put||{})._||{})["#"],_,n,c)}}},{out:{get:{".":!0}}}),y)}function u(y){var x=this.at||this.on;if(!y||x.soul||x.has)return this.off();if(!!(y=(y=(y=y.$||y)._||y).id)){x.map;var O;if((O=this.seen||(this.seen={}))[y])return!0;O[y]=!0}}var w={},d=r.valid,f})(e,"./get"),e(function(p){var r=e("./root");r.chain.put=function(h,$,g){var S=this,b=S._,n=b.root;g=g||{},g.root=b.root,g.run||(g.run=n.once),l(g,b.id),g.ack=g.ack||$,g.via=g.via||S,g.data=g.data||h,g.soul||(g.soul=b.soul||typeof $=="string"&&$);var c=g.state=g.state||r.state();return typeof h=="function"?(h(function(m){g.data=m,S.put(d,d,g)}),S):g.soul?(g.$=n.$.get(g.soul),g.todo=[{it:g.data,ref:g.$}],g.turn=g.turn||y,g.ran=g.ran||s,function m(){var D=g.todo,_=D.pop(),A=_.it;_.ref&&_.ref._.id;var T,N,E,a,o;if(l(g,_.ref),(a=_.todo)&&(N=a.pop(),A=A[N],a.length&&D.push(_)),N&&(D.path||(D.path=[])).push(N),!(T=x(A))&&!(o=r.is(A))){if(!Object.plain(A)){s.err(g,"Invalid data: "+w(A)+" at "+(g.via.back(function(j){j.get&&a.push(j.get)},a=[])||a.join("."))+"."+(D.path||[]).join("."));return}for(var v=g.seen||(g.seen=[]),k=v.length;k--;)if(A===(a=v[k]).it){T=A=a.link;break}}if(N&&T)_.node=O(_.node,N,c,A);else{let j=function(G,R){var P=E.link["#"];R&&(R.off(),R.rid(G));var B=P||G.soul||(a=(G.$$||G.$)._||"").soul||a.link||((a=a.put||"")._||"")["#"]||a["#"]||((a=G.put||"")&&G.$$?a["#"]:(a["="]||a[":"]||"")["#"]);if(!P&&l(g,G.$),!B&&!_.link["#"]){(_.wait||(_.wait=[])).push(function(){j(G,R)});return}B||(B=[],(G.$$||G.$).back(function(L){if(a=L.soul||L.link)return B.push(a);B.push(L.get)}),B=B.reverse().join("/")),E.link["#"]=B,!o&&(((g.graph||(g.graph={}))[B]=E.node||(E.node={_:{}}))._["#"]=B),delete g.wait[I],E.wait&&setTimeout.each(E.wait,function(L){L&&L()}),g.ran(g)};var C=j;if(!g.seen){s.err(g,"Data at root of graph must be a node (an object).");return}g.seen.push(E={it:A,link:{},todo:o?[]:Object.keys(A).sort().reverse(),path:(D.path||[]).slice(),up:_}),_.node=O(_.node,N,c,E.link),!o&&E.todo.length&&D.push(E);var I=g.seen.length;(g.wait||(g.wait={}))[I]="",a=(E.ref=o?A:N?_.ref.get(N):_.ref)._,(a=A&&(A._||"")["#"]||a.soul||a.link)?j({soul:a}):E.ref.get(j,{run:g.run,v2020:1,out:{get:{".":" "}}})}if(!D.length)return g.ran(g);g.turn(m)}(),S):(u(g),S)};function l(h,$){if(!!$){$=($._||"").id||$;var g=h.root.stun||(h.root.stun={on:r.on}),S={},b;h.stun||(h.stun=g.on("stun",function(){})),(b=g.on(""+$))&&b.the.last.next(S),!(S.run>=h.run)&&g.on(""+$,function(n){if(h.stun.end){this.off(),this.to.next(n);return}n.run=n.run||h.run,n.stun=n.stun||h.stun})}}function s(h){if(h.err){s.end(h.stun,h.root);return}if(!(h.todo.length||h.end||!Object.empty(h.wait))){h.end=1;var $=h.$.back(-1)._,g=$.root,S=$.ask(function(m){g.on("ack",m),m.err&&!m.lack&&r.log(m),++b>(h.acks||0)&&this.off(),h.ack&&h.ack(m,this)},h.opt),b=0,n=h.stun,c;(c=function(){!n||(s.end(n,g),setTimeout.each(Object.keys(n=n.add||""),function(m){(m=n[m])&&m()}))}).hatch=c,h.ack&&!h.ok&&(h.ok=h.acks||9),h.via._.on("out",{put:h.out=h.graph,ok:h.ok&&{"@":h.ok+1},opt:h.opt,"#":S,_:c})}}s.end=function(h,$){h.end=f,h.the.to===h&&h===h.the.last&&delete $.stun,h.off()},s.err=function(h,$){(h.ack||f).call(h,h.out={err:h.err=r.log($)}),h.ran(h)};function u(h){var $=h.via._,g;h.via=h.via.back(function(S){if(S.soul||!S.get)return S.$;g=h.data,(h.data={})[S.get]=g}),(!h.via||!h.via._.soul)&&(h.via=$.root.$.get(((h.data||"")._||"")["#"]||$.$.back("opt.uuid")())),h.via.put(h.data,h.ack,h)}function w(h,$){return h&&($=h.constructor)&&$.name||typeof h}var d,f=function(){},y=setTimeout.turn,x=r.valid,O=r.state.ify})(e,"./put"),e(function(p){var r=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),p.exports=r})(e,"./index"),e(function(p){var r=e("./index");r.chain.on=function(u,w,d,f){var y=this,x=y._;x.root;var O;if(typeof u=="string")return w?(O=x.on(u,w,d||x,f),d&&d.$&&(d.subs||(d.subs=[])).push(O),y):x.on(u);var h=w;return(h=h===!0?{change:!0}:h||{}).not=1,h.on=1,y.get(u,h),y},r.chain.once=function(u,w){if(w=w||{},!u)return l(this);var d=this,f=d._,y=f.root;f.put;var x=String.random(7),O;return d.get(function(h,$,g,S){var b=this,n=b._,c=n.one||(n.one={});if(S.stun||c[x]==="")return;if((O=r.valid(h))===!0){m();return}if(typeof O=="string")return;clearTimeout((f.one||"")[x]),clearTimeout(c[x]),c[x]=setTimeout(m,w.wait||99);function m(D){if(!n.has&&!n.soul&&(n={put:h,get:$}),s===(O=n.put)&&(O=((g.$$||"")._||"").put),typeof r.valid(O)=="string"&&(O=y.$.get(O)._.put,O===s&&!D)){c[x]=setTimeout(function(){m(1)},w.wait||99);return}S.stun||c[x]!==""&&(c[x]="",(f.soul||f.has)&&S.off(),u.call(b,O,n.get),clearTimeout(c[x]))}},{on:1}),d};function l(u,w,d){return r.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(d=u.chain())._.nix=u.once(function(f,y){d._.on("in",this._)}),d._.lex=u._.lex,d}r.chain.off=function(){var u=this,w=u._,d,f=w.back;if(!!f)return w.ack=0,(d=f.next)&&d[w.get]&&delete d[w.get],(d=f.ask)&&delete d[w.get],(d=f.put)&&delete d[w.get],(d=w.soul)&&delete f.root.graph[d],(d=w.map)&&Object.keys(d).forEach(function(y,x){x=d[y],x.link&&f.root.$.get(x.link).off()}),(d=w.next)&&Object.keys(d).forEach(function(y,x){x=d[y],x.$.off()}),w.on("off",{}),u};var s})(e,"./on"),e(function(p){var r=e("./index"),l=r.chain.get.next;r.chain.get.next=function(d,f){var y;return Object.plain(f)?(y=((y=f["#"])||"")["="]||y)?d.get(y):((y=d.chain()._).lex=f,d.on("in",function(x){String.match(x.get||(x.put||"")["."],f["."]||f["#"]||f)&&y.on("in",x),this.to.next(x)}),y.$):(l||u)(d,f)},r.chain.map=function(d,f,y){var x=this,O=x._,h,$;return Object.plain(d)&&(h=d["."]?d:{".":d},d=w),d?(r.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),$=x.chain(),x.map().on(function(g,S,b,n){var c=(d||u).call(this,g,S,b,n);if(w!==c){if(g===c)return $._.on("in",b);if(r.is(c))return $._.on("in",c._);var m={};Object.keys(b.put).forEach(function(D){m[D]=b.put[D]},m),m["="]=c,$._.on("in",{get:S,put:m})}}),$):(($=O.each)||((O.each=$=x.chain())._.lex=h||$._.lex||O.lex,$._.nix=x.back("nix"),x.on("in",s,$._)),$)};function s(d){this.to.next(d);var f=this.as,y=d.$,x=y._,O=d.put,h;!x.soul&&!d.$$||(h=f.lex)&&!String.match(d.get||(O||"")["."],h["."]||h["#"]||h)||r.on.link(d,f)}var u=function(){},w})(e,"./map"),e(function(p){var r=e("./index");r.chain.set=function(l,s,u){var w=this,d=w.back(-1),f,y;return s=s||function(){},u=u||{},u.item=u.item||l,(f=((l||"")._||"")["#"])&&((l={})["#"]=f),typeof(y=r.valid(l))=="string"?w.get(f=y).put(l,s,u):r.is(l)?(w.put(function(x){l.get(function(O,h,$){if(!O)return s.call(w,{err:r.log('Only a node can be linked! Not "'+$.put+'"!')});(y={})[O]={"#":O},x(y)},!0)}),l):(Object.plain(l)&&(l=d.get(f=w.back("opt.uuid")()).put(l)),w.get(f||d.back("opt.uuid")(7)).put(l,s,u))}})(e,"./set"),e(function(p){e("./shim");var r=function(){},l=JSON.parseAsync||function(d,f,y){var x,O=+new Date;try{f(x,JSON.parse(d,y),s.sucks(+new Date-O))}catch(h){f(h)}},s=JSON.stringifyAsync||function(d,f,y,x){var O,h=+new Date;try{f(O,JSON.stringify(d,y,x),s.sucks(+new Date-h))}catch($){f($)}};s.sucks=function(d){d>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),s.sucks=r)};function u(d){var f=function(){},y=d.opt||{};y.log=y.log||console.log,y.gap=y.gap||y.wait||0,y.max=y.max||(y.memory?y.memory*999*999:3e8)*.3,y.pack=y.pack||y.max*.01*.01,y.puff=y.puff||9;var x=setTimeout.turn||setTimeout,O=d.dup,h=O.check,$=O.track,g=f.hear=function(n,c){if(!!n){if(y.max<=n.length)return f.say({dam:"!",err:"Message too big!"},c);f===this&&(g.d+=n.length||0,++g.c);var m=c.SH=+new Date,D=n[0],_;if(D==="["){l(n,function(A,T){if(A||!T)return f.say({dam:"!",err:"DAM JSON parse error."},c);console.STAT&&console.STAT(+new Date,T.length,"# on hear batch");var N=y.puff;(function E(){for(var a=+new Date,o=0,v;o<N&&(v=T[o++]);)f.hear(v,c);T=T.slice(o),console.STAT&&console.STAT(a,+new Date-a,"hear loop"),S(c),T.length&&x(E,0)})()}),n="";return}if(D==="{"||(n["#"]||Object.plain(n))&&(_=n)){if(_)return g.one(_,c,m);l(n,function(A,T){if(A||!T)return f.say({dam:"!",err:"DAM JSON parse error."},c);g.one(T,c,m)});return}}};g.one=function(n,c,E){var D,_,A,T,N;if(n.DBG&&(n.DBG=N={DBG:n.DBG}),N&&(N.h=E),N&&(N.hp=+new Date),(D=n["#"])||(D=n["#"]=String.random(9)),!(A=h(D))&&(_=n["##"],!(_&&(A=n["@"]||n.get&&D)&&O.check(T=A+_)))){if((n._=function(){}).via=f.leap=c,(A=n["><"])&&typeof A=="string"&&A.slice(0,99).split(",").forEach(function(a){this[a]=1},n._.yo={}),A=n.dam){(A=f.hear[A])&&A(n,c,d),$(D);return}(A=n.ok)&&(n._.near=A["/"]);var E=+new Date;N&&(N.is=E),c.SI=D,d.on("in",f.last=n),N&&(N.hd=+new Date),console.STAT&&console.STAT(E,+new Date-E,n.get?"msg get":n.put?"msg put":"msg"),(A=$(D)).via=c,n.get&&(A.it=n),T&&$(T),f.leap=f.last=null}},g.c=g.d=0,function(){var n=0,c;f.hash=function(_,A){var T,N,E,a=+new Date;s(_.put,function o(v,k){var I=(N||(N=E=k||"")).slice(0,32768);if(T=String.hash(I,T),N=N.slice(32768),N){x(o,0);return}console.STAT&&console.STAT(a,+new Date-a,"say json+hash"),_._.$put=E,_["##"]=T,f.say(_,A),delete _._.$put},m)};function m(_,A){var T;return A instanceof Object?(Object.keys(A).sort().forEach(D,{to:T={},on:A}),T):A}function D(_){this.to[_]=this.on[_]}f.say=function(_,A){var T;if((T=this)&&(T=T.to)&&T.next&&T.next(_),!_)return!1;var N,E,a=_["@"],o=_._||(_._=function(){}),v=_.DBG,k=+new Date;if(o.y=o.y||k,A||v&&(v.y=k),(N=_["#"])||(N=_["#"]=String.random(9)),!c&&$(N),!_["##"]&&w!==_.put&&!o.via&&a){f.hash(_,A);return}if(!A&&a&&(A=(T=O.s[a])&&(T.via||(T=T.it)&&(T=T._)&&T.via)||(T=f.last)&&a===T["#"]&&f.leap),!A&&a)return O.s[a]?void 0:(console.STAT&&console.STAT(+new Date,++n,"total no peer to ack to"),!1);if(!A&&f.way)return f.way(_);if(v&&(v.yh=+new Date),!(E=o.raw)){f.raw(_,A);return}if(v&&(v.yr=+new Date),!A||!A.id){if(!Object.plain(A||y.peers))return!1;var k=+new Date;y.puff;var I=y.peers,C=Object.keys(A||y.peers||{});console.STAT&&console.STAT(k,+new Date-k,"peer keys"),function R(){var P=+new Date;c=1;var B=o.raw;o.raw=E;for(var L=0,M;L<9&&(M=(C||"")[L++]);)!(M=I[M]||(A||"")[M])||f.say(_,M);o.raw=B,c=0,C=C.slice(L),console.STAT&&console.STAT(P,+new Date-P,"say loop"),C.length&&(x(R,0),a&&$(a))}();return}if(!A.wire&&f.wire&&f.wire(A),N!==A.last){if(A.last=N,A===o.via||(T=o.yo)&&(T[A.url]||T[A.pid]||T[A.id]))return!1;if(console.STAT&&console.STAT(k,((v||o).yp=+new Date)-(o.y||k),"say prep"),!c&&a&&$(a),A.batch){if(A.tail=(T=A.tail||0)+E.length,A.tail<=y.pack){A.batch+=(T?",":"")+E;return}S(A)}A.batch="[";var j=+new Date;setTimeout(function(){console.STAT&&console.STAT(j,+new Date-j,"0ms TO"),S(A)},y.gap),b(E,A),console.STAT&&a===A.SI&&console.STAT(k,+new Date-A.SH,"say ack")}},f.say.c=f.say.d=0,f.raw=function(_,A){if(!_)return"";var T=_._||{},N,E;if(E=T.raw)return E;if(typeof _=="string")return _;var a=_["##"],o=_["@"];if(a&&o){if(!T.via&&h(o+a))return!1;if((E=(O.s[o]||"").it)||(E=f.last)&&o===E["#"]){if(a===E["##"])return!1;E["##"]||(E["##"]=a)}}if(!_.dam&&!_["@"]){var v=0,k=[];E=y.peers;for(var I in E){var C=E[I];if(k.push(C.url||C.pid||C.id),++v>6)break}v>1&&(_["><"]=k.join())}if(_.put&&(E=_.ok)&&(_.ok={"@":(E["@"]||1)-1,"/":E["/"]==_._.near?f.near:E["/"]}),N=T.$put){E={},Object.keys(_).forEach(function(G){E[G]=_[G]}),E.put=":])([:",s(E,function(G,R){if(!G){var P=+new Date;E=R.indexOf('"put":":])([:"'),j(w,R=R.slice(0,E+6)+N+R.slice(E+14)),console.STAT&&console.STAT(P,+new Date-P,"say slice")}});return}s(_,j);function j(G,R){G||(T.raw=R,f.say(_,A))}}}();function S(n){var c=n.batch,m=typeof c=="string";if(m&&(c+="]"),n.batch=n.tail=null,!!c&&!(m?3>c.length:!c.length)){if(!m)try{c=c.length===1?c[0]:JSON.stringify(c)}catch(D){return y.log("DAM JSON stringify error",D)}!c||b(c,n)}}function b(n,c){try{var m=c.wire;c.say?c.say(n):m.send&&m.send(n),f.say.d+=n.length||0,++f.say.c}catch{(c.queue=c.queue||[]).push(n)}}return f.near=0,f.hi=function(n){var c=n.wire,m;if(!c){f.wire(n.length&&{url:n,id:n}||n);return}n.id?y.peers[n.url||n.id]=n:(m=n.id=n.id||n.url||String.random(9),f.say({dam:"?",pid:d.opt.pid},y.peers[m]=n),delete O.s[n.last]),n.met||(f.near++,n.met=+new Date,d.on("hi",n)),m=n.queue,n.queue=[],setTimeout.each(m||[],function(D){b(D,n)},0,9)},f.bye=function(n){n.met&&--f.near,delete n.met,d.on("bye",n);var c=+new Date;c=c-(n.met||c),f.bye.time=((f.bye.time||c)+c)/2},f.hear["!"]=function(n,c){y.log("Error:",n.err)},f.hear["?"]=function(n,c){n.pid&&(c.pid||(c.pid=n.pid),n["@"])||(f.say({dam:"?",pid:y.pid,"@":n["#"]},c),delete O.s[c.last])},f.hear.mob=function(n,c){if(!!n.peers){var m=Object.keys(n.peers),D=m[Math.random()*m.length>>0];!D||(f.bye(c),f.hi(D))}},d.on("create",function(n){n.opt.pid=n.opt.pid||String.random(9),this.to.next(n),n.on("out",f.say)}),d.on("bye",function(n,c){n=y.peers[n.id||n]||n,this.to.next(n),n.bye?n.bye():(c=n.wire)&&c.close&&c.close(),delete y.peers[n.id],n.wire=null}),d.on("bye",function(n,c){this.to.next(n),(c=console.STAT)&&(c.peers=f.near),(c=n.url)&&setTimeout(function(){},y.lack||9e3)}),d.on("hi",function(n,c){if(this.to.next(n),(c=console.STAT)&&(c.peers=f.near),!y.super){var m=Object.keys(d.next||"");m.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(m,function(D){var _=d.next[D];if(y.super||(_.ask||"")[""]){f.say({get:{"#":D}},n);return}setTimeout.each(Object.keys(_.ask||""),function(A){!A||f.say({"##":String.hash((d.graph[D]||"")[A]),get:{"#":D,".":A}},n)})})}}),f}var w;try{p.exports=u}catch{}})(e,"./mesh"),e(function(p){var r=e("./index");r.Mesh=e("./mesh"),r.on("opt",function(s){if(this.to.next(s),s.once)return;var u=s.opt;if(u.WebSocket===!1)return;var w=r.window||{},d=u.WebSocket||w.WebSocket||w.webkitWebSocket||w.mozWebSocket;if(!d)return;u.WebSocket=d;var f=u.mesh=u.mesh||r.Mesh(s);f.wire||u.wire,f.wire=u.wire=y;function y($){try{if(!$||!$.url)return S&&S($);var g=$.url.replace(/^http/,"ws"),S=$.wire=new u.WebSocket(g);return S.onclose=function(){O($),u.mesh.bye($)},S.onerror=function(b){O($)},S.onopen=function(){u.mesh.hi($)},S.onmessage=function(b){!b||u.mesh.hear(b.data||b,$)},S}catch{u.mesh.bye($)}}setTimeout(function(){!u.super&&s.on("out",{dam:"hi"})},1);var x=2*999;function O($){clearTimeout($.defer),u.peers[$.url]&&(h&&$.retry<=0||($.retry=($.retry||u.retry+1||60)-(-$.tried+($.tried=+new Date)<x*4?1:0),$.defer=setTimeout(function g(){if(h&&h.hidden)return setTimeout(g,x);y($)},x)))}var h=""+l!=typeof document&&document});var l})(e,"./websocket"),e(function(p){if(!(typeof Gun>"u")){var r=function(){},l;try{l=(Gun.window||r).localStorage}catch{}l||(Gun.log("Warning: No localStorage exists to persist data to!"),l={setItem:function(u,w){this[u]=w},removeItem:function(u){delete this[u]},getItem:function(u){return this[u]}});var s=JSON.stringifyAsync||function(u,w,d,f){var y;try{w(y,JSON.stringify(u,d,f))}catch(x){w(x)}};Gun.on("create",function u(w){this.to.next(w);var d=w.opt;w.graph;var f=[],y,x,O,h;if(d.localStorage===!1)return;d.prefix=d.file||"gun/";try{y=u[d.prefix]=u[d.prefix]||JSON.parse(O=l.getItem(d.prefix))||{}}catch{y=u[d.prefix]={}}O=(O||"").length,w.on("get",function(g){this.to.next(g);var S=g.get,b,n,c,m;!S||!(b=S["#"])||(n=y[b]||m,n&&(c=S["."])&&!Object.plain(c)&&(n=Gun.state.ify({},c,Gun.state.is(n,c),n[c],b)),Gun.on.get.ack(g,n))}),w.on("put",function(g){this.to.next(g);var S=g.put,b=S["#"],n=S["."],c=g["#"],m=g.ok||"";if(y[b]=Gun.state.ify(y[b],n,S[">"],S[":"],b),h&&O>4999880){w.on("in",{"@":c,err:"localStorage max!"});return}!g["@"]&&(!g._.via||Math.random()<m["@"]/m["/"])&&f.push(c),!x&&(x=setTimeout($,9+O/333))});function $(){if(!f.length&&((setTimeout.turn||"").s||"").length){setTimeout($,99);return}var g=f;clearTimeout(x),x=!1,f=[],s(y,function(S,b){try{!S&&l.setItem(d.prefix,b)}catch(n){S=h=n||"localStorage failure"}S&&(Gun.log(S+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),w.on("localStorage:error",{err:S,get:d.prefix,put:y})),O=b.length,setTimeout.each(g,function(n){w.on("in",{"@":n,err:S,ok:0})},0,99)})}})}})(e,"./localStorage")})(),function(){var E;if(""+E!=typeof Gun){var e=function(a){console.warn("Warning! Deprecated internal utility will break in next version:",a)},i=Gun;i.fn=i.fn||{is:function(a){return e("fn"),!!a&&typeof a=="function"}},i.bi=i.bi||{is:function(a){return e("bi"),a instanceof Boolean||typeof a=="boolean"}},i.num=i.num||{is:function(a){return e("num"),!p(a)&&(a-parseFloat(a)+1>=0||a===1/0||a===-1/0)}},i.text=i.text||{is:function(a){return e("text"),typeof a=="string"}},i.text.ify=i.text.ify||function(a){return e("text.ify"),i.text.is(a)?a:typeof JSON<"u"?JSON.stringify(a):a&&a.toString?a.toString():a},i.text.random=i.text.random||function(a,o){e("text.random");var v="";for(a=a||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";a>0;)v+=o.charAt(Math.floor(Math.random()*o.length)),a--;return v},i.text.match=i.text.match||function(a,o){var v,k;return e("text.match"),typeof a!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},v=o["="]||o["*"]||o[">"]||o["<"],a===v?!0:k!==o["="]?!1:(v=o["*"]||o[">"]||o["<"],a.slice(0,(v||"").length)===v?!0:k!==o["*"]?!1:k!==o[">"]&&k!==o["<"]?a>=o[">"]&&a<=o["<"]:k!==o[">"]&&a>=o[">"]||k!==o["<"]&&a<=o["<"]))},i.text.hash=i.text.hash||function(a,o){if(e("text.hash"),typeof a=="string"){if(o=o||0,!a.length)return o;for(var v=0,k=a.length,I;v<k;++v)I=a.charCodeAt(v),o=(o<<5)-o+I,o|=0;return o}},i.list=i.list||{is:function(a){return e("list"),a instanceof Array}},i.list.slit=i.list.slit||Array.prototype.slice,i.list.sort=i.list.sort||function(a){return e("list.sort"),function(o,v){return!o||!v?0:(o=o[a],v=v[a],o<v?-1:o>v?1:0)}},i.list.map=i.list.map||function(a,o,v){return e("list.map"),T(a,o,v)},i.list.index=1,i.obj=i.boj||{is:function(a){return e("obj"),a?a instanceof Object&&a.constructor===Object||Object.prototype.toString.call(a).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},i.obj.put=i.obj.put||function(a,o,v){return e("obj.put"),(a||{})[o]=v,a},i.obj.has=i.obj.has||function(a,o){return e("obj.has"),a&&Object.prototype.hasOwnProperty.call(a,o)},i.obj.del=i.obj.del||function(a,o){if(e("obj.del"),!!a)return a[o]=null,delete a[o],a},i.obj.as=i.obj.as||function(a,o,v,k){return e("obj.as"),a[o]=a[o]||(k===v?{}:v)},i.obj.ify=i.obj.ify||function(a){if(e("obj.ify"),c(a))return a;try{a=JSON.parse(a)}catch{a={}}return a},function(){var a;function o(v,k){D(this,k)&&a!==this[k]||(this[k]=v)}i.obj.to=i.obj.to||function(v,k){return e("obj.to"),k=k||{},T(v,o,k),k}}(),i.obj.copy=i.obj.copy||function(a){return e("obj.copy"),a&&JSON.parse(JSON.stringify(a))},function(){function a(o,v){var k=this.n,I;if(!(k&&(v===k||c(k)&&D(k,v)))&&I!==v)return!0}i.obj.empty=i.obj.empty||function(o,v){return e("obj.empty"),o?!T(o,a,{n:v}):!0}}(),function(){function a(k,I){if(arguments.length===2){a.r=a.r||{},a.r[k]=I;return}a.r=a.r||[],a.r.push(k)}var o=Object.keys,v;Object.keys=Object.keys||function(k){return v(k,function(I,C,j){j(C)})},i.obj.map=v=i.obj.map||function(k,I,C){e("obj.map");var j,G=0,R,P,B,L,M=typeof I=="function";if(a.r=j,o&&c(k)&&(B=o(k),L=!0),C=C||{},p(k)||B)for(R=(B||k).length;G<R;G++){var X=G+i.list.index;if(M){if(P=L?I.call(C,k[B[G]],B[G],a):I.call(C,k[G],X,a),P!==j)return P}else if(I===k[L?B[G]:G])return B?B[G]:X}else for(G in k)if(M){if(D(k,G)&&(P=C?I.call(C,k[G],G,a):I(k[G],G,a),P!==j))return P}else if(I===k[G])return G;return M?a.r:i.list.index?0:-1}}(),i.time=i.time||{},i.time.is=i.time.is||function(a){return e("time"),a?a instanceof Date:+new Date().getTime()};var b=i.fn.is,p=i.list.is,n=i.obj,c=n.is,D=n.has,T=n.map,r={};r.is=function(a){return e("val.is"),a===E?!1:a===null?!0:a===1/0?!1:u(a)||s(a)||h(a)?!0:r.link.is(a)||!1},r.link=r.rel={_:"#"},function(){r.link.is=function(o){if(e("val.link.is"),o&&o[l]&&!o._&&c(o)){var v={};if(T(o,a,v),v.id)return v.id}return!1};function a(o,v){var k=this;if(k.id)return k.id=!1;if(v==l&&u(o))k.id=o;else return k.id=!1}}(),r.link.ify=function(a){return e("val.link.ify"),A({},l,a)},i.obj.has._=".";var l=r.link._,E,s=i.bi.is,h=i.num.is,u=i.text.is,n=i.obj,c=n.is,A=n.put,T=n.map;i.val=i.val||r;var w={_:"_"};w.soul=function(a,o){return e("node.soul"),a&&a._&&a._[o||y]},w.soul.ify=function(a,o){return e("node.soul.ify"),o=typeof o=="string"?{soul:o}:o||{},a=a||{},a._=a._||{},a._[y]=o.soul||a._[y]||f(),a},w.soul._=r.link._,function(){w.is=function(o,v,k){e("node.is");var I;return c(o)&&(I=w.soul(o))?!T(o,a,{as:k,cb:v,s:I,n:o}):!1};function a(o,v){if(v!==w._){if(!r.is(o))return!0;this.cb&&this.cb.call(this.as,o,v,this.n,this.s)}}}(),function(){w.ify=function(o,v,k){return e("node.ify"),v?typeof v=="string"?v={soul:v}:typeof v=="function"&&(v={map:v}):v={},v.map&&(v.node=v.map.call(k,o,E,v.node||{})),(v.node=w.soul.ify(v.node||{},v))&&T(o,a,{o:v,as:k}),v.node};function a(o,v){var k=this.o,I,C;if(k.map){I=k.map.call(this.as,o,""+v,k.node),C===I?m(k.node,v):k.node&&(k.node[v]=I);return}r.is(o)&&(k.node[v]=o)}}();var n=i.obj,c=n.is,m=n.del,T=n.map,d=i.text,f=d.random,y=w.soul._,E;i.node=i.node||w;var x=i.state;x.lex=function(){return e("state.lex"),x().toString(36).replace(".","")},x.to=function(a,o,v){e("state.to");var k=(a||{})[o];return c(k)&&(k=N(k)),x.ify(v,o,x.is(a,o),k,w.soul(a))},function(){x.map=function(o,v,k){e("state.map");var I,C=c(C=o||v)?C:null;return o=b(o=o||v)?o:null,C&&!o?(v=h(v)?v:x(),C[g]=C[g]||{},T(C,a,{o:C,s:v}),C):(k=k||c(v)?v:I,v=h(v)?v:x(),function(j,G,R,P){if(!o)return a.call({o:R,s:v},j,G),j;o.call(k||this||{},j,G,R,P),!(D(R,G)&&I===R[G])&&a.call({o:R,s:v},j,G)})};function a(o,v){g!==v&&x.ify(this.o,v,this.s)}}();var n=i.obj;n.as;var D=n.has,c=n.is,T=n.map,N=n.copy,O=i.num,h=O.is,$=i.fn,b=$.is,g=w._,E,S={};(function(){S.is=function(v,k,I,C){return e("graph.is"),!v||!c(v)||_(v)?!1:!T(v,a,{cb:k,fn:I,as:C})};function a(v,k){if(!v||k!==w.soul(v)||!w.is(v,this.fn,this.as))return!0;!this.cb||(o.n=v,o.as=this.as,this.cb.call(o.as,v,k,o))}function o(v){v&&w.is(o.n,v,o.as)}})(),function(){S.ify=function(C,j,G){e("graph.ify");var R={path:[],obj:C};return j?typeof j=="string"?j={soul:j}:typeof j=="function"&&(j.map=j):j={},typeof G=="string"&&(j.soul=j.soul||G,G=E),j.soul&&(R.link=r.link.ify(j.soul)),j.shell=(G||{}).shell,j.graph=j.graph||{},j.seen=j.seen||[],j.as=j.as||G,a(j,R),j.root=R.node,j.graph};function a(C,j){var G;return(G=I(C,j))?G:(j.env=C,j.soul=v,w.ify(j.obj,o,j)&&(j.link=j.link||r.link.ify(w.soul(j.node)),j.obj!==C.shell&&(C.graph[r.link.is(j.link)]=j.node)),j)}function o(C,j,G){var R=this,P=R.env,B,L;if(w._===j&&D(C,r.link._))return G._;if(!!(B=k(C,j,G,R,P))){if(j||(R.node=R.node||G||{},D(C,w._)&&w.soul(C)&&(R.node._=N(C._)),R.node=w.soul.ify(R.node,r.link.is(R.link)),R.link=R.link||r.link.ify(w.soul(R.node))),(L=P.map)&&(L.call(P.as||{},C,j,G,R),D(G,j))){if(C=G[j],E===C){m(G,j);return}if(!(B=k(C,j,G,R,P)))return}if(!j)return R.node;if(B===!0)return C;if(L=a(P,{obj:C,path:R.path.concat(j)}),!!L.node)return L.link}}function v(C){var j=this,G=r.link.is(j.link),R=j.env.graph;j.link=j.link||r.link.ify(C),j.link[r.link._]=C,j.node&&j.node[w._]&&(j.node[w._][r.link._]=C),D(R,G)&&(R[C]=R[G],m(R,G))}function k(C,j,G,R,P){var B;if(r.is(C))return!0;if(c(C))return 1;if(B=P.invalid)return C=B.call(P.as||{},C,j,G),k(C,j,G,R,P);P.err="Invalid value at '"+R.path.concat(j).join(".")+"'!",i.list.is(C)&&(P.err+=" Use `.set(item)` instead of an Array.")}function I(C,j){for(var G=C.seen,R=G.length,P;R--;)if(P=G[R],j.obj===P.obj)return P;G.push(j)}}(),S.node=function(a){e("graph.node");var o=w.soul(a);if(!!o)return A({},o,a)},function(){S.to=function(o,v,k){if(e("graph.to"),!!o){var I={};return k=k||{seen:{}},T(o[v],a,{obj:I,graph:o,opt:k}),I}};function a(o,v){var k,I;if(w._===v){if(_(o,r.link._))return;this.obj[v]=N(o);return}if(!(k=r.link.is(o))){this.obj[v]=o;return}if(I=this.opt.seen[k]){this.obj[v]=I;return}this.obj[v]=this.opt.seen[k]=S.to(this.graph,k,this.opt)}}();var b=i.fn.is,n=i.obj,c=n.is,m=n.del,D=n.has,_=n.empty,A=n.put,T=n.map,N=n.copy,E;i.graph=i.graph||S}}()})(ne);(function(t){t.exports=ne.exports})(ee);const fn=on(ee.exports),sn=ut('<div><div class="grid grid-cols-3 grid-rows-3"></div><div class="flex justify-center align-middle m-auto"><button class="btn border-4 my-4 py-2 px-4"></button></div></div>'),an=fn("https://mvp-gun.herokuapp.com/gun"),ln=()=>{const[t,e]=Z(Array.from({length:9},()=>F.None)),[i,p]=Z(F.Circle);let r=F.None;const l=H(()=>{const g=xe(t());return g!==F.None&&(r=F.None),g}),s=g=>{let S=t(),b=i();r===F.None&&(r=b),b===r&&S[g]===F.None&&(S[g]=b,e([...S]),b=$e(b),p(b),d())},u=g=>{if(g.code.startsWith("Digit")){const S=parseInt(g.code.charAt(g.code.length-1))-1;S>=0&&s(S)}else if(g.code.startsWith("Numpad")){let S=parseInt(g.code.charAt(g.code.length-1));S>=7&&S<=9&&(S-=6),S>=1&&S<=3&&(S+=6),S-=1,S>=0&&s(S)}};se(()=>{window.addEventListener("keydown",u)}),mt(()=>{window.removeEventListener("keydown",u)});const w=()=>{e(Array.from({length:9},()=>F.None)),p(F.Circle),r=F.None,d()},d=()=>{x.put({field:{...t()},turn:i()})},f=Xe();let y=f.query.id;if(!y){y=rn();const g=f.pathname;Ve()(`${g}?id=${y}`,{replace:!0})}const x=an.get(y);x.get("field").on(g=>{const S=Object.values(g),b=S.slice(0,S.length-1);e(b)}),x.get("turn").on(g=>{p(g)});const[O,h]=Z(!1);let $;return(()=>{const g=sn.cloneNode(!0),S=g.firstChild,b=S.nextSibling,n=b.firstChild;return tt(S,W(be,{get each(){return t()},children:(c,m)=>W(Oe,{state:c,onClick:()=>s(m())})})),tt(g,W(Qt,{get children(){return[W(lt,{get when(){return l()===F.Circle},get children(){return W(xt,{restartGame:w,result:"Winner: Circle"})}}),W(lt,{get when(){return l()===F.Cross},get children(){return W(xt,{restartGame:w,result:"Winner: Cross"})}}),W(lt,{get when(){return l()===F.Draw},get children(){return W(xt,{restartGame:w,result:"Draw"})}})]}}),b),n.$$click=()=>{h(!0),$&&clearTimeout($),$=setTimeout(()=>{h(!1)},5*1e3),navigator.clipboard.writeText(window.location.href)},tt(n,()=>O()?"Link Copied!":"Get Link"),g})()};$t(["click"]);const cn=ut('<div class="absolute inset-0 flex justify-center items-center bg-artichoke"></div>'),hn=()=>W(Ye,{get children(){const t=cn.cloneNode(!0);return tt(t,W(ln,{})),t}});_e(()=>W(hn,{}),document.getElementById("root"));
