import{d as x,a as T,i,c as r,M as m,s as p,S as E,b as F,t as o,e as w,u as I,f as W,g as G,o as B,h as R,A as M,j as q,F as P}from"./index.3b47104f.js";import{P as n,M as L,g as O,h as z,t as H,u as J,a as K,L as Q}from"./layout.d91c01ac.js";const U="/tic-tac-toe-gunjs/assets/circle.2c56a12d.svg",V="/tic-tac-toe-gunjs/assets/cross.f03db0bd.svg";var X=o("<img alt=circle class=animate-spawn>"),Y=o("<img alt=cross class=animate-spawn>"),Z=o('<button class="btn hover-shadow border-8 field flex justify-center items-center m-auto"aria-label="Tic Tac Toe Button">');const ee=a=>(()=>{var l=Z();return T(l,"click",a.onClick,!0),i(l,r(E,{fallback:[],get children(){return[r(m,{get when(){return a.state===n.Circle},get children(){var c=X();return p(c,"src",U),c}}),r(m,{get when(){return a.state===n.Cross},get children(){var c=Y();return p(c,"src",V),c}})]}})),F(()=>p(l,"tabindex",a.active?0:-1)),l})();x(["click"]);var te=o('<div class="flex flex-col"><h3 class="m-3 text-4xl text-center"></h3><button class="modal-btn hover-scale bg-terra py-2 px-3 m-auto">Restart Game');const y=a=>r(L,{foregroundClass:"animate-spawn animation-delay-2000",backgroundClass:"animate-fadein animation-delay-1000",get children(){var l=te(),c=l.firstChild,d=c.nextSibling;return i(c,()=>a.result),T(d,"click",a.restartGame,!0),l}});x(["click"]);var re=o('<div class="text-center mx-auto">Could not find lobby'),ne=o('<div><div class="grid grid-cols-3 grid-rows-3 gap-4 aspect-square"></div><div class="flex flex-row justify-center align-middle gap-x-3"><button class="btn hover-shadow border-4 my-4 py-2 px-4">');const ae=()=>{const[a,l]=w(Array.from({length:9},()=>n.None)),[c,d]=w(n.Circle);let u=I().query.id;const[C]=W(async()=>u?await K(u):!1),$=O(u);$.get("field").on(t=>{const e=Object.values(t),s=e.slice(0,e.length-1);l(s)}),$.get("turn").on(t=>{d(t)});let g=n.None;const h=G(()=>{const t=z(a());return t!==n.None&&(g=n.None),t}),f=t=>{let e=a(),s=c();g===n.None&&(g=s),s===g&&e[t]===n.None&&(e[t]=s,l([...e]),s=H(s),d(s),_())},k=t=>{if(t.code.startsWith("Digit")){const e=parseInt(t.code.charAt(t.code.length-1))-1;e>=0&&f(e)}else if(t.code.startsWith("Numpad")){let e=parseInt(t.code.charAt(t.code.length-1));e>=7&&e<=9&&(e-=6),e>=1&&e<=3&&(e+=6),e-=1,e>=0&&f(e)}};B(()=>{window.addEventListener("keydown",k)}),R(()=>{window.removeEventListener("keydown",k)});const v=()=>{l(Array.from({length:9},()=>n.None)),d(n.Circle),g=n.None,_()},_=()=>{J(u,{field:a(),turn:c()})},[j,N]=w(!1);let b;return(()=>{var t=ne(),e=t.firstChild,s=e.nextSibling,S=s.firstChild;return i(t,r(q,{get when(){return G(()=>!C.loading)()&&!C()},get children(){return r(L,{get children(){return[re(),r(M,{href:"/",class:"modal-btn hover-scale bg-terra px-4 py-2 block",children:"Back to Main Menu"})]}})}}),e),i(e,r(P,{get each(){return a()},children:(A,D)=>r(ee,{get active(){return h()===n.None},state:A,onClick:()=>f(D())})})),i(t,r(E,{get children(){return[r(m,{get when(){return h()===n.Circle},get children(){return r(y,{restartGame:v,result:"Winner: Circle"})}}),r(m,{get when(){return h()===n.Cross},get children(){return r(y,{restartGame:v,result:"Winner: Cross"})}}),r(m,{get when(){return h()===n.Draw},get children(){return r(y,{restartGame:v,result:"Draw"})}})]}}),s),S.$$click=()=>{N(!0),b&&clearTimeout(b),b=setTimeout(()=>{N(!1)},5*1e3),navigator.clipboard.writeText(u)},i(S,()=>j()?"Game ID Copied!":"Get Game ID"),i(s,r(M,{href:"/",class:"btn hover-shadow border-4 my-4 py-2 px-4",children:"Leave Game"}),null),t})()};x(["click"]);const ie=()=>r(Q,{get children(){return r(ae,{})}});export{ie as default};
