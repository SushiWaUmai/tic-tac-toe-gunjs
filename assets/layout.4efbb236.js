import{d as it,a as rt,i as Z,b as ot,k as Y,t as tt}from"./index.2fa58f03.js";var L=(E=>(E[E.None=0]="None",E[E.Cross=1]="Cross",E[E.Circle=2]="Circle",E[E.Draw=3]="Draw",E))(L||{});const pt=E=>{switch(E){case 2:return 1;case 1:return 2}return 0},dt=E=>{const j=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[6,4,2]];for(let M of j){const[a,D,d]=M;if(E[a]!==0&&E[a]===E[D]&&E[a]==E[d])return E[a]}let A=!0;for(let M of E)M===0&&(A=!1);return A?3:0},ut=tt("<div><div></div></div>"),yt=E=>(()=>{const j=ut.cloneNode(!0),A=j.firstChild;return rt(j,"click",E.cancel,!0),A.$$click=M=>{M.stopPropagation()},Z(A,()=>E.children),ot(M=>{const a=`${E.backgroundClass?E.backgroundClass:""} absolute inset-0 flex justify-center items-center bg-black/50`,D=`${E.foregroundClass?E.foregroundClass:""} rounded border-green border-8 bg-lavender px-8 py-5`;return a!==M._v$&&Y(j,M._v$=a),D!==M._v$2&&Y(A,M._v$2=D),M},{_v$:void 0,_v$2:void 0}),j})();it(["click"]);function ft(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}var nt={exports:{}};function at(E){throw new Error('Could not dynamically require "'+E+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var et={exports:{}};(function(E){(function(){function j(M,a){return a?at(M):M.slice?j[D(M)]:function(d,k){M(d={exports:{}}),j[D(k)]=d.exports};function D(d){return d.split("/").slice(-1).toString().replace(".js","")}}var A=E;j(function(M){String.random=function(D,d){var k="";for(D=D||24,d=d||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";D-- >0;)k+=d.charAt(Math.floor(Math.random()*d.length));return k},String.match=function(D,d){var k,b;return typeof D!="string"?!1:(typeof d=="string"&&(d={"=":d}),d=d||{},k=d["="]||d["*"]||d[">"]||d["<"],D===k?!0:b!==d["="]?!1:(k=d["*"]||d[">"],D.slice(0,(k||"").length)===k?!0:b!==d["*"]?!1:b!==d[">"]&&b!==d["<"]?D>=d[">"]&&D<=d["<"]:b!==d[">"]&&D>=d[">"]||b!==d["<"]&&D<=d["<"]))},String.hash=function(D,d){if(typeof D=="string"){if(d=d||0,!D.length)return d;for(var k=0,b=D.length,c;k<b;++k)c=D.charCodeAt(k),d=(d<<5)-d+c,d|=0;return d}};var a=Object.prototype.hasOwnProperty;Object.plain=function(D){return D?D instanceof Object&&D.constructor===Object||Object.prototype.toString.call(D).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(D,d){for(var k in D)if(a.call(D,k)&&(!d||d.indexOf(k)==-1))return!1;return!0},Object.keys=Object.keys||function(D){var d=[];for(var k in D)a.call(D,k)&&d.push(k);return d},function(){var D,d=setTimeout,k=0,b=0,c=typeof setImmediate!=""+D&&setImmediate||function(u,g){return typeof MessageChannel==""+D?d:((u=new MessageChannel).port1.onmessage=function(O){O.data==""&&g()},function(O){g=O,u.port2.postMessage("")})}(),f=d.check=d.check||typeof performance!=""+D&&performance||{now:function(){return+new Date}};d.hold=d.hold||9,d.poll=d.poll||function(u){if(d.hold>=f.now()-k&&b++<3333){u();return}c(function(){k=f.now(),u()},b=0)}}(),function(){var D=setTimeout,d=D.turn=D.turn||function(g){k.push(g)==1&&b(u)},k=d.s=[],b=D.poll,c=0,f,u=function(){(f=k[c++])&&f(),(c==k.length||c==99)&&(k=d.s=k.slice(c),c=0),k.length&&b(u)}}(),function(){var D,d=setTimeout,k=d.turn;(d.each=d.each||function(b,c,f,u){u=u||9,function g(O,o,_){if(o=(O=(b||[]).splice(0,u)).length){for(var h=0;h<o&&D===(_=c(O[h]));h++);if(D===_){k(g);return}}f&&f(_)}()})()}()})(j,"./shim"),j(function(M){M.exports=function a(f,d,k){if(!f)return{to:a};var b,c=typeof d=="function",f=(this.tag||(this.tag={}))[f]||c&&(this.tag[f]={tag:f,to:a._={next:function(g){var O;(O=this.to)&&O.next(g)}}});if(c){var u={off:a.off||(a.off=function(){if(this.next===a._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=a._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:a._,next:d,the:f,on:this,as:k};return(u.back=f.last||f).to=u,f.last=u}return(f=f.to)&&b!==d&&f.next(d),f}})(j,"./onto"),j(function(M){M.exports=function(a){return a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"&&a!=1/0&&a!=-1/0&&a===a||!!a&&typeof a["#"]=="string"&&Object.keys(a).length===1&&a["#"]}})(j,"./valid"),j(function(M){j("./shim");function a(){var f=+new Date;return b<f?(d=0,b=f+a.drift):b=f+(d+=1)/k+a.drift}a.drift=0;var D=-1/0,d=0,k=999,b=D,c;a.is=function(f,u,g){var O=u&&f&&f._&&f._[">"]||g;if(!!O)return typeof(O=O[u])=="number"?O:D},a.ify=function(f,u,g,O,o){(f=f||{})._=f._||{},o&&(f._["#"]=o);var _=f._[">"]||(f._[">"]={});return c!==u&&u!=="_"&&(typeof g=="number"&&(_[u]=g),c!==O&&(f[u]=O)),f},M.exports=a})(j,"./state"),j(function(M){j("./shim");function a(D){var d={s:{}},k=d.s;D=D||{max:999,age:1e3*9},d.check=function(c){return k[c]?b(c):!1};var b=d.track=function(c){var f=k[c]||(k[c]={});return f.was=d.now=+new Date,d.to||(d.to=setTimeout(d.drop,D.age+9)),f};return d.drop=function(c){d.to=null,d.now=+new Date;var f=Object.keys(k);console.STAT&&console.STAT(d.now,+new Date-d.now,"dup drop keys"),setTimeout.each(f,function(u){var g=k[u];g&&(c||D.age)>d.now-g.was||delete k[u]},0,99)},d}M.exports=a})(j,"./dup"),j(function(M){j("./onto"),M.exports=function(d,k){if(!!this.on){var b=(this.opt||{}).lack||9e3;if(typeof d!="function"){if(!d)return;var f=d["#"]||d,c=(this.tag||"")[f];return c?(k&&(c=this.on(f,k),clearTimeout(c.err),c.err=setTimeout(function(){c.off()},b)),!0):void 0}var f=k&&k["#"]||a(9);if(!d)return f;var u=this.on(f,d,k);return u.err=u.err||setTimeout(function(){u.off(),u.next({err:"Error: No ACK yet.",lack:!0})},b),f}};var a=String.random||function(){return Math.random().toString(36).slice(2)}})(j,"./ask"),j(function(M){function a(o){return o instanceof a?(this._={$:this}).$:this instanceof a?a.create(this._={$:this,opt:o}):new a(o)}a.is=function(o){return o instanceof a||o&&o._&&o===o._.$||!1},a.version=.202,a.chain=a.prototype,a.chain.toJSON=function(){},j("./shim"),a.valid=j("./valid"),a.state=j("./state"),a.on=j("./onto"),a.dup=j("./dup"),a.ask=j("./ask"),function(){a.create=function(n){n.root=n.root||n,n.graph=n.graph||{},n.on=n.on||a.on,n.ask=n.ask||a.ask,n.dup=n.dup||a.dup();var r=n.$.opt(n.opt);return n.once||(n.on("in",o,n),n.on("out",o,n),n.on("put",x,n),a.on("create",n),n.on("create",n)),n.once=1,r};function o(n){if(!!n){if(n.out===o){this.to.next(n);return}var r=this,l=r.as,m=l.at||l,$=m.$,w=m.dup,N,I=n.DBG;if((N=n["#"])||(N=n["#"]=d(9)),!w.check(N)){if(w.track(N),N=n._,n._=typeof N=="function"?N:function(){},n.$&&n.$===(n.$._||"").$||(n.$=$),n["@"]&&!n.put&&t(n),!m.ask(n["@"],n))if(I&&(I.u=+new Date),n.put){_(n);return}else n.get&&a.on.get(n,$);I&&(I.uc=+new Date),r.to.next(n),I&&(I.ua=+new Date),!(n.nts||n.NTS)&&(n.out=o,m.on("out",n),I&&(I.ue=+new Date))}}}function _(n){if(!!n){var r=n._||"",l=r.root=((r.$=n.$||"")._||"").root;if(n["@"]&&r.faith&&!r.miss){n.out=o,l.on("out",n);return}r.latch=l.hatch,r.match=l.hatch=[];var m=n.put,$=r.DBG=n.DBG,w=+new Date;if(G=G||w,!(m["#"]&&m["."])){$&&($.p=w),r["#"]=n["#"],r.msg=n,r.all=0,r.stun=1;var N=Object.keys(m);console.STAT&&console.STAT(w,(($||r).pk=+new Date)-w,"put sort");var I=0,C,J,W,q,R,P,H;(function U(K){if(C!=I){if(C=I,!(W=N[I])){console.STAT&&console.STAT(w,(($||r).pd=+new Date)-w,"put"),y(r);return}(q=m[W])?(H=q._)?W!==H["#"]?P=p+T(W)+"soul not same.":(R=H[">"])||(P=p+T(W)+"no state."):P=p+T(W)+"no meta.":P=p+T(W)+"no node.",J=Object.keys(q||{})}if(P){n.err=r.err=P,y(r);return}var Q=0,F;for(K=K||0;K++<9&&(F=J[Q++]);)if(F!=="_"){var z=q[F],X=R[F];if(u===X){P=p+T(F)+"on"+T(W)+"no state.";break}if(!b(z)){P=p+T(F)+"on"+T(W)+"bad "+typeof z+T(z);break}h(z,F,W,X,n),++B}if((J=J.slice(Q)).length){k(U);return}++I,J=null,U(K)})()}}}a.on.put=_;function h(n,r,l,m,$){var w=$._||"",N=w.root,I=N.graph,C,J=I[l]||g,W=c(J,r,1),q=J[r],R=w.DBG;(C=console.STAT)&&(!I[l]||!q)&&(C.has=(C.has||0)+1);var P=S();if(m>P){setTimeout(function(){h(n,r,l,m,$)},(C=m-P)>v?v:C),console.STAT&&console.STAT((R||w).Hf=+new Date,C,"future");return}if(!(m<W)&&!(!w.faith&&m===W&&(n===q||s(n)<=s(q))&&!w.miss)){w.stun++;var H=$["#"]+w.all++,U={toString:function(){return H},_:w};U.toJSON=U.toString,N.dup.track(U)["#"]=$["#"],R&&(R.ph=R.ph||+new Date),N.on("put",{"#":U,"@":$["@"],put:{"#":l,".":r,":":n,">":m},ok:$.ok,_:w})}}function x(n){var r;(r=(n._||"").DBG)&&(r.pa=+new Date,r.pm=r.pm||+new Date);var l=this,m=l.as,$=m.graph,w=n._,N=n.put,I=N["#"],C=N["."],J=N[":"],W=N[">"];n["#"];var q;(q=w.msg)&&(q=q.put)&&(q=q[I])&&f(q,C,W,J,I),$[I]=f($[I],C,W,J,I),(q=(m.next||"")[I])&&q.on("in",n),y(w),l.to.next(n)}function y(n,r){var l;if(!n.stop&&!(!n.err&&0<--n.stun)&&(n.stop=1,!!(l=n.root))){var m=n.match;m.end=1,m===l.hatch&&(!(m=n.latch)||m.end?delete l.hatch:l.hatch=m),n.hatch&&n.hatch(),setTimeout.each(n.match,function($){$&&$()}),!(!(r=n.msg)||n.err||r.err)&&(r.out=o,n.root.on("out",r),e())}}function t(n){var r=n["@"]||"",l;if(!(l=r._)){var m=(m=n.$)&&(m=m._)&&(m=m.root)&&(m=m.dup);if(!(m=m.check(r)))return;n["@"]=m["#"]||n["@"];return}l.acks=(l.acks||0)+1,(l.err=n.err)&&(n["@"]=l["#"],y(l)),l.ok=n.ok||l.ok,!l.stop&&!l.crack&&(l.crack=l.match&&l.match.push(function(){i(l)})),i(l)}function i(n){!n||!n.root||n.stun||n.acks!==n.all||n.root.on("in",{"@":n["#"],err:n.err,ok:n.err?u:n.ok||{"":1}})}var p="Error: Invalid graph!",T=function(n){return" '"+(""+n).slice(0,9)+"...' "},s=JSON.stringify,v=2147483647,S=a.state,B=0,G,e=function(){B>999&&B/-(G-(G=+new Date))>1&&(a.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),e=function(){B=0})}}(),function(){a.on.get=function(_,h){var x=h._,y=_.get,t=y["#"],i=x.graph[t],p=y["."],T=x.next||(x.next={});T[t];var s=_._||{},v=s.DBG=_.DBG;if(v&&(v.g=+new Date),!i)return x.on("get",_);if(p){if(typeof p!="string"||u===i[p])return x.on("get",_);i=f({},p,c(i,p),i[p],t)}i&&o(_,i),x.on("get",_)};function o(_,h){var x=+new Date,y=_._||{},t=y.DBG=_.DBG,i=_["#"],p=d(9),T=Object.keys(h||"").sort(),s=((h||"")._||"")["#"];T.length;var v=_.$._.root,S=h===v.graph[s];console.STAT&&console.STAT(x,((t||y).gk=+new Date)-x,"got keys"),h&&function B(){x=+new Date;for(var G=0,e,n={},r;G<9&&(e=T[G++]);)f(n,e,c(h,e),h[e],s);T=T.slice(G),(r={})[s]=n,n=r;var l;S&&(l=function(){},l.ram=l.faith=!0),r=T.length,console.STAT&&console.STAT(x,-(x-(x=+new Date)),"got copied some"),t&&(t.ga=+new Date),v.on("in",{"@":i,"#":p,put:n,"%":r?p=d(9):u,$:v.$,_:l,DBG:t}),console.STAT&&console.STAT(x,+new Date-x,"got in"),r&&setTimeout.turn(B)}(),h||v.on("in",{"@":_["#"]})}a.on.get.ack=o}(),function(){a.chain.opt=function(o){o=o||{};var _=this,h=_._,x=o.peers||o;return Object.plain(o)||(o={}),Object.plain(h.opt)||(h.opt=o),typeof x=="string"&&(x=[x]),Object.plain(h.opt.peers)||(h.opt.peers={}),x instanceof Array&&(o.peers={},x.forEach(function(y){var t={};t.id=t.url=y,o.peers[y]=h.opt.peers[y]=h.opt.peers[y]||t})),D(o,function y(t){var i=this[t];if(this&&this.hasOwnProperty(t)||typeof i=="string"||Object.empty(i)){this[t]=i;return}i&&i.constructor!==Object&&!(i instanceof Array)||D(i,y)}),h.opt.from=o,a.on("opt",h),h.opt.uuid=h.opt.uuid||function(t){return a.state().toString(36).replace(".","")+String.random(t||12)},_}}();var D=function(o,_){Object.keys(o).forEach(_,o)},d=String.random,k=setTimeout.turn,b=a.valid,c=a.state.is,f=a.state.ify,u,g={},O;a.log=function(){return!a.log.off&&O.log.apply(O,arguments),[].slice.call(arguments).join(" ")},a.log.once=function(o,_,h){return(h=a.log.once)[o]=h[o]||0,h[o]++||a.log(_)},typeof window<"u"&&((window.GUN=window.Gun=a).window=window);try{typeof A<"u"&&(A.exports=a)}catch{}M.exports=a,(a.window||{}).console=(a.window||{}).console||{log:function(){}},(O=console).only=function(o,_){return O.only.i&&o===O.only.i&&O.only.i++&&(O.log.apply(O,arguments)||_)},a.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(j,"./root"),j(function(M){var a=j("./root");a.chain.back=function(k,b){var c;if(k=k||1,k===-1||k===1/0)return this._.root.$;if(k===1)return(this._.back||this._).$;var f=this,u=f._;if(typeof k=="string"&&(k=k.split(".")),k instanceof Array){var g=0,O=k.length,c=u;for(g;g<O;g++)c=(c||D)[k[g]];return d!==c?b?f:c:(c=u.back)?c.$.back(k,b):void 0}if(typeof k=="function"){for(var o,c={back:u};(c=c.back)&&d===(o=k(c,b)););return o}return typeof k=="number"?(u.back||u).$.back(k-1):this};var D={},d})(j,"./back"),j(function(M){var a=j("./root");a.chain.chain=function(y){var t=this,i=t._,p=new(y||t).constructor(t),T=p._,s;return T.root=s=i.root,T.id=++s.once,T.back=t._,T.on=a.on,T.on("in",a.on.in,T),T.on("out",a.on.out,T),p};function D(y){var t,i=this.as,p=i.back,T=i.root,s;if(y.$||(y.$=i.$),this.to.next(y),i.err){i.on("in",{put:i.put=u,$:i.$});return}if(t=y.get){if(T.pass&&(T.pass[i.id]=i),i.lex&&Object.keys(i.lex).forEach(function(v){s[v]=i.lex[v]},s=y.get=y.get||{}),t["#"]||i.soul){if(t["#"]=t["#"]||i.soul,y["#"]||(y["#"]=g(9)),p=T.$.get(t["#"])._,t=t["."]){if(o(p.put,t)&&(s=p.ask&&p.ask[t],(p.ask||(p.ask={}))[t]=p.$.get(t)._,p.on("in",{get:t,put:{"#":p.soul,".":t,":":p.put[t],">":h(T.graph[p.soul],t)}}),s))return}else{if(s=p.ask&&p.ask[""],(p.ask||(p.ask={}))[""]=p,u!==p.put&&(p.on("in",p),s))return;y.$=p.$}return T.ask(c,y),T.on("in",y)}if(t["."])return i.get?(y={get:{".":i.get},$:i.$},(p.ask||(p.ask={}))[i.get]=y.$._,p.on("out",y)):(y={get:i.lex?y.get:{},$:i.$},p.on("out",y));if((i.ask||(i.ask={}))[""]=i,i.get)return t["."]=i.get,(p.ask||(p.ask={}))[i.get]=y.$._,p.on("out",y)}return p.on("out",y)}a.on.out=D;function d(y,t){t=t||this.as;var i=t.root,p=y.$||(y.$=t.$),T=(p||"")._||f,s=y.put||"",v=s["#"],S=s["."],B=u!==s["="]?s["="]:s[":"],G=s[">"]||-1/0,e;if(u!==y.put&&(u===s["#"]||u===s["."]||u===s[":"]&&u===s["="]||u===s[">"])){if(!O(s)){if(!(v=((s||"")._||"")["#"])){console.log("chain not yet supported for",s,"...",y,t);return}return p=t.root.$.get(v),setTimeout.each(Object.keys(s).sort(),function(n){n=="_"||u===(G=h(s,n))||t.on("in",{$:p,put:{"#":v,".":n,"=":s[n],">":G},VIA:y})})}t.on("in",{$:T.back.$,put:{"#":v=T.back.soul,".":S=T.has||T.get,"=":s,">":h(T.back.put,S)},via:y});return}(y.seen||"")[t.id]||((y.seen||(y.seen=function(){}))[t.id]=t,t!==T&&(Object.keys(y).forEach(function(n){s[n]=y[n]},s={}),s.get=t.get||s.get,!t.soul&&!t.has?s.$$$=s.$$$||t.$:T.soul&&(s.$=t.$,s.$$=s.$$||T.$),y=s),b(y,t),(t.soul||y.$$)&&G>=h(i.graph[v],S)&&((s=i.$.get(v)._).put=x(s.put,S,G,B,v)),!T.soul&&G>=h(i.graph[v],S)&&(e=(i.$.get(v)._.next||"")[S])&&(e.put=B,typeof(s=O(B))=="string"&&(e.put=i.$.get(s)._.put||B)),this.to&&this.to.next(y),t.any&&setTimeout.each(Object.keys(t.any),function(n){(n=t.any[n])&&n(y)},0,99),t.echo&&setTimeout.each(Object.keys(t.echo),function(n){(n=t.echo[n])&&n.on("in",y)},0,99),((y.$$||"")._||T).soul&&(e=t.next)&&(e=e[S])&&(s={},Object.keys(y).forEach(function(n){s[n]=y[n]}),s.$=(y.$$||y.$).get(s.get=S),delete s.$$,delete s.$$$,e.on("in",s)),k(y,t))}a.on.in=d;function k(y,t){if(t=t||this.as||y.$._,!(y.$$&&this!==a.on)&&!(!y.put||t.soul)){var i=y.put||"",p=i["="]||i[":"],S,T=t.root,s=T.$.get(i["#"]).get(i["."])._;if(typeof(p=O(p))!="string"){this===a.on&&((s.echo||(s.echo={}))[t.id]=t);return}if(!((s.echo||(s.echo={}))[t.id]&&!(T.pass||"")[t.id])){if(S=T.pass){if(S[p+t.id])return;S[p+t.id]=1}(s.echo||(s.echo={}))[t.id]=t,t.has&&(t.link=p);var v=T.$.get(s.link=p)._;(v.echo||(v.echo={}))[s.id]=s;var S=t.ask||"";(S[""]||t.lex)&&v.on("out",{get:{"#":p}}),setTimeout.each(Object.keys(S),function(B,G){!B||!(G=S[B])||G.on("out",{get:{"#":p,".":B}})},0,99)}}}a.on.link=k;function b(y,t){var i=y.put||"",p=u!==i["="]?i["="]:i[":"],T=t.root,s,v;if(u===p){if(t.soul&&u!==t.put||(v=(y.$$||y.$||"")._||"",y["@"]&&(u!==v.put||u!==t.put)))return;(s=t.link||y.linked)&&delete(T.$.get(s)._.echo||"")[t.id],t.has&&(t.link=null),t.put=u,setTimeout.each(Object.keys(t.next||""),function(S,B){!(B=t.next[S])||(s&&delete(T.$.get(s).get(S)._.echo||"")[B.id],B.on("in",{get:S,put:u,$:B.$}))},0,99);return}t.soul||y.$$||(s=O(p),v=y.$._||"",!((s===v.link||t.has&&!v.link)&&!((T.pass||"")[t.id]&&typeof s!="string"))&&(delete(v.echo||"")[t.id],b({get:t.get,put:u,$:y.$,linked:y.linked=y.linked||v.link},t)))}a.on.unlink=b;function c(y,t){var i=this.as,p=i.$._;p.root;var T=i.get||"",s=(y.put||"")[T["#"]]||"";if(!y.put||typeof T["."]=="string"&&u===s[T["."]]){if(u!==p.put||!p.soul&&!p.has)return;p.ack=(p.ack||0)+1,p.on("in",{get:p.get,put:p.put=u,$:p.$,"@":y["@"]});return}(y._||{}).miss=1,a.on.put(y)}var f={},u,g=String.random,O=a.valid,o=function(y,t){return y&&Object.prototype.hasOwnProperty.call(y,t)},_=a.state,h=_.is,x=_.ify})(j,"./chain"),j(function(M){var a=j("./root");a.chain.get=function(u,g,O){var o,_;if(typeof u=="string"){if(u.length==0)return(o=this.chain())._.err={err:a.log("0 length key!",u)},g&&g.call(o,o._.err),o;var h=this,x=h._,y=x.next||b;(o=y[u])||(o=u&&D(u,h)),o=o&&o.$}else if(typeof u=="function"){let v=function(S,B,G){if(!v.stun&&!(($=i.pass)&&!$[p])){var e=S.$._,n=(S.$$||"")._,r=(n||e).put,l=!e.has&&!e.soul,m={},$;if((l||f===r)&&(r=f===(($=S.put)||"")["="]?f===($||"")[":"]?$:$[":"]:$["="]),typeof($=a.valid(r))=="string"&&(r=f===($=i.$.get($)._.put)?t.not?f:r:$),!(t.not&&f===r)){if(f===t.stun){if(($=i.stun)&&$.on&&(x.$.back(function(w){if($.on(""+w.id,m={}),(m.run||0)<v.id)return m}),!m.run&&$.on(""+e.id,m={}),!m.run&&n&&$.on(""+n.id,m={}),v.id>m.run&&((!m.stun||m.stun.end)&&(m.stun=$.on("stun"),m.stun=m.stun&&m.stun.last),m.stun&&!m.stun.end))){(m.stun.add||(m.stun.add={}))[p]=function(){v(S,B,1)};return}if(f===r&&(G=0),($=i.hatch)&&!$.end&&f===t.hatch&&!G){if(T[e.$._.id])return;T[e.$._.id]=1,$.push(function(){v(S,B,1)});return}T={}}if(i.pass){if(i.pass[p+e.id])return;i.pass[p+e.id]=1}if(t.on){t.ok.call(e.$,r,e.get,S,B||v);return}if(t.v2020){t.ok(S,B||v);return}Object.keys(S).forEach(function(w){$[w]=S[w]},$={}),S=$,S.put=r,t.ok.call(t.as,S,B||v)}}};if(g===!0)return d(this,u,g,O),this;o=this;var x=o._,t=g||{},i=x.root,p;t.at=x,t.ok=u;var T={};return v.at=x,(x.any||(x.any={}))[p=String.random(7)]=v,v.off=function(){v.stun=1,x.any&&delete x.any[p]},v.rid=k,v.id=t.run||++i.once,_=i.pass,(i.pass={})[p]=1,t.out=t.out||{get:{}},x.on("out",t.out),i.pass=_,o}else{if(typeof u=="number")return this.get(""+u,g,O);if(typeof(_=c(u))=="string")return this.get(_,g,O);(_=this.get.next)&&(o=_(this,u))}return o?(g&&typeof g=="function"&&o.get(g,O),o):((o=this.chain())._.err={err:a.log("Invalid get request!",u)},g&&g.call(o,o._.err),o)};function D(u,g){var O=g._,o=O.next,_=g.chain(),h=_._;return o||(o=O.next={}),o[h.get=u]=h,g===O.root.$?h.soul=u:(O.soul||O.has)&&(h.has=u),h}function d(u,g,O,o){var _=u._,h=0,x;return(x=_.soul||_.link)?g(x,o,_):_.jam?_.jam.push([g,o]):(_.jam=[[g,o]],u.get(function(t,i){if(!(f===t.put&&!_.root.opt.super&&(x=Object.keys(_.root.opt.peers).length)&&++h<=x)){i.rid(t);var p=(p=t.$)&&p._||{},T=0,s;for(x=_.jam,delete _.jam;s=x[T++];){var v=s[0];s=s[1],v&&v(p.link||p.soul||a.valid(t.put)||((t.put||{})._||{})["#"],s,t,i)}}},{out:{get:{".":!0}}}),u)}function k(u){var g=this.at||this.on;if(!u||g.soul||g.has)return this.off();if(!!(u=(u=(u=u.$||u)._||u).id)){g.map;var O;if((O=this.seen||(this.seen={}))[u])return!0;O[u]=!0}}var b={},c=a.valid,f})(j,"./get"),j(function(M){var a=j("./root");a.chain.put=function(o,_,h){var x=this,y=x._,t=y.root;h=h||{},h.root=y.root,h.run||(h.run=t.once),D(h,y.id),h.ack=h.ack||_,h.via=h.via||x,h.data=h.data||o,h.soul||(h.soul=y.soul||typeof _=="string"&&_);var i=h.state=h.state||a.state();return typeof o=="function"?(o(function(p){h.data=p,x.put(c,c,h)}),x):h.soul?(h.$=t.$.get(h.soul),h.todo=[{it:h.data,ref:h.$}],h.turn=h.turn||u,h.ran=h.ran||d,function p(){var T=h.todo,s=T.pop(),v=s.it;s.ref&&s.ref._.id;var S,B,G,e,n;if(D(h,s.ref),(e=s.todo)&&(B=e.pop(),v=v[B],e.length&&T.push(s)),B&&(T.path||(T.path=[])).push(B),!(S=g(v))&&!(n=a.is(v))){if(!Object.plain(v)){d.err(h,"Invalid data: "+b(v)+" at "+(h.via.back(function($){$.get&&e.push($.get)},e=[])||e.join("."))+"."+(T.path||[]).join("."));return}for(var r=h.seen||(h.seen=[]),l=r.length;l--;)if(v===(e=r[l]).it){S=v=e.link;break}}if(B&&S)s.node=O(s.node,B,i,v);else{let $=function(w,N){var I=G.link["#"];N&&(N.off(),N.rid(w));var C=I||w.soul||(e=(w.$$||w.$)._||"").soul||e.link||((e=e.put||"")._||"")["#"]||e["#"]||((e=w.put||"")&&w.$$?e["#"]:(e["="]||e[":"]||"")["#"]);if(!I&&D(h,w.$),!C&&!s.link["#"]){(s.wait||(s.wait=[])).push(function(){$(w,N)});return}C||(C=[],(w.$$||w.$).back(function(J){if(e=J.soul||J.link)return C.push(e);C.push(J.get)}),C=C.reverse().join("/")),G.link["#"]=C,!n&&(((h.graph||(h.graph={}))[C]=G.node||(G.node={_:{}}))._["#"]=C),delete h.wait[m],G.wait&&setTimeout.each(G.wait,function(J){J&&J()}),h.ran(h)};if(!h.seen){d.err(h,"Data at root of graph must be a node (an object).");return}h.seen.push(G={it:v,link:{},todo:n?[]:Object.keys(v).sort().reverse(),path:(T.path||[]).slice(),up:s}),s.node=O(s.node,B,i,G.link),!n&&G.todo.length&&T.push(G);var m=h.seen.length;(h.wait||(h.wait={}))[m]="",e=(G.ref=n?v:B?s.ref.get(B):s.ref)._,(e=v&&(v._||"")["#"]||e.soul||e.link)?$({soul:e}):G.ref.get($,{run:h.run,v2020:1,out:{get:{".":" "}}})}if(!T.length)return h.ran(h);h.turn(p)}(),x):(k(h),x)};function D(o,_){if(!!_){_=(_._||"").id||_;var h=o.root.stun||(o.root.stun={on:a.on}),x={},y;o.stun||(o.stun=h.on("stun",function(){})),(y=h.on(""+_))&&y.the.last.next(x),!(x.run>=o.run)&&h.on(""+_,function(t){if(o.stun.end){this.off(),this.to.next(t);return}t.run=t.run||o.run,t.stun=t.stun||o.stun})}}function d(o){if(o.err){d.end(o.stun,o.root);return}if(!(o.todo.length||o.end||!Object.empty(o.wait))){o.end=1;var _=o.$.back(-1)._,h=_.root,x=_.ask(function(p){h.on("ack",p),p.err&&!p.lack&&a.log(p),++y>(o.acks||0)&&this.off(),o.ack&&o.ack(p,this)},o.opt),y=0,t=o.stun,i;(i=function(){!t||(d.end(t,h),setTimeout.each(Object.keys(t=t.add||""),function(p){(p=t[p])&&p()}))}).hatch=i,o.ack&&!o.ok&&(o.ok=o.acks||9),o.via._.on("out",{put:o.out=o.graph,ok:o.ok&&{"@":o.ok+1},opt:o.opt,"#":x,_:i})}}d.end=function(o,_){o.end=f,o.the.to===o&&o===o.the.last&&delete _.stun,o.off()},d.err=function(o,_){(o.ack||f).call(o,o.out={err:o.err=a.log(_)}),o.ran(o)};function k(o){var _=o.via._,h;o.via=o.via.back(function(x){if(x.soul||!x.get)return x.$;h=o.data,(o.data={})[x.get]=h}),(!o.via||!o.via._.soul)&&(o.via=_.root.$.get(((o.data||"")._||"")["#"]||_.$.back("opt.uuid")())),o.via.put(o.data,o.ack,o)}function b(o,_){return o&&(_=o.constructor)&&_.name||typeof o}var c,f=function(){},u=setTimeout.turn,g=a.valid,O=a.state.ify})(j,"./put"),j(function(M){var a=j("./root");j("./chain"),j("./back"),j("./put"),j("./get"),M.exports=a})(j,"./index"),j(function(M){var a=j("./index");a.chain.on=function(k,b,c,f){var u=this,g=u._;g.root;var O;if(typeof k=="string")return b?(O=g.on(k,b,c||g,f),c&&c.$&&(c.subs||(c.subs=[])).push(O),u):g.on(k);var o=b;return(o=o===!0?{change:!0}:o||{}).not=1,o.on=1,u.get(k,o),u},a.chain.once=function(k,b){if(b=b||{},!k)return D(this);var c=this,f=c._,u=f.root;f.put;var g=String.random(7),O;return c.get(function(o,_,h,x){var y=this,t=y._,i=t.one||(t.one={});if(x.stun||i[g]==="")return;if((O=a.valid(o))===!0){p();return}if(typeof O=="string")return;clearTimeout((f.one||"")[g]),clearTimeout(i[g]),i[g]=setTimeout(p,b.wait||99);function p(T){if(!t.has&&!t.soul&&(t={put:o,get:_}),d===(O=t.put)&&(O=((h.$$||"")._||"").put),typeof a.valid(O)=="string"&&(O=u.$.get(O)._.put,O===d&&!T)){i[g]=setTimeout(function(){p(1)},b.wait||99);return}x.stun||i[g]!==""&&(i[g]="",(f.soul||f.has)&&x.off(),k.call(y,O,t.get),clearTimeout(i[g]))}},{on:1}),c};function D(k,b,c){return a.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(c=k.chain())._.nix=k.once(function(f,u){c._.on("in",this._)}),c._.lex=k._.lex,c}a.chain.off=function(){var k=this,b=k._,c,f=b.back;if(!!f)return b.ack=0,(c=f.next)&&c[b.get]&&delete c[b.get],(c=f.ask)&&delete c[b.get],(c=f.put)&&delete c[b.get],(c=b.soul)&&delete f.root.graph[c],(c=b.map)&&Object.keys(c).forEach(function(u,g){g=c[u],g.link&&f.root.$.get(g.link).off()}),(c=b.next)&&Object.keys(c).forEach(function(u,g){g=c[u],g.$.off()}),b.on("off",{}),k};var d})(j,"./on"),j(function(M){var a=j("./index"),D=a.chain.get.next;a.chain.get.next=function(c,f){var u;return Object.plain(f)?(u=((u=f["#"])||"")["="]||u)?c.get(u):((u=c.chain()._).lex=f,c.on("in",function(g){String.match(g.get||(g.put||"")["."],f["."]||f["#"]||f)&&u.on("in",g),this.to.next(g)}),u.$):(D||k)(c,f)},a.chain.map=function(c,f,u){var g=this,O=g._,o,_;return Object.plain(c)&&(o=c["."]?c:{".":c},c=b),c?(a.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),_=g.chain(),g.map().on(function(h,x,y,t){var i=(c||k).call(this,h,x,y,t);if(b!==i){if(h===i)return _._.on("in",y);if(a.is(i))return _._.on("in",i._);var p={};Object.keys(y.put).forEach(function(T){p[T]=y.put[T]},p),p["="]=i,_._.on("in",{get:x,put:p})}}),_):((_=O.each)||((O.each=_=g.chain())._.lex=o||_._.lex||O.lex,_._.nix=g.back("nix"),g.on("in",d,_._)),_)};function d(c){this.to.next(c);var f=this.as,u=c.$,g=u._,O=c.put,o;!g.soul&&!c.$$||(o=f.lex)&&!String.match(c.get||(O||"")["."],o["."]||o["#"]||o)||a.on.link(c,f)}var k=function(){},b})(j,"./map"),j(function(M){var a=j("./index");a.chain.set=function(D,d,k){var b=this,c=b.back(-1),f,u;return d=d||function(){},k=k||{},k.item=k.item||D,(f=((D||"")._||"")["#"])&&((D={})["#"]=f),typeof(u=a.valid(D))=="string"?b.get(f=u).put(D,d,k):a.is(D)?(b.put(function(g){D.get(function(O,o,_){if(!O)return d.call(b,{err:a.log('Only a node can be linked! Not "'+_.put+'"!')});(u={})[O]={"#":O},g(u)},!0)}),D):(Object.plain(D)&&(D=c.get(f=b.back("opt.uuid")()).put(D)),b.get(f||c.back("opt.uuid")(7)).put(D,d,k))}})(j,"./set"),j(function(M){j("./shim");var a=function(){},D=JSON.parseAsync||function(c,f,u){var g,O=+new Date;try{f(g,JSON.parse(c,u),d.sucks(+new Date-O))}catch(o){f(o)}},d=JSON.stringifyAsync||function(c,f,u,g){var O,o=+new Date;try{f(O,JSON.stringify(c,u,g),d.sucks(+new Date-o))}catch(_){f(_)}};d.sucks=function(c){c>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),d.sucks=a)};function k(c){var f=function(){},u=c.opt||{};u.log=u.log||console.log,u.gap=u.gap||u.wait||0,u.max=u.max||(u.memory?u.memory*999*999:3e8)*.3,u.pack=u.pack||u.max*.01*.01,u.puff=u.puff||9;var g=setTimeout.turn||setTimeout,O=c.dup,o=O.check,_=O.track,h=f.hear=function(t,i){if(!!t){if(u.max<=t.length)return f.say({dam:"!",err:"Message too big!"},i);f===this&&(h.d+=t.length||0,++h.c);var p=i.SH=+new Date,T=t[0],s;if(T==="["){D(t,function(v,S){if(v||!S)return f.say({dam:"!",err:"DAM JSON parse error."},i);console.STAT&&console.STAT(+new Date,S.length,"# on hear batch");var B=u.puff;(function G(){for(var e=+new Date,n=0,r;n<B&&(r=S[n++]);)f.hear(r,i);S=S.slice(n),console.STAT&&console.STAT(e,+new Date-e,"hear loop"),x(i),S.length&&g(G,0)})()}),t="";return}if(T==="{"||(t["#"]||Object.plain(t))&&(s=t)){if(s)return h.one(s,i,p);D(t,function(v,S){if(v||!S)return f.say({dam:"!",err:"DAM JSON parse error."},i);h.one(S,i,p)});return}}};h.one=function(t,i,G){var T,s,v,S,B;if(t.DBG&&(t.DBG=B={DBG:t.DBG}),B&&(B.h=G),B&&(B.hp=+new Date),(T=t["#"])||(T=t["#"]=String.random(9)),!(v=o(T))&&(s=t["##"],!(s&&(v=t["@"]||t.get&&T)&&O.check(S=v+s)))){if((t._=function(){}).via=f.leap=i,(v=t["><"])&&typeof v=="string"&&v.slice(0,99).split(",").forEach(function(e){this[e]=1},t._.yo={}),v=t.dam){(v=f.hear[v])&&v(t,i,c),_(T);return}(v=t.ok)&&(t._.near=v["/"]);var G=+new Date;B&&(B.is=G),i.SI=T,c.on("in",f.last=t),B&&(B.hd=+new Date),console.STAT&&console.STAT(G,+new Date-G,t.get?"msg get":t.put?"msg put":"msg"),(v=_(T)).via=i,t.get&&(v.it=t),S&&_(S),f.leap=f.last=null}},h.c=h.d=0,function(){var t=0,i;f.hash=function(s,v){var S,B,G,e=+new Date;d(s.put,function n(r,l){var m=(B||(B=G=l||"")).slice(0,32768);if(S=String.hash(m,S),B=B.slice(32768),B){g(n,0);return}console.STAT&&console.STAT(e,+new Date-e,"say json+hash"),s._.$put=G,s["##"]=S,f.say(s,v),delete s._.$put},p)};function p(s,v){var S;return v instanceof Object?(Object.keys(v).sort().forEach(T,{to:S={},on:v}),S):v}function T(s){this.to[s]=this.on[s]}f.say=function(s,v){var S;if((S=this)&&(S=S.to)&&S.next&&S.next(s),!s)return!1;var B,G,e=s["@"],n=s._||(s._=function(){}),r=s.DBG,l=+new Date;if(n.y=n.y||l,v||r&&(r.y=l),(B=s["#"])||(B=s["#"]=String.random(9)),!i&&_(B),!s["##"]&&b!==s.put&&!n.via&&e){f.hash(s,v);return}if(!v&&e&&(v=(S=O.s[e])&&(S.via||(S=S.it)&&(S=S._)&&S.via)||(S=f.last)&&e===S["#"]&&f.leap),!v&&e)return O.s[e]?void 0:(console.STAT&&console.STAT(+new Date,++t,"total no peer to ack to"),!1);if(!v&&f.way)return f.way(s);if(r&&(r.yh=+new Date),!(G=n.raw)){f.raw(s,v);return}if(r&&(r.yr=+new Date),!v||!v.id){if(!Object.plain(v||u.peers))return!1;var l=+new Date;u.puff;var m=u.peers,$=Object.keys(v||u.peers||{});console.STAT&&console.STAT(l,+new Date-l,"peer keys"),function I(){var C=+new Date;i=1;var J=n.raw;n.raw=G;for(var W=0,q;W<9&&(q=($||"")[W++]);)!(q=m[q]||(v||"")[q])||f.say(s,q);n.raw=J,i=0,$=$.slice(W),console.STAT&&console.STAT(C,+new Date-C,"say loop"),$.length&&(g(I,0),e&&_(e))}();return}if(!v.wire&&f.wire&&f.wire(v),B!==v.last){if(v.last=B,v===n.via||(S=n.yo)&&(S[v.url]||S[v.pid]||S[v.id]))return!1;if(console.STAT&&console.STAT(l,((r||n).yp=+new Date)-(n.y||l),"say prep"),!i&&e&&_(e),v.batch){if(v.tail=(S=v.tail||0)+G.length,v.tail<=u.pack){v.batch+=(S?",":"")+G;return}x(v)}v.batch="[";var w=+new Date;setTimeout(function(){console.STAT&&console.STAT(w,+new Date-w,"0ms TO"),x(v)},u.gap),y(G,v),console.STAT&&e===v.SI&&console.STAT(l,+new Date-v.SH,"say ack")}},f.say.c=f.say.d=0,f.raw=function(s,v){if(!s)return"";var S=s._||{},B,G;if(G=S.raw)return G;if(typeof s=="string")return s;var e=s["##"],n=s["@"];if(e&&n){if(!S.via&&o(n+e))return!1;if((G=(O.s[n]||"").it)||(G=f.last)&&n===G["#"]){if(e===G["##"])return!1;G["##"]||(G["##"]=e)}}if(!s.dam&&!s["@"]){var r=0,l=[];G=u.peers;for(var m in G){var $=G[m];if(l.push($.url||$.pid||$.id),++r>6)break}r>1&&(s["><"]=l.join())}if(s.put&&(G=s.ok)&&(s.ok={"@":(G["@"]||1)-1,"/":G["/"]==s._.near?f.near:G["/"]}),B=S.$put){G={},Object.keys(s).forEach(function(N){G[N]=s[N]}),G.put=":])([:",d(G,function(N,I){if(!N){var C=+new Date;G=I.indexOf('"put":":])([:"'),w(b,I=I.slice(0,G+6)+B+I.slice(G+14)),console.STAT&&console.STAT(C,+new Date-C,"say slice")}});return}d(s,w);function w(N,I){N||(S.raw=I,f.say(s,v))}}}();function x(t){var i=t.batch,p=typeof i=="string";if(p&&(i+="]"),t.batch=t.tail=null,!!i&&!(p?3>i.length:!i.length)){if(!p)try{i=i.length===1?i[0]:JSON.stringify(i)}catch(T){return u.log("DAM JSON stringify error",T)}!i||y(i,t)}}function y(t,i){try{var p=i.wire;i.say?i.say(t):p.send&&p.send(t),f.say.d+=t.length||0,++f.say.c}catch{(i.queue=i.queue||[]).push(t)}}return f.near=0,f.hi=function(t){var i=t.wire,p;if(!i){f.wire(t.length&&{url:t,id:t}||t);return}t.id?u.peers[t.url||t.id]=t:(p=t.id=t.id||t.url||String.random(9),f.say({dam:"?",pid:c.opt.pid},u.peers[p]=t),delete O.s[t.last]),t.met||(f.near++,t.met=+new Date,c.on("hi",t)),p=t.queue,t.queue=[],setTimeout.each(p||[],function(T){y(T,t)},0,9)},f.bye=function(t){t.met&&--f.near,delete t.met,c.on("bye",t);var i=+new Date;i=i-(t.met||i),f.bye.time=((f.bye.time||i)+i)/2},f.hear["!"]=function(t,i){u.log("Error:",t.err)},f.hear["?"]=function(t,i){t.pid&&(i.pid||(i.pid=t.pid),t["@"])||(f.say({dam:"?",pid:u.pid,"@":t["#"]},i),delete O.s[i.last])},f.hear.mob=function(t,i){if(!!t.peers){var p=Object.keys(t.peers),T=p[Math.random()*p.length>>0];!T||(f.bye(i),f.hi(T))}},c.on("create",function(t){t.opt.pid=t.opt.pid||String.random(9),this.to.next(t),t.on("out",f.say)}),c.on("bye",function(t,i){t=u.peers[t.id||t]||t,this.to.next(t),t.bye?t.bye():(i=t.wire)&&i.close&&i.close(),delete u.peers[t.id],t.wire=null}),c.on("bye",function(t,i){this.to.next(t),(i=console.STAT)&&(i.peers=f.near),(i=t.url)&&setTimeout(function(){},u.lack||9e3)}),c.on("hi",function(t,i){if(this.to.next(t),(i=console.STAT)&&(i.peers=f.near),!u.super){var p=Object.keys(c.next||"");p.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(p,function(T){var s=c.next[T];if(u.super||(s.ask||"")[""]){f.say({get:{"#":T}},t);return}setTimeout.each(Object.keys(s.ask||""),function(v){!v||f.say({"##":String.hash((c.graph[T]||"")[v]),get:{"#":T,".":v}},t)})})}}),f}var b;try{M.exports=k}catch{}})(j,"./mesh"),j(function(M){var a=j("./index");a.Mesh=j("./mesh"),a.on("opt",function(d){if(this.to.next(d),d.once)return;var k=d.opt;if(k.WebSocket===!1)return;var b=a.window||{},c=k.WebSocket||b.WebSocket||b.webkitWebSocket||b.mozWebSocket;if(!c)return;k.WebSocket=c;var f=k.mesh=k.mesh||a.Mesh(d);f.wire||k.wire,f.wire=k.wire=u;function u(_){try{if(!_||!_.url)return x&&x(_);var h=_.url.replace(/^http/,"ws"),x=_.wire=new k.WebSocket(h);return x.onclose=function(){O(_),k.mesh.bye(_)},x.onerror=function(y){O(_)},x.onopen=function(){k.mesh.hi(_)},x.onmessage=function(y){!y||k.mesh.hear(y.data||y,_)},x}catch{k.mesh.bye(_)}}setTimeout(function(){!k.super&&d.on("out",{dam:"hi"})},1);var g=2*999;function O(_){clearTimeout(_.defer),k.peers[_.url]&&(o&&_.retry<=0||(_.retry=(_.retry||k.retry+1||60)-(-_.tried+(_.tried=+new Date)<g*4?1:0),_.defer=setTimeout(function h(){if(o&&o.hidden)return setTimeout(h,g);u(_)},g)))}var o=""+D!=typeof document&&document});var D})(j,"./websocket"),j(function(M){if(!(typeof Gun>"u")){var a=function(){},D;try{D=(Gun.window||a).localStorage}catch{}D||(Gun.log("Warning: No localStorage exists to persist data to!"),D={setItem:function(k,b){this[k]=b},removeItem:function(k){delete this[k]},getItem:function(k){return this[k]}});var d=JSON.stringifyAsync||function(k,b,c,f){var u;try{b(u,JSON.stringify(k,c,f))}catch(g){b(g)}};Gun.on("create",function k(b){this.to.next(b);var c=b.opt;b.graph;var f=[],u,g,O,o;if(c.localStorage===!1)return;c.prefix=c.file||"gun/";try{u=k[c.prefix]=k[c.prefix]||JSON.parse(O=D.getItem(c.prefix))||{}}catch{u=k[c.prefix]={}}O=(O||"").length,b.on("get",function(h){this.to.next(h);var x=h.get,y,t,i,p;!x||!(y=x["#"])||(t=u[y]||p,t&&(i=x["."])&&!Object.plain(i)&&(t=Gun.state.ify({},i,Gun.state.is(t,i),t[i],y)),Gun.on.get.ack(h,t))}),b.on("put",function(h){this.to.next(h);var x=h.put,y=x["#"],t=x["."],i=h["#"],p=h.ok||"";if(u[y]=Gun.state.ify(u[y],t,x[">"],x[":"],y),o&&O>4999880){b.on("in",{"@":i,err:"localStorage max!"});return}!h["@"]&&(!h._.via||Math.random()<p["@"]/p["/"])&&f.push(i),!g&&(g=setTimeout(_,9+O/333))});function _(){if(!f.length&&((setTimeout.turn||"").s||"").length){setTimeout(_,99);return}var h=f;clearTimeout(g),g=!1,f=[],d(u,function(x,y){try{!x&&D.setItem(c.prefix,y)}catch(t){x=o=t||"localStorage failure"}x&&(Gun.log(x+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),b.on("localStorage:error",{err:x,get:c.prefix,put:u})),O=y.length,setTimeout.each(h,function(t){b.on("in",{"@":t,err:x,ok:0})},0,99)})}})}})(j,"./localStorage")})(),function(){var G;if(""+G!=typeof Gun){var j=function(e){console.warn("Warning! Deprecated internal utility will break in next version:",e)},A=Gun;A.fn=A.fn||{is:function(e){return j("fn"),!!e&&typeof e=="function"}},A.bi=A.bi||{is:function(e){return j("bi"),e instanceof Boolean||typeof e=="boolean"}},A.num=A.num||{is:function(e){return j("num"),!M(e)&&(e-parseFloat(e)+1>=0||e===1/0||e===-1/0)}},A.text=A.text||{is:function(e){return j("text"),typeof e=="string"}},A.text.ify=A.text.ify||function(e){return j("text.ify"),A.text.is(e)?e:typeof JSON<"u"?JSON.stringify(e):e&&e.toString?e.toString():e},A.text.random=A.text.random||function(e,n){j("text.random");var r="";for(e=e||24,n=n||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";e>0;)r+=n.charAt(Math.floor(Math.random()*n.length)),e--;return r},A.text.match=A.text.match||function(e,n){var r,l;return j("text.match"),typeof e!="string"?!1:(typeof n=="string"&&(n={"=":n}),n=n||{},r=n["="]||n["*"]||n[">"]||n["<"],e===r?!0:l!==n["="]?!1:(r=n["*"]||n[">"]||n["<"],e.slice(0,(r||"").length)===r?!0:l!==n["*"]?!1:l!==n[">"]&&l!==n["<"]?e>=n[">"]&&e<=n["<"]:l!==n[">"]&&e>=n[">"]||l!==n["<"]&&e<=n["<"]))},A.text.hash=A.text.hash||function(e,n){if(j("text.hash"),typeof e=="string"){if(n=n||0,!e.length)return n;for(var r=0,l=e.length,m;r<l;++r)m=e.charCodeAt(r),n=(n<<5)-n+m,n|=0;return n}},A.list=A.list||{is:function(e){return j("list"),e instanceof Array}},A.list.slit=A.list.slit||Array.prototype.slice,A.list.sort=A.list.sort||function(e){return j("list.sort"),function(n,r){return!n||!r?0:(n=n[e],r=r[e],n<r?-1:n>r?1:0)}},A.list.map=A.list.map||function(e,n,r){return j("list.map"),S(e,n,r)},A.list.index=1,A.obj=A.boj||{is:function(e){return j("obj"),e?e instanceof Object&&e.constructor===Object||Object.prototype.toString.call(e).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},A.obj.put=A.obj.put||function(e,n,r){return j("obj.put"),(e||{})[n]=r,e},A.obj.has=A.obj.has||function(e,n){return j("obj.has"),e&&Object.prototype.hasOwnProperty.call(e,n)},A.obj.del=A.obj.del||function(e,n){if(j("obj.del"),!!e)return e[n]=null,delete e[n],e},A.obj.as=A.obj.as||function(e,n,r,l){return j("obj.as"),e[n]=e[n]||(l===r?{}:r)},A.obj.ify=A.obj.ify||function(e){if(j("obj.ify"),i(e))return e;try{e=JSON.parse(e)}catch{e={}}return e},function(){var e;function n(r,l){T(this,l)&&e!==this[l]||(this[l]=r)}A.obj.to=A.obj.to||function(r,l){return j("obj.to"),l=l||{},S(r,n,l),l}}(),A.obj.copy=A.obj.copy||function(e){return j("obj.copy"),e&&JSON.parse(JSON.stringify(e))},function(){function e(n,r){var l=this.n,m;if(!(l&&(r===l||i(l)&&T(l,r)))&&m!==r)return!0}A.obj.empty=A.obj.empty||function(n,r){return j("obj.empty"),n?!S(n,e,{n:r}):!0}}(),function(){function e(l,m){if(arguments.length===2){e.r=e.r||{},e.r[l]=m;return}e.r=e.r||[],e.r.push(l)}var n=Object.keys,r;Object.keys=Object.keys||function(l){return r(l,function(m,$,w){w($)})},A.obj.map=r=A.obj.map||function(l,m,$){j("obj.map");var w,N=0,I,C,J,W,q=typeof m=="function";if(e.r=w,n&&i(l)&&(J=n(l),W=!0),$=$||{},M(l)||J)for(I=(J||l).length;N<I;N++){var R=N+A.list.index;if(q){if(C=W?m.call($,l[J[N]],J[N],e):m.call($,l[N],R,e),C!==w)return C}else if(m===l[W?J[N]:N])return J?J[N]:R}else for(N in l)if(q){if(T(l,N)&&(C=$?m.call($,l[N],N,e):m(l[N],N,e),C!==w))return C}else if(m===l[N])return N;return q?e.r:A.list.index?0:-1}}(),A.time=A.time||{},A.time.is=A.time.is||function(e){return j("time"),e?e instanceof Date:+new Date().getTime()};var y=A.fn.is,M=A.list.is,t=A.obj,i=t.is,T=t.has,S=t.map,a={};a.is=function(e){return j("val.is"),e===G?!1:e===null?!0:e===1/0?!1:k(e)||d(e)||o(e)?!0:a.link.is(e)||!1},a.link=a.rel={_:"#"},function(){a.link.is=function(n){if(j("val.link.is"),n&&n[D]&&!n._&&i(n)){var r={};if(S(n,e,r),r.id)return r.id}return!1};function e(n,r){var l=this;if(l.id)return l.id=!1;if(r==D&&k(n))l.id=n;else return l.id=!1}}(),a.link.ify=function(e){return j("val.link.ify"),v({},D,e)},A.obj.has._=".";var D=a.link._,G,d=A.bi.is,o=A.num.is,k=A.text.is,t=A.obj,i=t.is,v=t.put,S=t.map;A.val=A.val||a;var b={_:"_"};b.soul=function(e,n){return j("node.soul"),e&&e._&&e._[n||u]},b.soul.ify=function(e,n){return j("node.soul.ify"),n=typeof n=="string"?{soul:n}:n||{},e=e||{},e._=e._||{},e._[u]=n.soul||e._[u]||f(),e},b.soul._=a.link._,function(){b.is=function(n,r,l){j("node.is");var m;return i(n)&&(m=b.soul(n))?!S(n,e,{as:l,cb:r,s:m,n}):!1};function e(n,r){if(r!==b._){if(!a.is(n))return!0;this.cb&&this.cb.call(this.as,n,r,this.n,this.s)}}}(),function(){b.ify=function(n,r,l){return j("node.ify"),r?typeof r=="string"?r={soul:r}:typeof r=="function"&&(r={map:r}):r={},r.map&&(r.node=r.map.call(l,n,G,r.node||{})),(r.node=b.soul.ify(r.node||{},r))&&S(n,e,{o:r,as:l}),r.node};function e(n,r){var l=this.o,m,$;if(l.map){m=l.map.call(this.as,n,""+r,l.node),$===m?p(l.node,r):l.node&&(l.node[r]=m);return}a.is(n)&&(l.node[r]=n)}}();var t=A.obj,i=t.is,p=t.del,S=t.map,c=A.text,f=c.random,u=b.soul._,G;A.node=A.node||b;var g=A.state;g.lex=function(){return j("state.lex"),g().toString(36).replace(".","")},g.to=function(e,n,r){j("state.to");var l=(e||{})[n];return i(l)&&(l=B(l)),g.ify(r,n,g.is(e,n),l,b.soul(e))},function(){g.map=function(n,r,l){j("state.map");var m,$=i($=n||r)?$:null;return n=y(n=n||r)?n:null,$&&!n?(r=o(r)?r:g(),$[h]=$[h]||{},S($,e,{o:$,s:r}),$):(l=l||i(r)?r:m,r=o(r)?r:g(),function(w,N,I,C){if(!n)return e.call({o:I,s:r},w,N),w;n.call(l||this||{},w,N,I,C),!(T(I,N)&&m===I[N])&&e.call({o:I,s:r},w,N)})};function e(n,r){h!==r&&g.ify(this.o,r,this.s)}}();var t=A.obj;t.as;var T=t.has,i=t.is,S=t.map,B=t.copy,O=A.num,o=O.is,_=A.fn,y=_.is,h=b._,G,x={};(function(){x.is=function(r,l,m,$){return j("graph.is"),!r||!i(r)||s(r)?!1:!S(r,e,{cb:l,fn:m,as:$})};function e(r,l){if(!r||l!==b.soul(r)||!b.is(r,this.fn,this.as))return!0;!this.cb||(n.n=r,n.as=this.as,this.cb.call(n.as,r,l,n))}function n(r){r&&b.is(n.n,r,n.as)}})(),function(){x.ify=function($,w,N){j("graph.ify");var I={path:[],obj:$};return w?typeof w=="string"?w={soul:w}:typeof w=="function"&&(w.map=w):w={},typeof N=="string"&&(w.soul=w.soul||N,N=G),w.soul&&(I.link=a.link.ify(w.soul)),w.shell=(N||{}).shell,w.graph=w.graph||{},w.seen=w.seen||[],w.as=w.as||N,e(w,I),w.root=I.node,w.graph};function e($,w){var N;return(N=m($,w))?N:(w.env=$,w.soul=r,b.ify(w.obj,n,w)&&(w.link=w.link||a.link.ify(b.soul(w.node)),w.obj!==$.shell&&($.graph[a.link.is(w.link)]=w.node)),w)}function n($,w,N){var I=this,C=I.env,J,W;if(b._===w&&T($,a.link._))return N._;if(!!(J=l($,w,N,I,C))){if(w||(I.node=I.node||N||{},T($,b._)&&b.soul($)&&(I.node._=B($._)),I.node=b.soul.ify(I.node,a.link.is(I.link)),I.link=I.link||a.link.ify(b.soul(I.node))),(W=C.map)&&(W.call(C.as||{},$,w,N,I),T(N,w))){if($=N[w],G===$){p(N,w);return}if(!(J=l($,w,N,I,C)))return}if(!w)return I.node;if(J===!0)return $;if(W=e(C,{obj:$,path:I.path.concat(w)}),!!W.node)return W.link}}function r($){var w=this,N=a.link.is(w.link),I=w.env.graph;w.link=w.link||a.link.ify($),w.link[a.link._]=$,w.node&&w.node[b._]&&(w.node[b._][a.link._]=$),T(I,N)&&(I[$]=I[N],p(I,N))}function l($,w,N,I,C){var J;if(a.is($))return!0;if(i($))return 1;if(J=C.invalid)return $=J.call(C.as||{},$,w,N),l($,w,N,I,C);C.err="Invalid value at '"+I.path.concat(w).join(".")+"'!",A.list.is($)&&(C.err+=" Use `.set(item)` instead of an Array.")}function m($,w){for(var N=$.seen,I=N.length,C;I--;)if(C=N[I],w.obj===C.obj)return C;N.push(w)}}(),x.node=function(e){j("graph.node");var n=b.soul(e);if(!!n)return v({},n,e)},function(){x.to=function(n,r,l){if(j("graph.to"),!!n){var m={};return l=l||{seen:{}},S(n[r],e,{obj:m,graph:n,opt:l}),m}};function e(n,r){var l,m;if(b._===r){if(s(n,a.link._))return;this.obj[r]=B(n);return}if(!(l=a.link.is(n))){this.obj[r]=n;return}if(m=this.opt.seen[l]){this.obj[r]=m;return}this.obj[r]=this.opt.seen[l]=x.to(this.graph,l,this.opt)}}();var y=A.fn.is,t=A.obj,i=t.is,p=t.del,T=t.has,s=t.empty,v=t.put,S=t.map,B=t.copy,G;A.graph=A.graph||x}}()})(et);(function(E){E.exports=et.exports})(nt);const st=ft(nt.exports),ct=st("https://mvp-gun.herokuapp.com/gun"),V=E=>ct.get(`TTT:${E}`),vt=async E=>{const j=V(E);return new Promise(A=>{j.put({field:{...Array.from({length:9},()=>L.None)},turn:L.Circle},()=>{A(j)})})},kt=(E,j)=>{const A=V(E);return A.put({field:{...j.field},turn:j.turn}),A},_t=async E=>{const j=V(E);return new Promise(A=>{j.once(M=>{A(M!==void 0)})})},lt=tt('<div class="absolute inset-0 flex justify-center flex-col items-center bg-artichoke overflow-hidden"></div>'),bt=E=>(()=>{const j=lt.cloneNode(!0);return Z(j,()=>E.children),j})();export{bt as L,yt as M,L as P,_t as a,vt as c,V as g,dt as h,pt as t,kt as u};
