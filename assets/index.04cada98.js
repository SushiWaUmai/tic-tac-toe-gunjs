(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))y(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&y(s)}).observe(document,{childList:!0,subtree:!0});function i(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function y(n){if(n.ep)return;n.ep=!0;const l=i(n);fetch(n.href,l)}})();const Q={},ne=(t,e)=>t===e,re=Symbol("solid-track"),vt={equals:ne};let ie=Kt;const it=1,gt=2,Bt={owned:null,cleanups:null,context:null,owner:null};var U=null;let et=null,q=null,K=null,nt=null,St=0;function yt(t,e){const i=q,y=U,n=t.length===0,l=n?Bt:{owned:null,cleanups:null,context:null,owner:e||y},s=n?t:()=>t(()=>z(()=>At(l)));U=l,q=null;try{return ot(s,!0)}finally{q=i,U=y}}function Y(t,e){e=e?Object.assign({},vt,e):vt;const i={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},y=n=>(typeof n=="function"&&(n=n(i.value)),Jt(i,n));return[qt.bind(i),y]}function ct(t,e,i){const y=Wt(t,e,!1,it);kt(y)}function V(t,e,i){i=i?Object.assign({},vt,i):vt;const y=Wt(t,e,!0,0);return y.observers=null,y.observerSlots=null,y.comparator=i.equals||void 0,kt(y),qt.bind(y)}function z(t){let e,i=q;return q=null,e=t(),q=i,e}function oe(t,e,i){const y=Array.isArray(t);let n,l=i&&i.defer;return s=>{let u;if(y){u=Array(t.length);for(let p=0;p<t.length;p++)u[p]=t[p]()}else u=t();if(l){l=!1;return}const g=z(()=>e(u,n,s));return n=u,g}}function Tt(t){return U===null||(U.cleanups===null?U.cleanups=[t]:U.cleanups.push(t)),t}function ue(){return U}function fe(t,e){const i=U;U=t;try{return ot(e,!0)}finally{U=i}}function se(t){const e=q,i=U;return Promise.resolve().then(()=>{q=e,U=i;let y;return ot(t,!1),q=U=null,y?y.done:void 0})}function Mt(t,e){const i=Symbol("context");return{id:i,Provider:he(i),defaultValue:t}}function Lt(t){let e;return(e=Xt(U,t.id))!==void 0?e:t.defaultValue}function Ut(t){const e=V(t),i=V(()=>jt(e()));return i.toArray=()=>{const y=i();return Array.isArray(y)?y:y!=null?[y]:[]},i}function qt(){const t=et;if(this.sources&&(this.state||t))if(this.state===it||t)kt(this);else{const e=K;K=null,ot(()=>bt(this),!1),K=e}if(q){const e=this.observers?this.observers.length:0;q.sources?(q.sources.push(this),q.sourceSlots.push(e)):(q.sources=[this],q.sourceSlots=[e]),this.observers?(this.observers.push(q),this.observerSlots.push(q.sources.length-1)):(this.observers=[q],this.observerSlots=[q.sources.length-1])}return this.value}function Jt(t,e,i){let y=t.value;return(!t.comparator||!t.comparator(y,e))&&(t.value=e,t.observers&&t.observers.length&&ot(()=>{for(let n=0;n<t.observers.length;n+=1){const l=t.observers[n],s=et&&et.running;s&&et.disposed.has(l),(s&&!l.tState||!s&&!l.state)&&(l.pure?K.push(l):nt.push(l),l.observers&&Vt(l)),s||(l.state=it)}if(K.length>1e6)throw K=[],new Error},!1)),e}function kt(t){if(!t.fn)return;At(t);const e=U,i=q,y=St;q=U=t,ae(t,t.value,y),q=i,U=e}function ae(t,e,i){let y;try{y=t.fn(e)}catch(n){t.pure&&(t.state=it),Ht(n)}(!t.updatedAt||t.updatedAt<=i)&&(t.updatedAt!=null&&"observers"in t?Jt(t,y):t.value=y,t.updatedAt=i)}function Wt(t,e,i,y=it,n){const l={fn:t,state:y,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:U,context:null,pure:i};return U===null||U!==Bt&&(U.owned?U.owned.push(l):U.owned=[l]),l}function Ft(t){const e=et;if(t.state===0||e)return;if(t.state===gt||e)return bt(t);if(t.suspense&&z(t.suspense.inFallback))return t.suspense.effects.push(t);const i=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<St);)(t.state||e)&&i.push(t);for(let y=i.length-1;y>=0;y--)if(t=i[y],t.state===it||e)kt(t);else if(t.state===gt||e){const n=K;K=null,ot(()=>bt(t,i[0]),!1),K=n}}function ot(t,e){if(K)return t();let i=!1;e||(K=[]),nt?i=!0:nt=[],St++;try{const y=t();return le(i),y}catch(y){K||(nt=null),Ht(y)}}function le(t){if(K&&(Kt(K),K=null),t)return;const e=nt;nt=null,e.length&&ot(()=>ie(e),!1)}function Kt(t){for(let e=0;e<t.length;e++)Ft(t[e])}function bt(t,e){const i=et;t.state=0;for(let y=0;y<t.sources.length;y+=1){const n=t.sources[y];n.sources&&(n.state===it||i?n!==e&&Ft(n):(n.state===gt||i)&&bt(n,e))}}function Vt(t){const e=et;for(let i=0;i<t.observers.length;i+=1){const y=t.observers[i];(!y.state||e)&&(y.state=gt,y.pure?K.push(y):nt.push(y),y.observers&&Vt(y))}}function At(t){let e;if(t.sources)for(;t.sources.length;){const i=t.sources.pop(),y=t.sourceSlots.pop(),n=i.observers;if(n&&n.length){const l=n.pop(),s=i.observerSlots.pop();y<n.length&&(l.sourceSlots[s]=y,n[y]=l,i.observerSlots[y]=s)}}if(t.owned){for(e=0;e<t.owned.length;e++)At(t.owned[e]);t.owned=null}if(t.cleanups){for(e=0;e<t.cleanups.length;e++)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function ce(t){return t instanceof Error||typeof t=="string"?t:new Error("Unknown error")}function Ht(t){throw t=ce(t),t}function Xt(t,e){return t?t.context&&t.context[e]!==void 0?t.context[e]:Xt(t.owner,e):void 0}function jt(t){if(typeof t=="function"&&!t.length)return jt(t());if(Array.isArray(t)){const e=[];for(let i=0;i<t.length;i++){const y=jt(t[i]);Array.isArray(y)?e.push.apply(e,y):e.push(y)}return e}return t}function he(t,e){return function(y){let n;return ct(()=>n=z(()=>(U.context={[t]:y.value},Ut(()=>y.children))),void 0),n}}const pe=Symbol("fallback");function Ct(t){for(let e=0;e<t.length;e++)t[e]()}function de(t,e,i={}){let y=[],n=[],l=[],s=0,u=e.length>1?[]:null;return Tt(()=>Ct(l)),()=>{let g=t()||[],p,f;return g[re],z(()=>{let k=g.length,T,c,j,_,O,$,r,h,m;if(k===0)s!==0&&(Ct(l),l=[],y=[],n=[],s=0,u&&(u=[])),i.fallback&&(y=[pe],n[0]=yt(D=>(l[0]=D,i.fallback())),s=1);else if(s===0){for(n=new Array(k),f=0;f<k;f++)y[f]=g[f],n[f]=yt(d);s=k}else{for(j=new Array(k),_=new Array(k),u&&(O=new Array(k)),$=0,r=Math.min(s,k);$<r&&y[$]===g[$];$++);for(r=s-1,h=k-1;r>=$&&h>=$&&y[r]===g[h];r--,h--)j[h]=n[r],_[h]=l[r],u&&(O[h]=u[r]);for(T=new Map,c=new Array(h+1),f=h;f>=$;f--)m=g[f],p=T.get(m),c[f]=p===void 0?-1:p,T.set(m,f);for(p=$;p<=r;p++)m=y[p],f=T.get(m),f!==void 0&&f!==-1?(j[f]=n[p],_[f]=l[p],u&&(O[f]=u[p]),f=c[f],T.set(m,f)):l[p]();for(f=$;f<k;f++)f in j?(n[f]=j[f],l[f]=_[f],u&&(u[f]=O[f],u[f](f))):n[f]=yt(d);n=n.slice(0,s=k),y=g.slice(0)}return n});function d(k){if(l[f]=k,u){const[T,c]=Y(f);return u[f]=c,e(g[f],T)}return e(g[f])}}}function W(t,e){return z(()=>t(e||{}))}function ye(t){const e="fallback"in t&&{fallback:()=>t.fallback};return V(de(()=>t.each,t.children,e||void 0))}function zt(t){let e=!1,i=!1;const y=Ut(()=>t.children),n=V(()=>{let l=y();Array.isArray(l)||(l=[l]);for(let s=0;s<l.length;s++){const u=l[s].when;if(u)return i=!!l[s].keyed,[s,u,l[s]]}return[-1]},void 0,{equals:(l,s)=>l[0]===s[0]&&(e?l[1]===s[1]:!l[1]==!s[1])&&l[2]===s[2]});return V(()=>{const[l,s,u]=n();if(l<0)return t.fallback;const g=u.children,p=typeof g=="function"&&g.length>0;return e=i||p,p?z(()=>g(s)):g})}function lt(t){return t}function ve(t,e,i){let y=i.length,n=e.length,l=y,s=0,u=0,g=e[n-1].nextSibling,p=null;for(;s<n||u<l;){if(e[s]===i[u]){s++,u++;continue}for(;e[n-1]===i[l-1];)n--,l--;if(n===s){const f=l<y?u?i[u-1].nextSibling:i[l-u]:g;for(;u<l;)t.insertBefore(i[u++],f)}else if(l===u)for(;s<n;)(!p||!p.has(e[s]))&&e[s].remove(),s++;else if(e[s]===i[l-1]&&i[u]===e[n-1]){const f=e[--n].nextSibling;t.insertBefore(i[u++],e[s++].nextSibling),t.insertBefore(i[--l],f),e[n]=i[l]}else{if(!p){p=new Map;let d=u;for(;d<l;)p.set(i[d],d++)}const f=p.get(e[s]);if(f!=null)if(u<f&&f<l){let d=s,k=1,T;for(;++d<n&&d<l&&!((T=p.get(e[d]))==null||T!==f+k);)k++;if(k>f-u){const c=e[s];for(;u<f;)t.insertBefore(i[u++],c)}else t.replaceChild(i[u++],e[s++])}else s++;else e[s++].remove()}}}const Et="_$DX_DELEGATE";function ge(t,e,i,y={}){let n;return yt(l=>{n=l,e===document?t():rt(e,t(),e.firstChild?null:void 0,i)},y.owner),()=>{n(),e.textContent=""}}function ut(t,e,i){const y=document.createElement("template");y.innerHTML=t;let n=y.content.firstChild;return i&&(n=n.firstChild),n}function Dt(t,e=window.document){const i=e[Et]||(e[Et]=new Set);for(let y=0,n=t.length;y<n;y++){const l=t[y];i.has(l)||(i.add(l),e.addEventListener(l,be))}}function Gt(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}function Qt(t,e,i,y){if(y)Array.isArray(i)?(t[`$$${e}`]=i[0],t[`$$${e}Data`]=i[1]):t[`$$${e}`]=i;else if(Array.isArray(i)){const n=i[0];t.addEventListener(e,i[0]=l=>n.call(t,i[1],l))}else t.addEventListener(e,i)}function rt(t,e,i,y){if(i!==void 0&&!y&&(y=[]),typeof e!="function")return wt(t,e,y,i);ct(n=>wt(t,e(),n,i),y)}function be(t){const e=`$$${t.type}`;let i=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==i&&Object.defineProperty(t,"target",{configurable:!0,value:i}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return i||document}}),Q.registry&&!Q.done&&(Q.done=!0,document.querySelectorAll("[id^=pl-]").forEach(y=>y.remove()));i!==null;){const y=i[e];if(y&&!i.disabled){const n=i[`${e}Data`];if(n!==void 0?y.call(i,n,t):y.call(i,t),t.cancelBubble)return}i=i.host&&i.host!==i&&i.host instanceof Node?i.host:i.parentNode}}function wt(t,e,i,y,n){for(Q.context&&!i&&(i=[...t.childNodes]);typeof i=="function";)i=i();if(e===i)return i;const l=typeof e,s=y!==void 0;if(t=s&&i[0]&&i[0].parentNode||t,l==="string"||l==="number"){if(Q.context)return i;if(l==="number"&&(e=e.toString()),s){let u=i[0];u&&u.nodeType===3?u.data=e:u=document.createTextNode(e),i=ft(t,i,y,u)}else i!==""&&typeof i=="string"?i=t.firstChild.data=e:i=t.textContent=e}else if(e==null||l==="boolean"){if(Q.context)return i;i=ft(t,i,y)}else{if(l==="function")return ct(()=>{let u=e();for(;typeof u=="function";)u=u();i=wt(t,u,i,y)}),()=>i;if(Array.isArray(e)){const u=[],g=i&&Array.isArray(i);if(xt(u,e,i,n))return ct(()=>i=wt(t,u,i,y,!0)),()=>i;if(Q.context){if(!u.length)return i;for(let p=0;p<u.length;p++)if(u[p].parentNode)return i=u}if(u.length===0){if(i=ft(t,i,y),s)return i}else g?i.length===0?It(t,u,y):ve(t,i,u):(i&&ft(t),It(t,u));i=u}else if(e instanceof Node){if(Q.context&&e.parentNode)return i=s?[e]:e;if(Array.isArray(i)){if(s)return i=ft(t,i,y,e);ft(t,i,null,e)}else i==null||i===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);i=e}}return i}function xt(t,e,i,y){let n=!1;for(let l=0,s=e.length;l<s;l++){let u=e[l],g=i&&i[l];if(u instanceof Node)t.push(u);else if(!(u==null||u===!0||u===!1))if(Array.isArray(u))n=xt(t,u,g)||n;else if(typeof u=="function")if(y){for(;typeof u=="function";)u=u();n=xt(t,Array.isArray(u)?u:[u],Array.isArray(g)?g:[g])||n}else t.push(u),n=!0;else{const p=String(u);g&&g.nodeType===3&&g.data===p?t.push(g):t.push(document.createTextNode(p))}}return n}function It(t,e,i=null){for(let y=0,n=e.length;y<n;y++)t.insertBefore(e[y],i)}function ft(t,e,i,y){if(i===void 0)return t.textContent="";const n=y||document.createTextNode("");if(e.length){let l=!1;for(let s=e.length-1;s>=0;s--){const u=e[s];if(n!==u){const g=u.parentNode===t;!l&&!s?g?t.replaceChild(n,u):t.insertBefore(n,i):g&&u.remove()}else l=!0}}else t.insertBefore(n,i);return[n]}var F=(t=>(t[t.None=0]="None",t[t.Cross=1]="Cross",t[t.Circle=2]="Circle",t[t.Draw=3]="Draw",t))(F||{});const we=t=>{switch(t){case 2:return 1;case 1:return 2}return 0},ke=t=>{const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[6,4,2]];for(let y of e){const[n,l,s]=y;if(t[n]!==0&&t[n]===t[l]&&t[n]==t[s])return t[n]}let i=!0;for(let y of t)y===0&&(i=!1);return i?3:0},_e="/tic-tac-toe-gunjs/assets/circle.2c56a12d.svg",me="/tic-tac-toe-gunjs/assets/cross.f03db0bd.svg",$e=ut('<img alt="cross">'),je=ut('<img alt="circle">'),xe=ut('<div class="rounded bg-lavender border-green border-8 field m-2 flex justify-center items-center"></div>'),Se=t=>(()=>{const e=xe.cloneNode(!0);return Qt(e,"click",t.onClick,!0),rt(e,W(zt,{get fallback(){return[]},get children(){return[W(lt,{get when(){return t.state===F.Cross},get children(){const i=$e.cloneNode(!0);return Gt(i,"src",me),i}}),W(lt,{get when(){return t.state===F.Circle},get children(){const i=je.cloneNode(!0);return Gt(i,"src",_e),i}})]}})),e})();Dt(["click"]);const Te=ut('<div class="absolute inset-0 flex justify-center items-center"><div class="rounded bg-gray-100 px-8 py-5"></div></div>'),Ae=t=>(()=>{const e=Te.cloneNode(!0),i=e.firstChild;return rt(i,()=>t.children),e})(),De=ut('<div class="flex flex-col"><h3 class="m-3 text-4xl text-center"></h3><span class="py-2 px-3 rounded bg-gray-300 m-auto cursor-pointer">Restart Game</span></div>'),_t=t=>W(Ae,{get children(){const e=De.cloneNode(!0),i=e.firstChild,y=i.nextSibling;return rt(i,()=>t.result),Qt(y,"click",t.restartGame,!0),e}});Dt(["click"]);function Oe(t,e,i){return t.addEventListener(e,i),()=>t.removeEventListener(e,i)}function Ne([t,e],i,y){return[i?()=>i(t()):t,y?n=>e(y(n)):e]}function Ce(t){try{return document.querySelector(t)}catch{return null}}function Ee(t,e){const i=Ce(`#${t}`);i?i.scrollIntoView():e&&window.scrollTo(0,0)}function Ge(t,e,i,y){let n=!1;const l=u=>typeof u=="string"?{value:u}:u,s=Ne(Y(l(t()),{equals:(u,g)=>u.value===g.value}),void 0,u=>(!n&&e(u),u));return i&&Tt(i((u=t())=>{n=!0,s[1](l(u)),n=!1})),{signal:s,utils:y}}function Ie(t){if(t){if(Array.isArray(t))return{signal:t}}else return{signal:Y({value:""})};return t}function Re(){return Ge(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:t,replace:e,scroll:i,state:y})=>{e?window.history.replaceState(y,"",t):window.history.pushState(y,"",t),Ee(window.location.hash.slice(1),i)},t=>Oe(window,"popstate",()=>t()),{go:t=>window.history.go(t)})}const Pe=/^(?:[a-z0-9]+:)?\/\//i,Be=/^\/+|\/+$/g;function mt(t,e=!1){const i=t.replace(Be,"");return i?e||/^[?#]/.test(i)?i:"/"+i:""}function $t(t,e,i){if(Pe.test(e))return;const y=mt(t),n=i&&mt(i);let l="";return!n||e.startsWith("/")?l=y:n.toLowerCase().indexOf(y.toLowerCase())!==0?l=y+n:l=n,(l||"/")+mt(e,!l)}function Me(t,e){if(t==null)throw new Error(e);return t}function Le(t){const e={};return t.searchParams.forEach((i,y)=>{e[y]=i}),e}function st(t,e){return decodeURIComponent(e?t.replace(/\+/g," "):t)}function Ue(t){const e=new Map,i=ue();return new Proxy({},{get(y,n){return e.has(n)||fe(i,()=>e.set(n,V(()=>t()[n]))),e.get(n)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}const qe=100,Yt=Mt(),Je=Mt(),Zt=()=>Me(Lt(Yt),"Make sure your app is wrapped in a <Router />");let Rt;const We=()=>Zt().navigatorFactory(),Fe=()=>Zt().location;function Ke(t,e){const i=new URL("http://sar"),y=V(g=>{const p=t();try{return new URL(p,i)}catch{return console.error(`Invalid path ${p}`),g}},i,{equals:(g,p)=>g.href===p.href}),n=V(()=>st(y().pathname)),l=V(()=>st(y().search,!0)),s=V(()=>st(y().hash)),u=V(()=>"");return{get pathname(){return n()},get search(){return l()},get hash(){return s()},get state(){return e()},get key(){return u()},query:Ue(oe(l,()=>Le(y())))}}function Ve(t,e="",i,y){const{signal:[n,l],utils:s={}}=Ie(t),u=s.parsePath||(S=>S),g=s.renderPath||(S=>S),p=$t("",e),f=void 0;if(p===void 0)throw new Error(`${p} is not a valid base path`);p&&!n().value&&l({value:p,replace:!0,scroll:!1});const[d,k]=Y(!1),T=async S=>{k(!0);try{await se(S)}finally{k(!1)}},[c,j]=Y(n().value),[_,O]=Y(n().state),$=Ke(c,_),r=[],h={pattern:p,params:{},path:()=>p,outlet:()=>null,resolvePath(S){return $t(p,S)}};if(i)try{Rt=h,h.data=i({data:void 0,params:{},location:$,navigate:D(h)})}finally{Rt=void 0}function m(S,C,E){z(()=>{if(typeof C=="number"){C&&(s.go?s.go(C):console.warn("Router integration does not support relative routing"));return}const{replace:a,resolve:o,scroll:v,state:b}={replace:!1,resolve:!0,scroll:!0,...E},I=o?S.resolvePath(C):$t("",C);if(I===void 0)throw new Error(`Path '${C}' is not a routable path`);if(r.length>=qe)throw new Error("Too many redirects");const N=c();if(I!==N||b!==_()){const x=r.push({value:N,replace:a,scroll:v,state:_()});T(()=>{j(I),O(b)}).then(()=>{r.length===x&&w({value:I,state:b})})}})}function D(S){return S=S||Lt(Je)||h,(C,E)=>m(S,C,E)}function w(S){const C=r[0];C&&((S.value!==C.value||S.state!==C.state)&&l({...S,replace:C.replace,scroll:C.scroll}),r.length=0)}ct(()=>{const{value:S,state:C}=n();z(()=>{S!==c()&&T(()=>{j(S),O(C)})})});{let S=function(C){if(C.defaultPrevented||C.button!==0||C.metaKey||C.altKey||C.ctrlKey||C.shiftKey)return;const E=C.composedPath().find(x=>x instanceof Node&&x.nodeName.toUpperCase()==="A");if(!E||!E.hasAttribute("link"))return;const a=E.href;if(E.target||!a&&!E.hasAttribute("state"))return;const o=(E.getAttribute("rel")||"").split(/\s+/);if(E.hasAttribute("download")||o&&o.includes("external"))return;const v=new URL(a),b=st(v.pathname);if(v.origin!==window.location.origin||p&&b&&!b.toLowerCase().startsWith(p.toLowerCase()))return;const I=u(b+st(v.search,!0)+st(v.hash)),N=E.getAttribute("state");C.preventDefault(),m(h,I,{resolve:!1,replace:E.hasAttribute("replace"),scroll:!E.hasAttribute("noscroll"),state:N&&JSON.parse(N)})};var A=S;Dt(["click"]),document.addEventListener("click",S),Tt(()=>document.removeEventListener("click",S))}return{base:h,out:f,location:$,isRouting:d,renderPath:g,parsePath:u,navigatorFactory:D}}const He=t=>{const{source:e,url:i,base:y,data:n,out:l}=t,s=e||Re(),u=Ve(s,y,n);return W(Yt.Provider,{value:u,get children(){return t.children}})};let dt;const Xe=new Uint8Array(16);function ze(){if(!dt&&(dt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!dt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dt(Xe)}const J=[];for(let t=0;t<256;++t)J.push((t+256).toString(16).slice(1));function Qe(t,e=0){return(J[t[e+0]]+J[t[e+1]]+J[t[e+2]]+J[t[e+3]]+"-"+J[t[e+4]]+J[t[e+5]]+"-"+J[t[e+6]]+J[t[e+7]]+"-"+J[t[e+8]]+J[t[e+9]]+"-"+J[t[e+10]]+J[t[e+11]]+J[t[e+12]]+J[t[e+13]]+J[t[e+14]]+J[t[e+15]]).toLowerCase()}const Ye=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Pt={randomUUID:Ye};function Ze(t,e,i){if(Pt.randomUUID&&!e&&!t)return Pt.randomUUID();t=t||{};const y=t.random||(t.rng||ze)();if(y[6]=y[6]&15|64,y[8]=y[8]&63|128,e){i=i||0;for(let n=0;n<16;++n)e[i+n]=y[n];return e}return Qe(y)}function tn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var te={exports:{}};function en(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ee={exports:{}};(function(t){(function(){function e(y,n){return n?en(y):y.slice?e[l(y)]:function(s,u){y(s={exports:{}}),e[l(u)]=s.exports};function l(s){return s.split("/").slice(-1).toString().replace(".js","")}}var i=t;e(function(y){String.random=function(l,s){var u="";for(l=l||24,s=s||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";l-- >0;)u+=s.charAt(Math.floor(Math.random()*s.length));return u},String.match=function(l,s){var u,g;return typeof l!="string"?!1:(typeof s=="string"&&(s={"=":s}),s=s||{},u=s["="]||s["*"]||s[">"]||s["<"],l===u?!0:g!==s["="]?!1:(u=s["*"]||s[">"],l.slice(0,(u||"").length)===u?!0:g!==s["*"]?!1:g!==s[">"]&&g!==s["<"]?l>=s[">"]&&l<=s["<"]:g!==s[">"]&&l>=s[">"]||g!==s["<"]&&l<=s["<"]))},String.hash=function(l,s){if(typeof l=="string"){if(s=s||0,!l.length)return s;for(var u=0,g=l.length,p;u<g;++u)p=l.charCodeAt(u),s=(s<<5)-s+p,s|=0;return s}};var n=Object.prototype.hasOwnProperty;Object.plain=function(l){return l?l instanceof Object&&l.constructor===Object||Object.prototype.toString.call(l).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(l,s){for(var u in l)if(n.call(l,u)&&(!s||s.indexOf(u)==-1))return!1;return!0},Object.keys=Object.keys||function(l){var s=[];for(var u in l)n.call(l,u)&&s.push(u);return s},function(){var l,s=setTimeout,u=0,g=0,p=typeof setImmediate!=""+l&&setImmediate||function(d,k){return typeof MessageChannel==""+l?s:((d=new MessageChannel).port1.onmessage=function(T){T.data==""&&k()},function(T){k=T,d.port2.postMessage("")})}(),f=s.check=s.check||typeof performance!=""+l&&performance||{now:function(){return+new Date}};s.hold=s.hold||9,s.poll=s.poll||function(d){if(s.hold>=f.now()-u&&g++<3333){d();return}p(function(){u=f.now(),d()},g=0)}}(),function(){var l=setTimeout,s=l.turn=l.turn||function(k){u.push(k)==1&&g(d)},u=s.s=[],g=l.poll,p=0,f,d=function(){(f=u[p++])&&f(),(p==u.length||p==99)&&(u=s.s=u.slice(p),p=0),u.length&&g(d)}}(),function(){var l,s=setTimeout,u=s.turn;(s.each=s.each||function(g,p,f,d){d=d||9,function k(T,c,j){if(c=(T=(g||[]).splice(0,d)).length){for(var _=0;_<c&&l===(j=p(T[_]));_++);if(l===j){u(k);return}}f&&f(j)}()})()}()})(e,"./shim"),e(function(y){y.exports=function n(f,s,u){if(!f)return{to:n};var g,p=typeof s=="function",f=(this.tag||(this.tag={}))[f]||p&&(this.tag[f]={tag:f,to:n._={next:function(k){var T;(T=this.to)&&T.next(k)}}});if(p){var d={off:n.off||(n.off=function(){if(this.next===n._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=n._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:n._,next:s,the:f,on:this,as:u};return(d.back=f.last||f).to=d,f.last=d}return(f=f.to)&&g!==s&&f.next(s),f}})(e,"./onto"),e(function(y){y.exports=function(n){return n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"&&n!=1/0&&n!=-1/0&&n===n||!!n&&typeof n["#"]=="string"&&Object.keys(n).length===1&&n["#"]}})(e,"./valid"),e(function(y){e("./shim");function n(){var f=+new Date;return g<f?(s=0,g=f+n.drift):g=f+(s+=1)/u+n.drift}n.drift=0;var l=-1/0,s=0,u=999,g=l,p;n.is=function(f,d,k){var T=d&&f&&f._&&f._[">"]||k;if(!!T)return typeof(T=T[d])=="number"?T:l},n.ify=function(f,d,k,T,c){(f=f||{})._=f._||{},c&&(f._["#"]=c);var j=f._[">"]||(f._[">"]={});return p!==d&&d!=="_"&&(typeof k=="number"&&(j[d]=k),p!==T&&(f[d]=T)),f},y.exports=n})(e,"./state"),e(function(y){e("./shim");function n(l){var s={s:{}},u=s.s;l=l||{max:999,age:1e3*9},s.check=function(p){return u[p]?g(p):!1};var g=s.track=function(p){var f=u[p]||(u[p]={});return f.was=s.now=+new Date,s.to||(s.to=setTimeout(s.drop,l.age+9)),f};return s.drop=function(p){s.to=null,s.now=+new Date;var f=Object.keys(u);console.STAT&&console.STAT(s.now,+new Date-s.now,"dup drop keys"),setTimeout.each(f,function(d){var k=u[d];k&&(p||l.age)>s.now-k.was||delete u[d]},0,99)},s}y.exports=n})(e,"./dup"),e(function(y){e("./onto"),y.exports=function(s,u){if(!!this.on){var g=(this.opt||{}).lack||9e3;if(typeof s!="function"){if(!s)return;var f=s["#"]||s,p=(this.tag||"")[f];return p?(u&&(p=this.on(f,u),clearTimeout(p.err),p.err=setTimeout(function(){p.off()},g)),!0):void 0}var f=u&&u["#"]||n(9);if(!s)return f;var d=this.on(f,s,u);return d.err=d.err||setTimeout(function(){d.off(),d.next({err:"Error: No ACK yet.",lack:!0})},g),f}};var n=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(y){function n(c){return c instanceof n?(this._={$:this}).$:this instanceof n?n.create(this._={$:this,opt:c}):new n(c)}n.is=function(c){return c instanceof n||c&&c._&&c===c._.$||!1},n.version=.202,n.chain=n.prototype,n.chain.toJSON=function(){},e("./shim"),n.valid=e("./valid"),n.state=e("./state"),n.on=e("./onto"),n.dup=e("./dup"),n.ask=e("./ask"),function(){n.create=function(o){o.root=o.root||o,o.graph=o.graph||{},o.on=o.on||n.on,o.ask=o.ask||n.ask,o.dup=o.dup||n.dup();var v=o.$.opt(o.opt);return o.once||(o.on("in",c,o),o.on("out",c,o),o.on("put",O,o),n.on("create",o),o.on("create",o)),o.once=1,v};function c(o){if(!!o){if(o.out===c){this.to.next(o);return}var v=this,b=v.as,I=b.at||b,N=I.$,x=I.dup,G,R=o.DBG;if((G=o["#"])||(G=o["#"]=s(9)),!x.check(G)){if(x.track(G),G=o._,o._=typeof G=="function"?G:function(){},o.$&&o.$===(o.$._||"").$||(o.$=N),o["@"]&&!o.put&&r(o),!I.ask(o["@"],o))if(R&&(R.u=+new Date),o.put){j(o);return}else o.get&&n.on.get(o,N);R&&(R.uc=+new Date),v.to.next(o),R&&(R.ua=+new Date),!(o.nts||o.NTS)&&(o.out=c,I.on("out",o),R&&(R.ue=+new Date))}}}function j(o){if(!!o){var v=o._||"",b=v.root=((v.$=o.$||"")._||"").root;if(o["@"]&&v.faith&&!v.miss){o.out=c,b.on("out",o);return}v.latch=b.hatch,v.match=b.hatch=[];var I=o.put,N=v.DBG=o.DBG,x=+new Date;if(E=E||x,!(I["#"]&&I["."])){N&&(N.p=x),v["#"]=o["#"],v.msg=o,v.all=0,v.stun=1;var G=Object.keys(I);console.STAT&&console.STAT(x,((N||v).pk=+new Date)-x,"put sort");var R=0,P,B,M,L,X,H,at;(function Z(ht){if(P!=R){if(P=R,!(M=G[R])){console.STAT&&console.STAT(x,((N||v).pd=+new Date)-x,"put"),$(v);return}(L=I[M])?(at=L._)?M!==at["#"]?H=m+D(M)+"soul not same.":(X=at[">"])||(H=m+D(M)+"no state."):H=m+D(M)+"no meta.":H=m+D(M)+"no node.",B=Object.keys(L||{})}if(H){o.err=v.err=H,$(v);return}var Ot=0,tt;for(ht=ht||0;ht++<9&&(tt=B[Ot++]);)if(tt!=="_"){var pt=L[tt],Nt=X[tt];if(d===Nt){H=m+D(tt)+"on"+D(M)+"no state.";break}if(!g(pt)){H=m+D(tt)+"on"+D(M)+"bad "+typeof pt+D(pt);break}_(pt,tt,M,Nt,o),++C}if((B=B.slice(Ot)).length){u(Z);return}++R,B=null,Z(ht)})()}}}n.on.put=j;function _(o,v,b,I,N){var x=N._||"",G=x.root,R=G.graph,P,B=R[b]||k,M=p(B,v,1),L=B[v],X=x.DBG;(P=console.STAT)&&(!R[b]||!L)&&(P.has=(P.has||0)+1);var H=S();if(I>H){setTimeout(function(){_(o,v,b,I,N)},(P=I-H)>A?A:P),console.STAT&&console.STAT((X||x).Hf=+new Date,P,"future");return}if(!(I<M)&&!(!x.faith&&I===M&&(o===L||w(o)<=w(L))&&!x.miss)){x.stun++;var at=N["#"]+x.all++,Z={toString:function(){return at},_:x};Z.toJSON=Z.toString,G.dup.track(Z)["#"]=N["#"],X&&(X.ph=X.ph||+new Date),G.on("put",{"#":Z,"@":N["@"],put:{"#":b,".":v,":":o,">":I},ok:N.ok,_:x})}}function O(o){var v;(v=(o._||"").DBG)&&(v.pa=+new Date,v.pm=v.pm||+new Date);var b=this,I=b.as,N=I.graph,x=o._,G=o.put,R=G["#"],P=G["."],B=G[":"],M=G[">"];o["#"];var L;(L=x.msg)&&(L=L.put)&&(L=L[R])&&f(L,P,M,B,R),N[R]=f(N[R],P,M,B,R),(L=(I.next||"")[R])&&L.on("in",o),$(x),b.to.next(o)}function $(o,v){var b;if(!o.stop&&!(!o.err&&0<--o.stun)&&(o.stop=1,!!(b=o.root))){var I=o.match;I.end=1,I===b.hatch&&(!(I=o.latch)||I.end?delete b.hatch:b.hatch=I),o.hatch&&o.hatch(),setTimeout.each(o.match,function(N){N&&N()}),!(!(v=o.msg)||o.err||v.err)&&(v.out=c,o.root.on("out",v),a())}}function r(o){var v=o["@"]||"",b;if(!(b=v._)){var I=(I=o.$)&&(I=I._)&&(I=I.root)&&(I=I.dup);if(!(I=I.check(v)))return;o["@"]=I["#"]||o["@"];return}b.acks=(b.acks||0)+1,(b.err=o.err)&&(o["@"]=b["#"],$(b)),b.ok=o.ok||b.ok,!b.stop&&!b.crack&&(b.crack=b.match&&b.match.push(function(){h(b)})),h(b)}function h(o){!o||!o.root||o.stun||o.acks!==o.all||o.root.on("in",{"@":o["#"],err:o.err,ok:o.err?d:o.ok||{"":1}})}var m="Error: Invalid graph!",D=function(o){return" '"+(""+o).slice(0,9)+"...' "},w=JSON.stringify,A=2147483647,S=n.state,C=0,E,a=function(){C>999&&C/-(E-(E=+new Date))>1&&(n.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),a=function(){C=0})}}(),function(){n.on.get=function(j,_){var O=_._,$=j.get,r=$["#"],h=O.graph[r],m=$["."],D=O.next||(O.next={});D[r];var w=j._||{},A=w.DBG=j.DBG;if(A&&(A.g=+new Date),!h)return O.on("get",j);if(m){if(typeof m!="string"||d===h[m])return O.on("get",j);h=f({},m,p(h,m),h[m],r)}h&&c(j,h),O.on("get",j)};function c(j,_){var O=+new Date,$=j._||{},r=$.DBG=j.DBG,h=j["#"],m=s(9),D=Object.keys(_||"").sort(),w=((_||"")._||"")["#"];D.length;var A=j.$._.root,S=_===A.graph[w];console.STAT&&console.STAT(O,((r||$).gk=+new Date)-O,"got keys"),_&&function C(){O=+new Date;for(var E=0,a,o={},v;E<9&&(a=D[E++]);)f(o,a,p(_,a),_[a],w);D=D.slice(E),(v={})[w]=o,o=v;var b;S&&(b=function(){},b.ram=b.faith=!0),v=D.length,console.STAT&&console.STAT(O,-(O-(O=+new Date)),"got copied some"),r&&(r.ga=+new Date),A.on("in",{"@":h,"#":m,put:o,"%":v?m=s(9):d,$:A.$,_:b,DBG:r}),console.STAT&&console.STAT(O,+new Date-O,"got in"),v&&setTimeout.turn(C)}(),_||A.on("in",{"@":j["#"]})}n.on.get.ack=c}(),function(){n.chain.opt=function(c){c=c||{};var j=this,_=j._,O=c.peers||c;return Object.plain(c)||(c={}),Object.plain(_.opt)||(_.opt=c),typeof O=="string"&&(O=[O]),Object.plain(_.opt.peers)||(_.opt.peers={}),O instanceof Array&&(c.peers={},O.forEach(function($){var r={};r.id=r.url=$,c.peers[$]=_.opt.peers[$]=_.opt.peers[$]||r})),l(c,function $(r){var h=this[r];if(this&&this.hasOwnProperty(r)||typeof h=="string"||Object.empty(h)){this[r]=h;return}h&&h.constructor!==Object&&!(h instanceof Array)||l(h,$)}),_.opt.from=c,n.on("opt",_),_.opt.uuid=_.opt.uuid||function(r){return n.state().toString(36).replace(".","")+String.random(r||12)},j}}();var l=function(c,j){Object.keys(c).forEach(j,c)},s=String.random,u=setTimeout.turn,g=n.valid,p=n.state.is,f=n.state.ify,d,k={},T;n.log=function(){return!n.log.off&&T.log.apply(T,arguments),[].slice.call(arguments).join(" ")},n.log.once=function(c,j,_){return(_=n.log.once)[c]=_[c]||0,_[c]++||n.log(j)},typeof window<"u"&&((window.GUN=window.Gun=n).window=window);try{typeof i<"u"&&(i.exports=n)}catch{}y.exports=n,(n.window||{}).console=(n.window||{}).console||{log:function(){}},(T=console).only=function(c,j){return T.only.i&&c===T.only.i&&T.only.i++&&(T.log.apply(T,arguments)||j)},n.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(y){var n=e("./root");n.chain.back=function(u,g){var p;if(u=u||1,u===-1||u===1/0)return this._.root.$;if(u===1)return(this._.back||this._).$;var f=this,d=f._;if(typeof u=="string"&&(u=u.split(".")),u instanceof Array){var k=0,T=u.length,p=d;for(k;k<T;k++)p=(p||l)[u[k]];return s!==p?g?f:p:(p=d.back)?p.$.back(u,g):void 0}if(typeof u=="function"){for(var c,p={back:d};(p=p.back)&&s===(c=u(p,g)););return c}return typeof u=="number"?(d.back||d).$.back(u-1):this};var l={},s})(e,"./back"),e(function(y){var n=e("./root");n.chain.chain=function($){var r=this,h=r._,m=new($||r).constructor(r),D=m._,w;return D.root=w=h.root,D.id=++w.once,D.back=r._,D.on=n.on,D.on("in",n.on.in,D),D.on("out",n.on.out,D),m};function l($){var r,h=this.as,m=h.back,D=h.root,w;if($.$||($.$=h.$),this.to.next($),h.err){h.on("in",{put:h.put=d,$:h.$});return}if(r=$.get){if(D.pass&&(D.pass[h.id]=h),h.lex&&Object.keys(h.lex).forEach(function(A){w[A]=h.lex[A]},w=$.get=$.get||{}),r["#"]||h.soul){if(r["#"]=r["#"]||h.soul,$["#"]||($["#"]=k(9)),m=D.$.get(r["#"])._,r=r["."]){if(c(m.put,r)&&(w=m.ask&&m.ask[r],(m.ask||(m.ask={}))[r]=m.$.get(r)._,m.on("in",{get:r,put:{"#":m.soul,".":r,":":m.put[r],">":_(D.graph[m.soul],r)}}),w))return}else{if(w=m.ask&&m.ask[""],(m.ask||(m.ask={}))[""]=m,d!==m.put&&(m.on("in",m),w))return;$.$=m.$}return D.ask(p,$),D.on("in",$)}if(r["."])return h.get?($={get:{".":h.get},$:h.$},(m.ask||(m.ask={}))[h.get]=$.$._,m.on("out",$)):($={get:h.lex?$.get:{},$:h.$},m.on("out",$));if((h.ask||(h.ask={}))[""]=h,h.get)return r["."]=h.get,(m.ask||(m.ask={}))[h.get]=$.$._,m.on("out",$)}return m.on("out",$)}n.on.out=l;function s($,r){r=r||this.as;var h=r.root,m=$.$||($.$=r.$),D=(m||"")._||f,w=$.put||"",A=w["#"],S=w["."],C=d!==w["="]?w["="]:w[":"],E=w[">"]||-1/0,a;if(d!==$.put&&(d===w["#"]||d===w["."]||d===w[":"]&&d===w["="]||d===w[">"])){if(!T(w)){if(!(A=((w||"")._||"")["#"])){console.log("chain not yet supported for",w,"...",$,r);return}return m=r.root.$.get(A),setTimeout.each(Object.keys(w).sort(),function(o){o=="_"||d===(E=_(w,o))||r.on("in",{$:m,put:{"#":A,".":o,"=":w[o],">":E},VIA:$})})}r.on("in",{$:D.back.$,put:{"#":A=D.back.soul,".":S=D.has||D.get,"=":w,">":_(D.back.put,S)},via:$});return}($.seen||"")[r.id]||(($.seen||($.seen=function(){}))[r.id]=r,r!==D&&(Object.keys($).forEach(function(o){w[o]=$[o]},w={}),w.get=r.get||w.get,!r.soul&&!r.has?w.$$$=w.$$$||r.$:D.soul&&(w.$=r.$,w.$$=w.$$||D.$),$=w),g($,r),(r.soul||$.$$)&&E>=_(h.graph[A],S)&&((w=h.$.get(A)._).put=O(w.put,S,E,C,A)),!D.soul&&E>=_(h.graph[A],S)&&(a=(h.$.get(A)._.next||"")[S])&&(a.put=C,typeof(w=T(C))=="string"&&(a.put=h.$.get(w)._.put||C)),this.to&&this.to.next($),r.any&&setTimeout.each(Object.keys(r.any),function(o){(o=r.any[o])&&o($)},0,99),r.echo&&setTimeout.each(Object.keys(r.echo),function(o){(o=r.echo[o])&&o.on("in",$)},0,99),(($.$$||"")._||D).soul&&(a=r.next)&&(a=a[S])&&(w={},Object.keys($).forEach(function(o){w[o]=$[o]}),w.$=($.$$||$.$).get(w.get=S),delete w.$$,delete w.$$$,a.on("in",w)),u($,r))}n.on.in=s;function u($,r){if(r=r||this.as||$.$._,!($.$$&&this!==n.on)&&!(!$.put||r.soul)){var h=$.put||"",m=h["="]||h[":"],S,D=r.root,w=D.$.get(h["#"]).get(h["."])._;if(typeof(m=T(m))!="string"){this===n.on&&((w.echo||(w.echo={}))[r.id]=r);return}if(!((w.echo||(w.echo={}))[r.id]&&!(D.pass||"")[r.id])){if(S=D.pass){if(S[m+r.id])return;S[m+r.id]=1}(w.echo||(w.echo={}))[r.id]=r,r.has&&(r.link=m);var A=D.$.get(w.link=m)._;(A.echo||(A.echo={}))[w.id]=w;var S=r.ask||"";(S[""]||r.lex)&&A.on("out",{get:{"#":m}}),setTimeout.each(Object.keys(S),function(C,E){!C||!(E=S[C])||E.on("out",{get:{"#":m,".":C}})},0,99)}}}n.on.link=u;function g($,r){var h=$.put||"",m=d!==h["="]?h["="]:h[":"],D=r.root,w,A;if(d===m){if(r.soul&&d!==r.put||(A=($.$$||$.$||"")._||"",$["@"]&&(d!==A.put||d!==r.put)))return;(w=r.link||$.linked)&&delete(D.$.get(w)._.echo||"")[r.id],r.has&&(r.link=null),r.put=d,setTimeout.each(Object.keys(r.next||""),function(S,C){!(C=r.next[S])||(w&&delete(D.$.get(w).get(S)._.echo||"")[C.id],C.on("in",{get:S,put:d,$:C.$}))},0,99);return}r.soul||$.$$||(w=T(m),A=$.$._||"",!((w===A.link||r.has&&!A.link)&&!((D.pass||"")[r.id]&&typeof w!="string"))&&(delete(A.echo||"")[r.id],g({get:r.get,put:d,$:$.$,linked:$.linked=$.linked||A.link},r)))}n.on.unlink=g;function p($,r){var h=this.as,m=h.$._;m.root;var D=h.get||"",w=($.put||"")[D["#"]]||"";if(!$.put||typeof D["."]=="string"&&d===w[D["."]]){if(d!==m.put||!m.soul&&!m.has)return;m.ack=(m.ack||0)+1,m.on("in",{get:m.get,put:m.put=d,$:m.$,"@":$["@"]});return}($._||{}).miss=1,n.on.put($)}var f={},d,k=String.random,T=n.valid,c=function($,r){return $&&Object.prototype.hasOwnProperty.call($,r)},j=n.state,_=j.is,O=j.ify})(e,"./chain"),e(function(y){var n=e("./root");n.chain.get=function(d,k,T){var c,j;if(typeof d=="string"){if(d.length==0)return(c=this.chain())._.err={err:n.log("0 length key!",d)},k&&k.call(c,c._.err),c;var _=this,O=_._,$=O.next||g;(c=$[d])||(c=d&&l(d,_)),c=c&&c.$}else if(typeof d=="function"){let S=function(C,E,a){if(!S.stun&&!((x=h.pass)&&!x[m])){var o=C.$._,v=(C.$$||"")._,b=(v||o).put,I=!o.has&&!o.soul,N={},x;if((I||f===b)&&(b=f===((x=C.put)||"")["="]?f===(x||"")[":"]?x:x[":"]:x["="]),typeof(x=n.valid(b))=="string"&&(b=f===(x=h.$.get(x)._.put)?r.not?f:b:x),!(r.not&&f===b)){if(f===r.stun){if((x=h.stun)&&x.on&&(O.$.back(function(G){if(x.on(""+G.id,N={}),(N.run||0)<S.id)return N}),!N.run&&x.on(""+o.id,N={}),!N.run&&v&&x.on(""+v.id,N={}),S.id>N.run&&((!N.stun||N.stun.end)&&(N.stun=x.on("stun"),N.stun=N.stun&&N.stun.last),N.stun&&!N.stun.end))){(N.stun.add||(N.stun.add={}))[m]=function(){S(C,E,1)};return}if(f===b&&(a=0),(x=h.hatch)&&!x.end&&f===r.hatch&&!a){if(D[o.$._.id])return;D[o.$._.id]=1,x.push(function(){S(C,E,1)});return}D={}}if(h.pass){if(h.pass[m+o.id])return;h.pass[m+o.id]=1}if(r.on){r.ok.call(o.$,b,o.get,C,E||S);return}if(r.v2020){r.ok(C,E||S);return}Object.keys(C).forEach(function(G){x[G]=C[G]},x={}),C=x,C.put=b,r.ok.call(r.as,C,E||S)}}};var w=S;if(k===!0)return s(this,d,k,T),this;c=this;var O=c._,r=k||{},h=O.root,m;r.at=O,r.ok=d;var D={};return S.at=O,(O.any||(O.any={}))[m=String.random(7)]=S,S.off=function(){S.stun=1,O.any&&delete O.any[m]},S.rid=u,S.id=r.run||++h.once,j=h.pass,(h.pass={})[m]=1,r.out=r.out||{get:{}},O.on("out",r.out),h.pass=j,c}else{if(typeof d=="number")return this.get(""+d,k,T);if(typeof(j=p(d))=="string")return this.get(j,k,T);(j=this.get.next)&&(c=j(this,d))}return c?(k&&typeof k=="function"&&c.get(k,T),c):((c=this.chain())._.err={err:n.log("Invalid get request!",d)},k&&k.call(c,c._.err),c)};function l(d,k){var T=k._,c=T.next,j=k.chain(),_=j._;return c||(c=T.next={}),c[_.get=d]=_,k===T.root.$?_.soul=d:(T.soul||T.has)&&(_.has=d),_}function s(d,k,T,c){var j=d._,_=0,O;return(O=j.soul||j.link)?k(O,c,j):j.jam?j.jam.push([k,c]):(j.jam=[[k,c]],d.get(function(r,h){if(!(f===r.put&&!j.root.opt.super&&(O=Object.keys(j.root.opt.peers).length)&&++_<=O)){h.rid(r);var m=(m=r.$)&&m._||{},D=0,w;for(O=j.jam,delete j.jam;w=O[D++];){var A=w[0];w=w[1],A&&A(m.link||m.soul||n.valid(r.put)||((r.put||{})._||{})["#"],w,r,h)}}},{out:{get:{".":!0}}}),d)}function u(d){var k=this.at||this.on;if(!d||k.soul||k.has)return this.off();if(!!(d=(d=(d=d.$||d)._||d).id)){k.map;var T;if((T=this.seen||(this.seen={}))[d])return!0;T[d]=!0}}var g={},p=n.valid,f})(e,"./get"),e(function(y){var n=e("./root");n.chain.put=function(c,j,_){var O=this,$=O._,r=$.root;_=_||{},_.root=$.root,_.run||(_.run=r.once),l(_,$.id),_.ack=_.ack||j,_.via=_.via||O,_.data=_.data||c,_.soul||(_.soul=$.soul||typeof j=="string"&&j);var h=_.state=_.state||n.state();return typeof c=="function"?(c(function(m){_.data=m,O.put(p,p,_)}),O):_.soul?(_.$=r.$.get(_.soul),_.todo=[{it:_.data,ref:_.$}],_.turn=_.turn||d,_.ran=_.ran||s,function m(){var D=_.todo,w=D.pop(),A=w.it;w.ref&&w.ref._.id;var S,C,E,a,o;if(l(_,w.ref),(a=w.todo)&&(C=a.pop(),A=A[C],a.length&&D.push(w)),C&&(D.path||(D.path=[])).push(C),!(S=k(A))&&!(o=n.is(A))){if(!Object.plain(A)){s.err(_,"Invalid data: "+g(A)+" at "+(_.via.back(function(x){x.get&&a.push(x.get)},a=[])||a.join("."))+"."+(D.path||[]).join("."));return}for(var v=_.seen||(_.seen=[]),b=v.length;b--;)if(A===(a=v[b]).it){S=A=a.link;break}}if(C&&S)w.node=T(w.node,C,h,A);else{let x=function(G,R){var P=E.link["#"];R&&(R.off(),R.rid(G));var B=P||G.soul||(a=(G.$$||G.$)._||"").soul||a.link||((a=a.put||"")._||"")["#"]||a["#"]||((a=G.put||"")&&G.$$?a["#"]:(a["="]||a[":"]||"")["#"]);if(!P&&l(_,G.$),!B&&!w.link["#"]){(w.wait||(w.wait=[])).push(function(){x(G,R)});return}B||(B=[],(G.$$||G.$).back(function(M){if(a=M.soul||M.link)return B.push(a);B.push(M.get)}),B=B.reverse().join("/")),E.link["#"]=B,!o&&(((_.graph||(_.graph={}))[B]=E.node||(E.node={_:{}}))._["#"]=B),delete _.wait[I],E.wait&&setTimeout.each(E.wait,function(M){M&&M()}),_.ran(_)};var N=x;if(!_.seen){s.err(_,"Data at root of graph must be a node (an object).");return}_.seen.push(E={it:A,link:{},todo:o?[]:Object.keys(A).sort().reverse(),path:(D.path||[]).slice(),up:w}),w.node=T(w.node,C,h,E.link),!o&&E.todo.length&&D.push(E);var I=_.seen.length;(_.wait||(_.wait={}))[I]="",a=(E.ref=o?A:C?w.ref.get(C):w.ref)._,(a=A&&(A._||"")["#"]||a.soul||a.link)?x({soul:a}):E.ref.get(x,{run:_.run,v2020:1,out:{get:{".":" "}}})}if(!D.length)return _.ran(_);_.turn(m)}(),O):(u(_),O)};function l(c,j){if(!!j){j=(j._||"").id||j;var _=c.root.stun||(c.root.stun={on:n.on}),O={},$;c.stun||(c.stun=_.on("stun",function(){})),($=_.on(""+j))&&$.the.last.next(O),!(O.run>=c.run)&&_.on(""+j,function(r){if(c.stun.end){this.off(),this.to.next(r);return}r.run=r.run||c.run,r.stun=r.stun||c.stun})}}function s(c){if(c.err){s.end(c.stun,c.root);return}if(!(c.todo.length||c.end||!Object.empty(c.wait))){c.end=1;var j=c.$.back(-1)._,_=j.root,O=j.ask(function(m){_.on("ack",m),m.err&&!m.lack&&n.log(m),++$>(c.acks||0)&&this.off(),c.ack&&c.ack(m,this)},c.opt),$=0,r=c.stun,h;(h=function(){!r||(s.end(r,_),setTimeout.each(Object.keys(r=r.add||""),function(m){(m=r[m])&&m()}))}).hatch=h,c.ack&&!c.ok&&(c.ok=c.acks||9),c.via._.on("out",{put:c.out=c.graph,ok:c.ok&&{"@":c.ok+1},opt:c.opt,"#":O,_:h})}}s.end=function(c,j){c.end=f,c.the.to===c&&c===c.the.last&&delete j.stun,c.off()},s.err=function(c,j){(c.ack||f).call(c,c.out={err:c.err=n.log(j)}),c.ran(c)};function u(c){var j=c.via._,_;c.via=c.via.back(function(O){if(O.soul||!O.get)return O.$;_=c.data,(c.data={})[O.get]=_}),(!c.via||!c.via._.soul)&&(c.via=j.root.$.get(((c.data||"")._||"")["#"]||j.$.back("opt.uuid")())),c.via.put(c.data,c.ack,c)}function g(c,j){return c&&(j=c.constructor)&&j.name||typeof c}var p,f=function(){},d=setTimeout.turn,k=n.valid,T=n.state.ify})(e,"./put"),e(function(y){var n=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),y.exports=n})(e,"./index"),e(function(y){var n=e("./index");n.chain.on=function(u,g,p,f){var d=this,k=d._;k.root;var T;if(typeof u=="string")return g?(T=k.on(u,g,p||k,f),p&&p.$&&(p.subs||(p.subs=[])).push(T),d):k.on(u);var c=g;return(c=c===!0?{change:!0}:c||{}).not=1,c.on=1,d.get(u,c),d},n.chain.once=function(u,g){if(g=g||{},!u)return l(this);var p=this,f=p._,d=f.root;f.put;var k=String.random(7),T;return p.get(function(c,j,_,O){var $=this,r=$._,h=r.one||(r.one={});if(O.stun||h[k]==="")return;if((T=n.valid(c))===!0){m();return}if(typeof T=="string")return;clearTimeout((f.one||"")[k]),clearTimeout(h[k]),h[k]=setTimeout(m,g.wait||99);function m(D){if(!r.has&&!r.soul&&(r={put:c,get:j}),s===(T=r.put)&&(T=((_.$$||"")._||"").put),typeof n.valid(T)=="string"&&(T=d.$.get(T)._.put,T===s&&!D)){h[k]=setTimeout(function(){m(1)},g.wait||99);return}O.stun||h[k]!==""&&(h[k]="",(f.soul||f.has)&&O.off(),u.call($,T,r.get),clearTimeout(h[k]))}},{on:1}),p};function l(u,g,p){return n.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(p=u.chain())._.nix=u.once(function(f,d){p._.on("in",this._)}),p._.lex=u._.lex,p}n.chain.off=function(){var u=this,g=u._,p,f=g.back;if(!!f)return g.ack=0,(p=f.next)&&p[g.get]&&delete p[g.get],(p=f.ask)&&delete p[g.get],(p=f.put)&&delete p[g.get],(p=g.soul)&&delete f.root.graph[p],(p=g.map)&&Object.keys(p).forEach(function(d,k){k=p[d],k.link&&f.root.$.get(k.link).off()}),(p=g.next)&&Object.keys(p).forEach(function(d,k){k=p[d],k.$.off()}),g.on("off",{}),u};var s})(e,"./on"),e(function(y){var n=e("./index"),l=n.chain.get.next;n.chain.get.next=function(p,f){var d;return Object.plain(f)?(d=((d=f["#"])||"")["="]||d)?p.get(d):((d=p.chain()._).lex=f,p.on("in",function(k){String.match(k.get||(k.put||"")["."],f["."]||f["#"]||f)&&d.on("in",k),this.to.next(k)}),d.$):(l||u)(p,f)},n.chain.map=function(p,f,d){var k=this,T=k._,c,j;return Object.plain(p)&&(c=p["."]?p:{".":p},p=g),p?(n.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),j=k.chain(),k.map().on(function(_,O,$,r){var h=(p||u).call(this,_,O,$,r);if(g!==h){if(_===h)return j._.on("in",$);if(n.is(h))return j._.on("in",h._);var m={};Object.keys($.put).forEach(function(D){m[D]=$.put[D]},m),m["="]=h,j._.on("in",{get:O,put:m})}}),j):((j=T.each)||((T.each=j=k.chain())._.lex=c||j._.lex||T.lex,j._.nix=k.back("nix"),k.on("in",s,j._)),j)};function s(p){this.to.next(p);var f=this.as,d=p.$,k=d._,T=p.put,c;!k.soul&&!p.$$||(c=f.lex)&&!String.match(p.get||(T||"")["."],c["."]||c["#"]||c)||n.on.link(p,f)}var u=function(){},g})(e,"./map"),e(function(y){var n=e("./index");n.chain.set=function(l,s,u){var g=this,p=g.back(-1),f,d;return s=s||function(){},u=u||{},u.item=u.item||l,(f=((l||"")._||"")["#"])&&((l={})["#"]=f),typeof(d=n.valid(l))=="string"?g.get(f=d).put(l,s,u):n.is(l)?(g.put(function(k){l.get(function(T,c,j){if(!T)return s.call(g,{err:n.log('Only a node can be linked! Not "'+j.put+'"!')});(d={})[T]={"#":T},k(d)},!0)}),l):(Object.plain(l)&&(l=p.get(f=g.back("opt.uuid")()).put(l)),g.get(f||p.back("opt.uuid")(7)).put(l,s,u))}})(e,"./set"),e(function(y){e("./shim");var n=function(){},l=JSON.parseAsync||function(p,f,d){var k,T=+new Date;try{f(k,JSON.parse(p,d),s.sucks(+new Date-T))}catch(c){f(c)}},s=JSON.stringifyAsync||function(p,f,d,k){var T,c=+new Date;try{f(T,JSON.stringify(p,d,k),s.sucks(+new Date-c))}catch(j){f(j)}};s.sucks=function(p){p>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),s.sucks=n)};function u(p){var f=function(){},d=p.opt||{};d.log=d.log||console.log,d.gap=d.gap||d.wait||0,d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.pack=d.pack||d.max*.01*.01,d.puff=d.puff||9;var k=setTimeout.turn||setTimeout,T=p.dup,c=T.check,j=T.track,_=f.hear=function(r,h){if(!!r){if(d.max<=r.length)return f.say({dam:"!",err:"Message too big!"},h);f===this&&(_.d+=r.length||0,++_.c);var m=h.SH=+new Date,D=r[0],w;if(D==="["){l(r,function(A,S){if(A||!S)return f.say({dam:"!",err:"DAM JSON parse error."},h);console.STAT&&console.STAT(+new Date,S.length,"# on hear batch");var C=d.puff;(function E(){for(var a=+new Date,o=0,v;o<C&&(v=S[o++]);)f.hear(v,h);S=S.slice(o),console.STAT&&console.STAT(a,+new Date-a,"hear loop"),O(h),S.length&&k(E,0)})()}),r="";return}if(D==="{"||(r["#"]||Object.plain(r))&&(w=r)){if(w)return _.one(w,h,m);l(r,function(A,S){if(A||!S)return f.say({dam:"!",err:"DAM JSON parse error."},h);_.one(S,h,m)});return}}};_.one=function(r,h,E){var D,w,A,S,C;if(r.DBG&&(r.DBG=C={DBG:r.DBG}),C&&(C.h=E),C&&(C.hp=+new Date),(D=r["#"])||(D=r["#"]=String.random(9)),!(A=c(D))&&(w=r["##"],!(w&&(A=r["@"]||r.get&&D)&&T.check(S=A+w)))){if((r._=function(){}).via=f.leap=h,(A=r["><"])&&typeof A=="string"&&A.slice(0,99).split(",").forEach(function(a){this[a]=1},r._.yo={}),A=r.dam){(A=f.hear[A])&&A(r,h,p),j(D);return}(A=r.ok)&&(r._.near=A["/"]);var E=+new Date;C&&(C.is=E),h.SI=D,p.on("in",f.last=r),C&&(C.hd=+new Date),console.STAT&&console.STAT(E,+new Date-E,r.get?"msg get":r.put?"msg put":"msg"),(A=j(D)).via=h,r.get&&(A.it=r),S&&j(S),f.leap=f.last=null}},_.c=_.d=0,function(){var r=0,h;f.hash=function(w,A){var S,C,E,a=+new Date;s(w.put,function o(v,b){var I=(C||(C=E=b||"")).slice(0,32768);if(S=String.hash(I,S),C=C.slice(32768),C){k(o,0);return}console.STAT&&console.STAT(a,+new Date-a,"say json+hash"),w._.$put=E,w["##"]=S,f.say(w,A),delete w._.$put},m)};function m(w,A){var S;return A instanceof Object?(Object.keys(A).sort().forEach(D,{to:S={},on:A}),S):A}function D(w){this.to[w]=this.on[w]}f.say=function(w,A){var S;if((S=this)&&(S=S.to)&&S.next&&S.next(w),!w)return!1;var C,E,a=w["@"],o=w._||(w._=function(){}),v=w.DBG,b=+new Date;if(o.y=o.y||b,A||v&&(v.y=b),(C=w["#"])||(C=w["#"]=String.random(9)),!h&&j(C),!w["##"]&&g!==w.put&&!o.via&&a){f.hash(w,A);return}if(!A&&a&&(A=(S=T.s[a])&&(S.via||(S=S.it)&&(S=S._)&&S.via)||(S=f.last)&&a===S["#"]&&f.leap),!A&&a)return T.s[a]?void 0:(console.STAT&&console.STAT(+new Date,++r,"total no peer to ack to"),!1);if(!A&&f.way)return f.way(w);if(v&&(v.yh=+new Date),!(E=o.raw)){f.raw(w,A);return}if(v&&(v.yr=+new Date),!A||!A.id){if(!Object.plain(A||d.peers))return!1;var b=+new Date;d.puff;var I=d.peers,N=Object.keys(A||d.peers||{});console.STAT&&console.STAT(b,+new Date-b,"peer keys"),function R(){var P=+new Date;h=1;var B=o.raw;o.raw=E;for(var M=0,L;M<9&&(L=(N||"")[M++]);)!(L=I[L]||(A||"")[L])||f.say(w,L);o.raw=B,h=0,N=N.slice(M),console.STAT&&console.STAT(P,+new Date-P,"say loop"),N.length&&(k(R,0),a&&j(a))}();return}if(!A.wire&&f.wire&&f.wire(A),C!==A.last){if(A.last=C,A===o.via||(S=o.yo)&&(S[A.url]||S[A.pid]||S[A.id]))return!1;if(console.STAT&&console.STAT(b,((v||o).yp=+new Date)-(o.y||b),"say prep"),!h&&a&&j(a),A.batch){if(A.tail=(S=A.tail||0)+E.length,A.tail<=d.pack){A.batch+=(S?",":"")+E;return}O(A)}A.batch="[";var x=+new Date;setTimeout(function(){console.STAT&&console.STAT(x,+new Date-x,"0ms TO"),O(A)},d.gap),$(E,A),console.STAT&&a===A.SI&&console.STAT(b,+new Date-A.SH,"say ack")}},f.say.c=f.say.d=0,f.raw=function(w,A){if(!w)return"";var S=w._||{},C,E;if(E=S.raw)return E;if(typeof w=="string")return w;var a=w["##"],o=w["@"];if(a&&o){if(!S.via&&c(o+a))return!1;if((E=(T.s[o]||"").it)||(E=f.last)&&o===E["#"]){if(a===E["##"])return!1;E["##"]||(E["##"]=a)}}if(!w.dam&&!w["@"]){var v=0,b=[];E=d.peers;for(var I in E){var N=E[I];if(b.push(N.url||N.pid||N.id),++v>6)break}v>1&&(w["><"]=b.join())}if(w.put&&(E=w.ok)&&(w.ok={"@":(E["@"]||1)-1,"/":E["/"]==w._.near?f.near:E["/"]}),C=S.$put){E={},Object.keys(w).forEach(function(G){E[G]=w[G]}),E.put=":])([:",s(E,function(G,R){if(!G){var P=+new Date;E=R.indexOf('"put":":])([:"'),x(g,R=R.slice(0,E+6)+C+R.slice(E+14)),console.STAT&&console.STAT(P,+new Date-P,"say slice")}});return}s(w,x);function x(G,R){G||(S.raw=R,f.say(w,A))}}}();function O(r){var h=r.batch,m=typeof h=="string";if(m&&(h+="]"),r.batch=r.tail=null,!!h&&!(m?3>h.length:!h.length)){if(!m)try{h=h.length===1?h[0]:JSON.stringify(h)}catch(D){return d.log("DAM JSON stringify error",D)}!h||$(h,r)}}function $(r,h){try{var m=h.wire;h.say?h.say(r):m.send&&m.send(r),f.say.d+=r.length||0,++f.say.c}catch{(h.queue=h.queue||[]).push(r)}}return f.near=0,f.hi=function(r){var h=r.wire,m;if(!h){f.wire(r.length&&{url:r,id:r}||r);return}r.id?d.peers[r.url||r.id]=r:(m=r.id=r.id||r.url||String.random(9),f.say({dam:"?",pid:p.opt.pid},d.peers[m]=r),delete T.s[r.last]),r.met||(f.near++,r.met=+new Date,p.on("hi",r)),m=r.queue,r.queue=[],setTimeout.each(m||[],function(D){$(D,r)},0,9)},f.bye=function(r){r.met&&--f.near,delete r.met,p.on("bye",r);var h=+new Date;h=h-(r.met||h),f.bye.time=((f.bye.time||h)+h)/2},f.hear["!"]=function(r,h){d.log("Error:",r.err)},f.hear["?"]=function(r,h){r.pid&&(h.pid||(h.pid=r.pid),r["@"])||(f.say({dam:"?",pid:d.pid,"@":r["#"]},h),delete T.s[h.last])},f.hear.mob=function(r,h){if(!!r.peers){var m=Object.keys(r.peers),D=m[Math.random()*m.length>>0];!D||(f.bye(h),f.hi(D))}},p.on("create",function(r){r.opt.pid=r.opt.pid||String.random(9),this.to.next(r),r.on("out",f.say)}),p.on("bye",function(r,h){r=d.peers[r.id||r]||r,this.to.next(r),r.bye?r.bye():(h=r.wire)&&h.close&&h.close(),delete d.peers[r.id],r.wire=null}),p.on("bye",function(r,h){this.to.next(r),(h=console.STAT)&&(h.peers=f.near),(h=r.url)&&setTimeout(function(){},d.lack||9e3)}),p.on("hi",function(r,h){if(this.to.next(r),(h=console.STAT)&&(h.peers=f.near),!d.super){var m=Object.keys(p.next||"");m.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(m,function(D){var w=p.next[D];if(d.super||(w.ask||"")[""]){f.say({get:{"#":D}},r);return}setTimeout.each(Object.keys(w.ask||""),function(A){!A||f.say({"##":String.hash((p.graph[D]||"")[A]),get:{"#":D,".":A}},r)})})}}),f}var g;try{y.exports=u}catch{}})(e,"./mesh"),e(function(y){var n=e("./index");n.Mesh=e("./mesh"),n.on("opt",function(s){if(this.to.next(s),s.once)return;var u=s.opt;if(u.WebSocket===!1)return;var g=n.window||{},p=u.WebSocket||g.WebSocket||g.webkitWebSocket||g.mozWebSocket;if(!p)return;u.WebSocket=p;var f=u.mesh=u.mesh||n.Mesh(s);f.wire||u.wire,f.wire=u.wire=d;function d(j){try{if(!j||!j.url)return O&&O(j);var _=j.url.replace(/^http/,"ws"),O=j.wire=new u.WebSocket(_);return O.onclose=function(){T(j),u.mesh.bye(j)},O.onerror=function($){T(j)},O.onopen=function(){u.mesh.hi(j)},O.onmessage=function($){!$||u.mesh.hear($.data||$,j)},O}catch{u.mesh.bye(j)}}setTimeout(function(){!u.super&&s.on("out",{dam:"hi"})},1);var k=2*999;function T(j){clearTimeout(j.defer),u.peers[j.url]&&(c&&j.retry<=0||(j.retry=(j.retry||u.retry+1||60)-(-j.tried+(j.tried=+new Date)<k*4?1:0),j.defer=setTimeout(function _(){if(c&&c.hidden)return setTimeout(_,k);d(j)},k)))}var c=""+l!=typeof document&&document});var l})(e,"./websocket"),e(function(y){if(!(typeof Gun>"u")){var n=function(){},l;try{l=(Gun.window||n).localStorage}catch{}l||(Gun.log("Warning: No localStorage exists to persist data to!"),l={setItem:function(u,g){this[u]=g},removeItem:function(u){delete this[u]},getItem:function(u){return this[u]}});var s=JSON.stringifyAsync||function(u,g,p,f){var d;try{g(d,JSON.stringify(u,p,f))}catch(k){g(k)}};Gun.on("create",function u(g){this.to.next(g);var p=g.opt;g.graph;var f=[],d,k,T,c;if(p.localStorage===!1)return;p.prefix=p.file||"gun/";try{d=u[p.prefix]=u[p.prefix]||JSON.parse(T=l.getItem(p.prefix))||{}}catch{d=u[p.prefix]={}}T=(T||"").length,g.on("get",function(_){this.to.next(_);var O=_.get,$,r,h,m;!O||!($=O["#"])||(r=d[$]||m,r&&(h=O["."])&&!Object.plain(h)&&(r=Gun.state.ify({},h,Gun.state.is(r,h),r[h],$)),Gun.on.get.ack(_,r))}),g.on("put",function(_){this.to.next(_);var O=_.put,$=O["#"],r=O["."],h=_["#"],m=_.ok||"";if(d[$]=Gun.state.ify(d[$],r,O[">"],O[":"],$),c&&T>4999880){g.on("in",{"@":h,err:"localStorage max!"});return}!_["@"]&&(!_._.via||Math.random()<m["@"]/m["/"])&&f.push(h),!k&&(k=setTimeout(j,9+T/333))});function j(){if(!f.length&&((setTimeout.turn||"").s||"").length){setTimeout(j,99);return}var _=f;clearTimeout(k),k=!1,f=[],s(d,function(O,$){try{!O&&l.setItem(p.prefix,$)}catch(r){O=c=r||"localStorage failure"}O&&(Gun.log(O+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),g.on("localStorage:error",{err:O,get:p.prefix,put:d})),T=$.length,setTimeout.each(_,function(r){g.on("in",{"@":r,err:O,ok:0})},0,99)})}})}})(e,"./localStorage")})(),function(){var E;if(""+E!=typeof Gun){var e=function(a){console.warn("Warning! Deprecated internal utility will break in next version:",a)},i=Gun;i.fn=i.fn||{is:function(a){return e("fn"),!!a&&typeof a=="function"}},i.bi=i.bi||{is:function(a){return e("bi"),a instanceof Boolean||typeof a=="boolean"}},i.num=i.num||{is:function(a){return e("num"),!y(a)&&(a-parseFloat(a)+1>=0||a===1/0||a===-1/0)}},i.text=i.text||{is:function(a){return e("text"),typeof a=="string"}},i.text.ify=i.text.ify||function(a){return e("text.ify"),i.text.is(a)?a:typeof JSON<"u"?JSON.stringify(a):a&&a.toString?a.toString():a},i.text.random=i.text.random||function(a,o){e("text.random");var v="";for(a=a||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";a>0;)v+=o.charAt(Math.floor(Math.random()*o.length)),a--;return v},i.text.match=i.text.match||function(a,o){var v,b;return e("text.match"),typeof a!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},v=o["="]||o["*"]||o[">"]||o["<"],a===v?!0:b!==o["="]?!1:(v=o["*"]||o[">"]||o["<"],a.slice(0,(v||"").length)===v?!0:b!==o["*"]?!1:b!==o[">"]&&b!==o["<"]?a>=o[">"]&&a<=o["<"]:b!==o[">"]&&a>=o[">"]||b!==o["<"]&&a<=o["<"]))},i.text.hash=i.text.hash||function(a,o){if(e("text.hash"),typeof a=="string"){if(o=o||0,!a.length)return o;for(var v=0,b=a.length,I;v<b;++v)I=a.charCodeAt(v),o=(o<<5)-o+I,o|=0;return o}},i.list=i.list||{is:function(a){return e("list"),a instanceof Array}},i.list.slit=i.list.slit||Array.prototype.slice,i.list.sort=i.list.sort||function(a){return e("list.sort"),function(o,v){return!o||!v?0:(o=o[a],v=v[a],o<v?-1:o>v?1:0)}},i.list.map=i.list.map||function(a,o,v){return e("list.map"),S(a,o,v)},i.list.index=1,i.obj=i.boj||{is:function(a){return e("obj"),a?a instanceof Object&&a.constructor===Object||Object.prototype.toString.call(a).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},i.obj.put=i.obj.put||function(a,o,v){return e("obj.put"),(a||{})[o]=v,a},i.obj.has=i.obj.has||function(a,o){return e("obj.has"),a&&Object.prototype.hasOwnProperty.call(a,o)},i.obj.del=i.obj.del||function(a,o){if(e("obj.del"),!!a)return a[o]=null,delete a[o],a},i.obj.as=i.obj.as||function(a,o,v,b){return e("obj.as"),a[o]=a[o]||(b===v?{}:v)},i.obj.ify=i.obj.ify||function(a){if(e("obj.ify"),h(a))return a;try{a=JSON.parse(a)}catch{a={}}return a},function(){var a;function o(v,b){D(this,b)&&a!==this[b]||(this[b]=v)}i.obj.to=i.obj.to||function(v,b){return e("obj.to"),b=b||{},S(v,o,b),b}}(),i.obj.copy=i.obj.copy||function(a){return e("obj.copy"),a&&JSON.parse(JSON.stringify(a))},function(){function a(o,v){var b=this.n,I;if(!(b&&(v===b||h(b)&&D(b,v)))&&I!==v)return!0}i.obj.empty=i.obj.empty||function(o,v){return e("obj.empty"),o?!S(o,a,{n:v}):!0}}(),function(){function a(b,I){if(arguments.length===2){a.r=a.r||{},a.r[b]=I;return}a.r=a.r||[],a.r.push(b)}var o=Object.keys,v;Object.keys=Object.keys||function(b){return v(b,function(I,N,x){x(N)})},i.obj.map=v=i.obj.map||function(b,I,N){e("obj.map");var x,G=0,R,P,B,M,L=typeof I=="function";if(a.r=x,o&&h(b)&&(B=o(b),M=!0),N=N||{},y(b)||B)for(R=(B||b).length;G<R;G++){var X=G+i.list.index;if(L){if(P=M?I.call(N,b[B[G]],B[G],a):I.call(N,b[G],X,a),P!==x)return P}else if(I===b[M?B[G]:G])return B?B[G]:X}else for(G in b)if(L){if(D(b,G)&&(P=N?I.call(N,b[G],G,a):I(b[G],G,a),P!==x))return P}else if(I===b[G])return G;return L?a.r:i.list.index?0:-1}}(),i.time=i.time||{},i.time.is=i.time.is||function(a){return e("time"),a?a instanceof Date:+new Date().getTime()};var $=i.fn.is,y=i.list.is,r=i.obj,h=r.is,D=r.has,S=r.map,n={};n.is=function(a){return e("val.is"),a===E?!1:a===null?!0:a===1/0?!1:u(a)||s(a)||c(a)?!0:n.link.is(a)||!1},n.link=n.rel={_:"#"},function(){n.link.is=function(o){if(e("val.link.is"),o&&o[l]&&!o._&&h(o)){var v={};if(S(o,a,v),v.id)return v.id}return!1};function a(o,v){var b=this;if(b.id)return b.id=!1;if(v==l&&u(o))b.id=o;else return b.id=!1}}(),n.link.ify=function(a){return e("val.link.ify"),A({},l,a)},i.obj.has._=".";var l=n.link._,E,s=i.bi.is,c=i.num.is,u=i.text.is,r=i.obj,h=r.is,A=r.put,S=r.map;i.val=i.val||n;var g={_:"_"};g.soul=function(a,o){return e("node.soul"),a&&a._&&a._[o||d]},g.soul.ify=function(a,o){return e("node.soul.ify"),o=typeof o=="string"?{soul:o}:o||{},a=a||{},a._=a._||{},a._[d]=o.soul||a._[d]||f(),a},g.soul._=n.link._,function(){g.is=function(o,v,b){e("node.is");var I;return h(o)&&(I=g.soul(o))?!S(o,a,{as:b,cb:v,s:I,n:o}):!1};function a(o,v){if(v!==g._){if(!n.is(o))return!0;this.cb&&this.cb.call(this.as,o,v,this.n,this.s)}}}(),function(){g.ify=function(o,v,b){return e("node.ify"),v?typeof v=="string"?v={soul:v}:typeof v=="function"&&(v={map:v}):v={},v.map&&(v.node=v.map.call(b,o,E,v.node||{})),(v.node=g.soul.ify(v.node||{},v))&&S(o,a,{o:v,as:b}),v.node};function a(o,v){var b=this.o,I,N;if(b.map){I=b.map.call(this.as,o,""+v,b.node),N===I?m(b.node,v):b.node&&(b.node[v]=I);return}n.is(o)&&(b.node[v]=o)}}();var r=i.obj,h=r.is,m=r.del,S=r.map,p=i.text,f=p.random,d=g.soul._,E;i.node=i.node||g;var k=i.state;k.lex=function(){return e("state.lex"),k().toString(36).replace(".","")},k.to=function(a,o,v){e("state.to");var b=(a||{})[o];return h(b)&&(b=C(b)),k.ify(v,o,k.is(a,o),b,g.soul(a))},function(){k.map=function(o,v,b){e("state.map");var I,N=h(N=o||v)?N:null;return o=$(o=o||v)?o:null,N&&!o?(v=c(v)?v:k(),N[_]=N[_]||{},S(N,a,{o:N,s:v}),N):(b=b||h(v)?v:I,v=c(v)?v:k(),function(x,G,R,P){if(!o)return a.call({o:R,s:v},x,G),x;o.call(b||this||{},x,G,R,P),!(D(R,G)&&I===R[G])&&a.call({o:R,s:v},x,G)})};function a(o,v){_!==v&&k.ify(this.o,v,this.s)}}();var r=i.obj;r.as;var D=r.has,h=r.is,S=r.map,C=r.copy,T=i.num,c=T.is,j=i.fn,$=j.is,_=g._,E,O={};(function(){O.is=function(v,b,I,N){return e("graph.is"),!v||!h(v)||w(v)?!1:!S(v,a,{cb:b,fn:I,as:N})};function a(v,b){if(!v||b!==g.soul(v)||!g.is(v,this.fn,this.as))return!0;!this.cb||(o.n=v,o.as=this.as,this.cb.call(o.as,v,b,o))}function o(v){v&&g.is(o.n,v,o.as)}})(),function(){O.ify=function(N,x,G){e("graph.ify");var R={path:[],obj:N};return x?typeof x=="string"?x={soul:x}:typeof x=="function"&&(x.map=x):x={},typeof G=="string"&&(x.soul=x.soul||G,G=E),x.soul&&(R.link=n.link.ify(x.soul)),x.shell=(G||{}).shell,x.graph=x.graph||{},x.seen=x.seen||[],x.as=x.as||G,a(x,R),x.root=R.node,x.graph};function a(N,x){var G;return(G=I(N,x))?G:(x.env=N,x.soul=v,g.ify(x.obj,o,x)&&(x.link=x.link||n.link.ify(g.soul(x.node)),x.obj!==N.shell&&(N.graph[n.link.is(x.link)]=x.node)),x)}function o(N,x,G){var R=this,P=R.env,B,M;if(g._===x&&D(N,n.link._))return G._;if(!!(B=b(N,x,G,R,P))){if(x||(R.node=R.node||G||{},D(N,g._)&&g.soul(N)&&(R.node._=C(N._)),R.node=g.soul.ify(R.node,n.link.is(R.link)),R.link=R.link||n.link.ify(g.soul(R.node))),(M=P.map)&&(M.call(P.as||{},N,x,G,R),D(G,x))){if(N=G[x],E===N){m(G,x);return}if(!(B=b(N,x,G,R,P)))return}if(!x)return R.node;if(B===!0)return N;if(M=a(P,{obj:N,path:R.path.concat(x)}),!!M.node)return M.link}}function v(N){var x=this,G=n.link.is(x.link),R=x.env.graph;x.link=x.link||n.link.ify(N),x.link[n.link._]=N,x.node&&x.node[g._]&&(x.node[g._][n.link._]=N),D(R,G)&&(R[N]=R[G],m(R,G))}function b(N,x,G,R,P){var B;if(n.is(N))return!0;if(h(N))return 1;if(B=P.invalid)return N=B.call(P.as||{},N,x,G),b(N,x,G,R,P);P.err="Invalid value at '"+R.path.concat(x).join(".")+"'!",i.list.is(N)&&(P.err+=" Use `.set(item)` instead of an Array.")}function I(N,x){for(var G=N.seen,R=G.length,P;R--;)if(P=G[R],x.obj===P.obj)return P;G.push(x)}}(),O.node=function(a){e("graph.node");var o=g.soul(a);if(!!o)return A({},o,a)},function(){O.to=function(o,v,b){if(e("graph.to"),!!o){var I={};return b=b||{seen:{}},S(o[v],a,{obj:I,graph:o,opt:b}),I}};function a(o,v){var b,I;if(g._===v){if(w(o,n.link._))return;this.obj[v]=C(o);return}if(!(b=n.link.is(o))){this.obj[v]=o;return}if(I=this.opt.seen[b]){this.obj[v]=I;return}this.obj[v]=this.opt.seen[b]=O.to(this.graph,b,this.opt)}}();var $=i.fn.is,r=i.obj,h=r.is,m=r.del,D=r.has,w=r.empty,A=r.put,S=r.map,C=r.copy,E;i.graph=i.graph||O}}()})(ee);(function(t){t.exports=ee.exports})(te);const nn=tn(te.exports),rn=ut('<div><div class="grid grid-cols-3 grid-rows-3"></div></div>'),on=nn("https://mvp-gun.herokuapp.com/gun"),un=()=>{const[t,e]=Y(Array.from({length:9},()=>F.None)),[i,y]=Y(F.Circle);let n=F.None;const l=V(()=>{const k=ke(t());return k!==F.None&&(n=F.None),k}),s=k=>{let T=t(),c=i();n===F.None&&(n=c),c===n&&T[k]===F.None&&(T[k]=c,e([...T]),c=we(c),y(c),g())},u=()=>{e(Array.from({length:9},()=>F.None)),y(F.Circle),n=F.None,g()},g=()=>{d.put({field:{...t()},turn:i()})},p=Fe();let f=p.query.id;if(!f){f=Ze();const k=p.pathname;We()(`${k}?id=${f}`,{replace:!0})}const d=on.get(f);return d.get("field").on(k=>{const T=Object.values(k),c=T.slice(0,T.length-1);e(c)}),d.get("turn").on(k=>{y(k)}),(()=>{const k=rn.cloneNode(!0),T=k.firstChild;return rt(T,W(ye,{get each(){return t()},children:(c,j)=>W(Se,{state:c,onClick:()=>s(j())})})),rt(k,W(zt,{get children(){return[W(lt,{get when(){return l()===F.Circle},get children(){return W(_t,{restartGame:u,result:"Winner: Circle"})}}),W(lt,{get when(){return l()===F.Cross},get children(){return W(_t,{restartGame:u,result:"Winner: Cross"})}}),W(lt,{get when(){return l()===F.Draw},get children(){return W(_t,{restartGame:u,result:"Draw"})}})]}}),null),k})()},fn=ut('<div class="absolute inset-0 flex justify-center items-center bg-artichoke"></div>'),sn=()=>W(He,{get children(){const t=fn.cloneNode(!0);return rt(t,W(un,{})),t}});ge(()=>W(sn,{}),document.getElementById("root"));
